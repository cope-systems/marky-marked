!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.marky=t():e.marky=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=74)}([function(e,t,n){e.exports={default:n(46),__esModule:!0}},function(e,t,n){var i=n(27)("wks"),r=n(31),s=n(3).Symbol,o="function"==typeof s;(e.exports=function(e){return i[e]||(i[e]=o&&s[e]||(o?s:r)("Symbol."+e))}).store=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Element={init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.type=e,this.title=t,this.id=n,this.element=this.register(),this.title&&(this.element.title=this.title)},register:function(){return document.createElement(this.type)},assign:function(e,t){this.element[e]=t},appendTo:function(e){e.appendChild(this.element)},addClass:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach(function(t){e.element.classList.add(t.replace(/[ ]/g,"-").toLowerCase())})},removeClass:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach(function(t){e.element.classList.remove(t.replace(/[ ]/g,"-").toLowerCase())})},listen:function(e,t){this.element.addEventListener(e,t)}}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var i=n(12);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(24)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var i=n(9),r=n(14);e.exports=n(6)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(4),r=n(52),s=n(67),o=Object.defineProperty;t.f=n(6)?Object.defineProperty:function(e,t,n){if(i(e),t=s(t,!0),i(n),r)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var i=n(3),r=n(5),s=n(21),o=n(8),l=function(e,t,n){var a,u,c,d=e&l.F,h=e&l.G,p=e&l.S,f=e&l.P,g=e&l.B,m=e&l.W,v=h?r:r[t]||(r[t]={}),y=v.prototype,k=h?i:p?i[t]:(i[t]||{}).prototype;h&&(n=t);for(a in n)(u=!d&&k&&void 0!==k[a])&&a in v||(c=u?k[a]:n[a],v[a]=h&&"function"!=typeof k[a]?n[a]:g&&u?s(c,i):m&&k[a]==c?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):f&&"function"==typeof c?s(Function.call,c):c,f&&((v.virtual||(v.virtual={}))[a]=c,e&l.R&&y&&!y[a]&&o(y,a,c)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports={}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i=n(27)("keys"),r=n(31);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=void 0;var r=n(44),s=i(r),o=n(0),l=i(o),a=n(2);(t.Icon=(0,l.default)(a.Element)).init=function(e){a.Element.init.call(this,"i"),this.addClass.apply(this,(0,s.default)(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Marky=void 0;var i=n(40),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=n(38),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),l=n(19),a=n(39);t.Marky={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.mark=r.default,this.state=[{markdown:"",html:"",selection:[0,0]}],this.index=0,this.editor=t,this.container=e,this.markdown="",this.html="",this.listeners=[]},destroy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container;for(var t in this.listeners)this.editor.removeEventListener(t,this.listeners[t]);e.parentNode&&e.parentNode.removeChild(e)},update:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.index,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.editor,s=o.update(e,t,n,i);return this.state=s.state,this.index=s.index,r.dispatchEvent(l.markychange),this.index},updateEditor:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.editor;n.value=e,n.setSelectionRange(t[0],t[1])},updateMarkdown:function(e){this.markdown=e},updateHTML:function(e){this.html=e},undo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.index,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.editor;if(0===n)return n;var r=o.undo(e,t,n);return this.index=r.index,this.updateEditor(r.state.markdown,r.state.selection,i),i.dispatchEvent(l.markychange),this.index},redo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.index,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.editor;if(n===t.length-1)return n;var r=o.redo(e,t,n);return this.index=r.index,this.updateEditor(r.state.markdown,r.state.selection,i),i.dispatchEvent(l.markychange),this.index},setSelection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0];return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor).setSelectionRange(e[0],e[1]),e},expandSelectionForward:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor,n=t.selectionStart,i=t.selectionEnd+e;return t.setSelectionRange(n,i),[n,i]},expandSelectionBackward:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor,n=t.selectionStart-e,i=t.selectionEnd;return t.setSelectionRange(n,i),[n,i]},moveCursorBackward:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor,n=t.selectionStart-e;return t.setSelectionRange(n,n),n},moveCursorForward:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor,n=t.selectionStart+e;return t.setSelectionRange(n,n),n},bold:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor;e=e||[t.selectionStart,t.selectionEnd];var n=(0,a.inlineHandler)(t.value,e,"**");return this.updateEditor(n.value,n.range,t),t.dispatchEvent(l.markyupdate),[n.range[0],n.range[1]]},italic:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor;e=e||[t.selectionStart,t.selectionEnd];var n=(0,a.inlineHandler)(t.value,e,"_");return this.updateEditor(n.value,n.range,t),t.dispatchEvent(l.markyupdate),[n.range[0],n.range[1]]},strikethrough:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor;e=e||[t.selectionStart,t.selectionEnd];var n=(0,a.inlineHandler)(t.value,e,"~~");return this.updateEditor(n.value,n.range,t),t.dispatchEvent(l.markyupdate),[n.range[0],n.range[1]]},code:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor;e=e||[t.selectionStart,t.selectionEnd];var n=(0,a.inlineHandler)(t.value,e,"`");return this.updateEditor(n.value,n.range,t),t.dispatchEvent(l.markyupdate),[n.range[0],n.range[1]]},blockquote:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor;e=e||[t.selectionStart,t.selectionEnd];var n=(0,a.blockHandler)(t.value,e,"> ");return this.updateEditor(n.value,n.range,t),t.dispatchEvent(l.markyupdate),[n.range[0],n.range[1]]},heading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.editor;t=t||[n.selectionStart,n.selectionEnd];for(var i=[],r=void 0,s=1;s<=e;s++)i.push("#");r=i.join("");var o=r?" ":"",u=(0,a.blockHandler)(n.value,t,r+o);return this.updateEditor(u.value,u.range,n),n.dispatchEvent(l.markyupdate),[u.range[0],u.range[1]]},link:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"http://url.com",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"http://url.com",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.editor;e=e||[i.selectionStart,i.selectionEnd];var r="["+n+"]("+t+")",s=(0,a.insertHandler)(i.value,e,r);return this.updateEditor(s.value,s.range,i),i.dispatchEvent(l.markyupdate),[s.range[0],s.range[1]]},image:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"http://imagesource.com/image.jpg",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"http://imagesource.com/image.jpg",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.editor;e=e||[i.selectionStart,i.selectionEnd];var r="!["+n+"]("+t+")",s=(0,a.insertHandler)(i.value,e,r);return this.updateEditor(s.value,s.range,i),i.dispatchEvent(l.markyupdate),[s.range[0],s.range[1]]},unorderedList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor;e=e||[t.selectionStart,t.selectionEnd];var n=(0,a.listHandler)(t.value,e,"ul");return this.updateEditor(n.value,n.range,t),t.dispatchEvent(l.markyupdate),[n.range[0],n.range[1]]},orderedList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor;e=e||[t.selectionStart,t.selectionEnd];var n=(0,a.listHandler)(t.value,e,"ol");return this.updateEditor(n.value,n.range,t),t.dispatchEvent(l.markyupdate),[n.range[0],n.range[1]]},indent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor;e=e||[t.selectionStart,t.selectionEnd];var n=(0,a.indentHandler)(t.value,e,"in");return this.updateEditor(n.value,n.range,t),t.dispatchEvent(l.markyupdate),[n.range[0],n.range[1]]},outdent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor;e=e||[t.selectionStart,t.selectionEnd];var n=(0,a.indentHandler)(t.value,e,"out");return this.updateEditor(n.value,n.range,t),t.dispatchEvent(l.markyupdate),[n.range[0],n.range[1]]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}();t.markyblur=new CustomEvent("markyblur"),t.markyfocus=new CustomEvent("markyfocus"),t.markyselect=new CustomEvent("markyselect"),t.markyupdate=new CustomEvent("markyupdate"),t.markychange=new CustomEvent("markychange")},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i=n(47);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var i=n(12),r=n(3).document,s=i(r)&&i(r.createElement);e.exports=function(e){return s?r.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var i=n(4),r=n(60),s=n(23),o=n(15)("IE_PROTO"),l=function(){},a=function(){var e,t=n(22)("iframe"),i=s.length;for(t.style.display="none",n(51).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),a=e.F;i--;)delete a.prototype[s[i]];return a()};e.exports=Object.create||function(e,t){var n;return null!==e?(l.prototype=i(e),n=new l,l.prototype=null,n[o]=e):n=a(),void 0===t?n:r(n,t)}},function(e,t,n){var i=n(9).f,r=n(7),s=n(1)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,s)&&i(e,s,{configurable:!0,value:t})}},function(e,t,n){var i=n(3),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});e.exports=function(e){return r[e]||(r[e]={})}},function(e,t,n){var i=n(53),r=n(10);e.exports=function(e){return i(r(e))}},function(e,t,n){var i=n(16),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t,n){var i=n(10);e.exports=function(e){return Object(i(e))}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t,n){"use strict";var i=n(33),r=function(e){return e&&e.__esModule?e:{default:e}}(i);e.exports=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=n(18),o=(0,r.default)(s.Marky);o.init(),t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;var i=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=n(2),o=n(17);(t.Button=(0,r.default)(s.Element)).init=function(e,t){s.Element.init.call(this,"button",e,t),this.addClass(this.title,this.id),this.assign("value",this.title),this.icon=(0,r.default)(o.Icon);for(var n=arguments.length,i=Array(n>2?n-2:0),l=2;l<n;l++)i[l-2]=arguments[l];this.icon.init(i),this.icon.appendTo(this.element)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeadingDialog=t.ImageDialog=t.LinkDialog=void 0;var i=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=n(2),o=n(36),l=t.LinkDialog=(0,r.default)(s.Element);l.init=function(e,t){s.Element.init.call(this,"div",e,t),this.addClass(this.title,t,"dialog"),l.linkForm=(0,r.default)(s.Element),this.linkForm.init("form","Link Form"),this.linkForm.assign("id",this.id+"-link-form"),this.linkUrlInput=(0,r.default)(s.Element),this.linkUrlInput.init("input","Link Url"),this.linkUrlInput.addClass("link-url-input"),this.linkUrlInput.assign("type","text"),this.linkUrlInput.assign("name",this.id+"-link-url-input"),this.linkUrlInput.assign("placeholder","http://url.com"),this.linkDisplayInput=(0,r.default)(s.Element),this.linkDisplayInput.init("input","Link Display"),this.linkDisplayInput.addClass("link-display-input"),this.linkDisplayInput.assign("type","text"),this.linkDisplayInput.assign("name",this.id+"-link-display-input"),this.linkDisplayInput.assign("placeholder","Display text"),this.insertButton=(0,r.default)(s.Element),this.insertButton.init("button","Insert Link"),this.insertButton.addClass("insert-link"),this.insertButton.assign("textContent","Insert"),this.linkUrlInput.appendTo(this.linkForm.element),this.linkDisplayInput.appendTo(this.linkForm.element),this.insertButton.appendTo(this.linkForm.element),this.linkForm.appendTo(this.element)};var a=t.ImageDialog=(0,r.default)(s.Element);a.init=function(e,t){s.Element.init.call(this,"div",e,t),this.addClass(this.title,t,"dialog"),a.imageForm=(0,r.default)(s.Element),this.imageForm.init("form","Image Form"),this.imageForm.assign("id",this.id+"-image-form"),this.imageSourceInput=(0,r.default)(s.Element),this.imageSourceInput.init("input","Image Source"),this.imageSourceInput.addClass("image-source-input"),this.imageSourceInput.assign("type","text"),this.imageSourceInput.assign("name",this.id+"-image-source-input"),this.imageSourceInput.assign("placeholder","http://url.com/image.jpg"),this.imageAltInput=(0,r.default)(s.Element),this.imageAltInput.init("input","Image Alt"),this.imageAltInput.addClass("image-alt-input"),this.imageAltInput.assign("type","text"),this.imageAltInput.assign("name",this.id+"-image-alt-input"),this.imageAltInput.assign("placeholder","Alt text"),this.insertButton=(0,r.default)(s.Element),this.insertButton.init("button","Insert Image"),this.insertButton.addClass("insert-image"),this.insertButton.assign("textContent","Insert"),this.imageSourceInput.appendTo(this.imageForm.element),this.imageAltInput.appendTo(this.imageForm.element),this.insertButton.appendTo(this.imageForm.element),this.imageForm.appendTo(this.element)},(t.HeadingDialog=(0,r.default)(s.Element)).init=function(e,t){var n=this;s.Element.init.call(this,"div",e,t),this.addClass(this.title,t,"dialog"),this.headingList=(0,r.default)(s.Element),this.headingList.init("ul","Heading List"),this.headingList.assign("id",t+"-heading-list"),this.options=[];for(var i=0;i<6;i++){var l=(0,r.default)(o.HeadingItem);l.init("Heading "+(i+1),i+1),this.options.push(l)}var a=(0,r.default)(o.HeadingItem);a.init("Remove Heading","0","fa","fa-remove"),this.options.push(a),this.options.forEach(function(e){e.appendTo(n.headingList.element)}),this.headingList.appendTo(this.element)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeadingItem=void 0;var i=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=n(2),o=n(17);(t.HeadingItem=(0,r.default)(s.Element)).init=function(e,t){s.Element.init.call(this,"li",e),this.addClass(this.title.replace(" ","-")),this.assign("value",t),this.button=(0,r.default)(s.Element),this.button.init("button",e),this.button.assign("value",t),this.button.addClass("heading-button"),this.button.appendTo(this.element);for(var n=arguments.length,i=Array(n>2?n-2:0),l=2;l<n;l++)i[l-2]=arguments[l];i.length?(this.icon=(0,r.default)(o.Icon),this.icon.init(i),this.icon.appendTo(this.button.element)):this.button.assign("textContent",t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Separator=void 0;var i=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=n(2);(t.Separator=(0,r.default)(s.Element)).init=function(){s.Element.init.call(this,"span"),this.addClass("separator")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i){var r={sanitize:!0},s=(0,a.default)(e,r).toString()||"";return(0,c.default)(n,i,function(){return{markdown:e,html:s,selection:t}})}function s(e,t,n){return n=n>e-1?n-e:0,{state:t[n],index:n}}function o(e,t,n){return n=n<t.length-(e+1)?n+e:t.length-1,{state:t[n],index:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.update=r,t.undo=s,t.redo=o;var l=n(72),a=i(l),u=n(42),c=i(u)},function(e,t,n){"use strict";function i(e,t,n){var i=void 0,r=[n,n];return e.indexOf(n)!==-1&&t.forEach(function(i,s){e.lastIndexOf(n,i)===i-n.length&&(e=e.substring(0,i-n.length)+e.substring(i,e.length),0===s?(t[0]=t[0]-n.length,t[1]=t[1]-n.length):t[1]=t[1]-n.length,1===s&&r[0]&&(t[1]=t[1]+n.length),r[s]=""),e.indexOf(n,i)===i&&(e=e.substring(0,i)+e.substring(i+n.length,e.length),0===s&&t[0]!==t[1]&&(t[1]=t[1]-n.length),0===s&&t[0]===t[1]&&(t[0]=t[0]-n.length),1===s&&r[0]&&(t[1]=t[1]+n.length),r[s]="")}),i=e.substring(0,t[0])+r[0]+e.substring(t[0],t[1])+r[1]+e.substring(t[1],e.length),{value:i,range:[t[0]+r[0].length,t[1]+r[1].length]}}function r(e,t,n){var i=t[0],r=t[1],s=void 0,o=(0,a.startOfLine)(e,i),l=(0,a.endOfLine)(e,r);if((0,a.indexOfMatch)(e,/^[#>]/m,o)===o){var u=e.substring(o,o+e.substring(o).search(/[0-9~*`_-]|\b|\n|$/gm));return s=e.substring(0,o)+e.substring(o+e.substring(o).search(/[0-9~*`_-]|\b|\n|$/gm),e.length),l-=u.length,u.trim()!==n.trim()&&n.trim().length&&(s=e.substring(0,o)+n+e.substring(o+e.substring(o).search(/[0-9~*`_-]|\b|\n|$/gm),e.length),o+=n.length,l+=n.length),{value:s,range:[o,l]}}return s=e.substring(0,o)+n+e.substring(o,e.length),{value:s,range:[i+n.length,r+n.length]}}function s(e,t,n){var i=(0,a.startOfLine)(e,t[0]),r=(0,a.endOfLine)(e,t[1]),s=(0,a.splitLines)(e.substring(i,r)),o=[],l=void 0;s.forEach(function(e,t){var i="ul"===n?"- ":t+1+". ",r=void 0;if(0===(0,a.indexOfMatch)(e,/^[0-9#>-]/m,0)){var s=e.substring(0,0+e.substring(0).search(/[~*`_[!]|[a-zA-Z]|\r|\n|$/gm));return r=e.substring(e.search(/[~*`_[!]|[a-zA-Z]|\r|\n|$/gm),e.length),s.trim()!==i.trim()&&(r=i+e.substring(e.search(/[~*`_[!]|[a-zA-Z]|\r|\n|$/gm),e.length)),o.push(r)}return r=i+e.substring(0,e.length),o.push(r)});var u=o.join("\r\n");return l=e.substring(0,i)+o.join("\r\n")+e.substring(r,e.length),{value:l,range:[i,i+u.replace(/\n/gm,"").length]}}function o(e,t,n){var i=(0,a.startOfLine)(e,t[0]),r=(0,a.endOfLine)(e,t[1]),s=(0,a.splitLines)(e.substring(i,r)),o=[],l=void 0;s.forEach(function(e){var t=void 0;return"out"===n?(t=0===e.indexOf("    ",0)?e.substring("    ".length,e.length):e.substring(e.search(/[~*`_[!#>-]|[a-zA-Z0-9]|\r|\n|$/gm),e.length),o.push(t)):(t="    "+e.substring(0,e.length),o.push(t))});var u=o.join("\r\n");return l=e.substring(0,i)+o.join("\r\n")+e.substring(r,e.length),{value:l,range:[i,i+u.replace(/\n/gm,"").length]}}function l(e,t,n){var i=t[0],r=t[1],s=void 0;return s=e.substring(0,i)+n+e.substring(r,e.length),{value:s,range:[i,i+n.length]}}Object.defineProperty(t,"__esModule",{value:!0}),t.inlineHandler=i,t.blockHandler=r,t.listHandler=s,t.indentHandler=o,t.insertHandler=l;var a=n(41)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.getElementsByTagName("marky-mark");if(!(e instanceof Array||e instanceof HTMLCollection||e instanceof NodeList))throw new TypeError("`containers` argument should be an Array or HTMLCollection");var t=[],n=[];return Array.prototype.forEach.call(e,function(e,i){function h(e){e.preventDefault(),k.element.focus()}function p(e){e.preventDefault(),e.currentTarget.classList.add("active"),k.element.focus()}function f(e){e.currentTarget.classList.remove("active")}if(!(e instanceof HTMLElement))throw new TypeError("`containers` argument should only contain HTMLElements");var g=i;if(e.children.length)return void(e.getAttribute("id")&&t.push(parseInt(e.getAttribute("id").split("-")[2])));var m=(0,r.default)(o.Element);m.init("div","Toolbar"),t.length&&(t.sort(),g=t[t.length-1]+1);var v="marky-mark-"+g;e.id=v,m.addClass("marky-toolbar",v);var y=(0,r.default)(o.Element);y.init("div","Dialogs"),y.addClass("marky-dialogs",v);var k=(0,r.default)(o.Element);k.init("textarea","Marky Marked Editor"),k.addClass("marky-editor",v);var b=(0,r.default)(s.Marky);b.init(e,k.element),k.assign("_marky",b),n.push(b);var x=(0,r.default)(a.HeadingDialog);x.init("Heading Dialog",v),x.element.style.visibility="hidden",x.options.forEach(function(e){e.listen("click",function(e){e.preventDefault();var t=parseInt(e.target.value);k.element.focus(),x.removeClass("toggled"),x.element.style.visibility="hidden",k.element._marky.heading(t,[k.element.selectionStart,k.element.selectionEnd])})});var _=(0,r.default)(a.LinkDialog);_.init("Link Dialog",v),_.element.style.visibility="hidden",_.linkForm.listen("submit",h),_.insertButton.listen("click",function(e){e.preventDefault(),k.element.focus();var t=_.linkUrlInput.element.value?_.linkUrlInput.element.value:"http://url.com",n=_.linkDisplayInput.element.value?_.linkDisplayInput.element.value:t;_.linkUrlInput.element.value="",_.linkDisplayInput.element.value="",_.element.style.visibility="hidden",_.removeClass("toggled"),k.element._marky.link([k.element.selectionStart,k.element.selectionEnd],t,n)});var E=(0,r.default)(a.ImageDialog);E.init("Image Dialog",v),E.element.style.visibility="hidden",E.imageForm.listen("submit",h),E.insertButton.listen("click",function(e){e.preventDefault(),k.element.focus();var t=E.imageSourceInput.element.value?E.imageSourceInput.element.value:"http://imagesource.com/image.jpg",n=E.imageAltInput.element.value?E.imageAltInput.element.value:t;E.imageSourceInput.element.value="",E.imageAltInput.element.value="",E.element.style.visibility="hidden",E.removeClass("toggled"),k.element._marky.image([k.element.selectionStart,k.element.selectionEnd],t,n)});var w=(0,r.default)(l.Button);w.init("Heading",v,"fa","fa-header"),w.dialog=x.element,w.listen("click",function(e){if(e.preventDefault(),e.currentTarget.blur(),w.dialog.classList.toggle("toggled"),E.element.style.visibility="hidden",E.removeClass("toggled"),_.element.style.visibility="hidden",_.removeClass("toggled"),"hidden"===w.dialog.style.visibility)return void(w.dialog.style.visibility="visible");w.dialog.style.visibility="hidden"});var S=(0,r.default)(l.Button);S.init("Bold",v,"fa","fa-bold"),S.listen("mousedown",p),S.listen("mouseup",f),S.listen("click",function(e){e.preventDefault(),k.element.focus(),k.element._marky.bold([k.element.selectionStart,k.element.selectionEnd])});var T=(0,r.default)(l.Button);T.init("Italic",v,"fa","fa-italic"),T.listen("mousedown",p),T.listen("mouseup",f),T.listen("click",function(e){e.preventDefault(),k.element.focus(),k.element._marky.italic([k.element.selectionStart,k.element.selectionEnd])});var I=(0,r.default)(l.Button);I.init("Strikethrough",v,"fa","fa-strikethrough"),I.listen("mousedown",p),I.listen("mouseup",f),I.listen("click",function(e){e.preventDefault(),k.element.focus(),k.element._marky.strikethrough([k.element.selectionStart,k.element.selectionEnd])});var L=(0,r.default)(l.Button);L.init("Code",v,"fa","fa-code"),L.listen("mousedown",p),L.listen("mouseup",f),L.listen("click",function(e){e.preventDefault(),k.element.focus(),k.element._marky.code([k.element.selectionStart,k.element.selectionEnd])});var O=(0,r.default)(l.Button);O.init("Blockquote",v,"fa","fa-quote-right"),O.listen("mousedown",p),O.listen("mouseup",f),O.listen("click",function(e){e.preventDefault(),k.element.focus(),k.element._marky.blockquote([k.element.selectionStart,k.element.selectionEnd])});var C=(0,r.default)(l.Button);C.init("Link",v,"fa","fa-link"),C.dialog=_.element,C.listen("mousedown",p),C.listen("mouseup",f),C.listen("click",function(e){if(e.preventDefault(),k.element.focus(),C.dialog.classList.toggle("toggled"),E.element.style.visibility="hidden",E.removeClass("toggled"),x.element.style.visibility="hidden",x.removeClass("toggled"),"hidden"===C.dialog.style.visibility)return C.dialog.children[0].children[1].value=k.element.value.substring(k.element.selectionStart,k.element.selectionEnd),void(C.dialog.style.visibility="visible");C.dialog.style.visibility="hidden"});var j=(0,r.default)(l.Button);j.init("Image",v,"fa","fa-file-image-o"),j.dialog=E.element,j.listen("mousedown",p),j.listen("mouseup",f),j.listen("click",function(e){if(e.preventDefault(),k.element.focus(),j.dialog.classList.toggle("toggled"),_.element.style.visibility="hidden",_.removeClass("toggled"),x.element.style.visibility="hidden",x.removeClass("toggled"),"hidden"===j.dialog.style.visibility)return j.dialog.children[0].children[1].value=k.element.value.substring(k.element.selectionStart,k.element.selectionEnd),void(j.dialog.style.visibility="visible");j.dialog.style.visibility="hidden"});var M=(0,r.default)(l.Button);M.init("Unordered List",v,"fa","fa-list-ul"),M.listen("mousedown",p),M.listen("mouseup",f),M.listen("click",function(e){e.preventDefault(),k.element.focus(),k.element._marky.unorderedList([k.element.selectionStart,k.element.selectionEnd])});var A=(0,r.default)(l.Button);A.init("Ordered List",v,"fa","fa-list-ol"),A.listen("mousedown",p),A.listen("mouseup",f),A.listen("click",function(e){e.preventDefault(),k.element.focus(),k.element._marky.orderedList([k.element.selectionStart,k.element.selectionEnd])});var D=(0,r.default)(l.Button);D.init("Outdent",v,"fa","fa-outdent"),D.listen("mousedown",p),D.listen("mouseup",f),D.listen("click",function(e){e.preventDefault(),k.element.focus(),k.element._marky.outdent([k.element.selectionStart,k.element.selectionEnd])});var $=(0,r.default)(l.Button);$.init("Indent",v,"fa","fa-indent"),$.listen("mousedown",p),$.listen("mouseup",f),$.listen("click",function(e){e.preventDefault(),k.element.focus(),k.element._marky.indent([k.element.selectionStart,k.element.selectionEnd])});var P=(0,r.default)(l.Button);P.init("Undo",v,"fa","fa-backward"),P.listen("mousedown",p),P.listen("mouseup",f),P.listen("click",function(e){e.preventDefault(),P.element.classList.contains("disabled")||(k.element.focus(),k.element._marky.undo(1,k.element._marky.state,k.element._marky.index))});var B=(0,r.default)(l.Button);B.init("Redo",v,"fa","fa-forward"),B.listen("mousedown",p),B.listen("mouseup",f),B.listen("click",function(e){e.preventDefault(),B.element.classList.contains("disabled")||(k.element.focus(),k.element._marky.redo(1,k.element._marky.state,k.element._marky.index))});var H=(0,r.default)(l.Button);H.init("Expand",v,"fa","fa-expand"),H.listen("click",function(t){t.preventDefault(),t.currentTarget.blur(),t.currentTarget.classList.toggle("marky-expanded"),e.classList.toggle("marky-expanded"),k.element.classList.toggle("marky-expanded"),H.icon.element.classList.toggle("fa-expand"),H.icon.element.classList.toggle("fa-compress")});var F=(0,r.default)(u.Separator);F.init();var q=(0,r.default)(u.Separator);q.init();var R=(0,r.default)(u.Separator);R.init();var U=(0,r.default)(u.Separator);U.init();var z=(0,r.default)(u.Separator);z.init(),m.appendTo(e),k.appendTo(e),w.appendTo(m.element),F.appendTo(m.element),S.appendTo(m.element),T.appendTo(m.element),I.appendTo(m.element),L.appendTo(m.element),O.appendTo(m.element),q.appendTo(m.element),C.appendTo(m.element),j.appendTo(m.element),R.appendTo(m.element),M.appendTo(m.element),A.appendTo(m.element),D.appendTo(m.element),$.appendTo(m.element),U.appendTo(m.element),P.appendTo(m.element),B.appendTo(m.element),z.appendTo(m.element),H.appendTo(m.element),y.appendTo(m.element),_.appendTo(y.element),E.appendTo(y.element),x.appendTo(y.element);var N=[],Z=[46,44,63,33,58,59,47,92,38,124,32],W=0,G={markyupdate:function(e){e.currentTarget._marky.update(e.currentTarget.value,[e.currentTarget.selectionStart,e.currentTarget.selectionEnd],e.currentTarget._marky.state,e.currentTarget._marky.index)},markychange:function(e){var t=e.currentTarget._marky.state[e.currentTarget._marky.index].markdown,n=e.currentTarget._marky.state[e.currentTarget._marky.index].html;0===e.currentTarget._marky.index?P.addClass("disabled"):P.removeClass("disabled"),e.currentTarget._marky.index===e.currentTarget._marky.state.length-1?B.addClass("disabled"):B.removeClass("disabled"),e.currentTarget._marky.updateMarkdown(t),e.currentTarget._marky.updateHTML(n)},input:function(e){window.clearTimeout(d),d=window.setTimeout(function(){e.target.dispatchEvent(c.markyupdate)},1e3)},change:function(e){e.currentTarget.dispatchEvent(c.markyupdate)},paste:function(e){setTimeout(function(){e.currentTarget.dispatchEvent(c.markyupdate)},0)},cut:function(e){setTimeout(function(){e.currentTarget.dispatchEvent(c.markyupdate)},0)},keydown:function(e){8===e.which&&(W=e.currentTarget.selectionEnd-e.currentTarget.selectionStart)},keypress:function(e){N.push(e.which),N.length>2&&N.shift(),Z.forEach(function(t){return 32===e.which&&N[0]===t?window.clearTimeout(d):e.which===t?(window.clearTimeout(d),e.currentTarget.dispatchEvent(c.markyupdate)):void 0})},keyup:function(e){8===e.which&&W>0&&(window.clearTimeout(d),W=0,e.currentTarget.dispatchEvent(c.markyupdate))},click:function(){E.element.style.visibility="hidden",E.removeClass("toggled"),_.element.style.visibility="hidden",_.removeClass("toggled"),x.element.style.visibility="hidden",x.removeClass("toggled")},select:function(e){e.currentTarget.dispatchEvent(c.markyselect)},blur:function(e){e.currentTarget.dispatchEvent(c.markyblur)},focus:function(e){e.currentTarget.dispatchEvent(c.markyfocus)}};k.listen("markyupdate",G.markyupdate),k.listen("markychange",G.markychange),k.listen("input",G.input),k.listen("change",G.change),k.listen("paste",G.paste),k.listen("cut",G.cut),k.listen("keydown",G.keydown),k.listen("keypress",G.keypress),k.listen("keyup",G.keypress),k.listen("click",G.click),k.listen("select",G.select),k.listen("blur",G.blur),k.listen("focus",G.focus),b.listeners=G}),n};var s=n(18),o=n(2),l=n(34),a=n(35),u=n(37),c=n(19),d=void 0},function(e,t,n){"use strict";function i(e,t,n){var i=null!==n?e.substring(n):e,r=i.match(t);return r?i.indexOf(r[0])+n:-1}function r(e,t,n){var i=null!==n?e.substring(n):e,r=i.match(t),s=[];return r.forEach(function(e,t){var r=s?s[t-1]:null;s.push(i.indexOf(e,r+1)+n)}),s||-1}function s(e,t,n){var i=null!==n?e.substring(0,n):e,r=i.match(t);return r?i.lastIndexOf(r[r.length-1]):-1}function o(e,t){return(t?e.substring(0,t):e).split(/\r\n|\r|\n/)}function l(e,t){return(t?e.substring(t):e).split(/\r\n|\r|\n/)}function a(e){return s(e,/^.*/gm,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}function u(e){return i(e,/(\r|\n|$)/gm,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}Object.defineProperty(t,"__esModule",{value:!0}),t.indexOfMatch=i,t.indicesOfMatches=r,t.lastIndexOfMatch=s,t.splitLinesBackward=o,t.splitLines=l,t.startOfLine=a,t.endOfLine=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){e=e.slice(0,t+1);var i=n();return e.push(i),t++,t>999&&(e.shift(),t--),{state:e,index:t}}},function(e,t,n){e.exports={default:n(45),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(43),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,r.default)(e)}},function(e,t,n){n(71),n(69),e.exports=n(5).Array.from},function(e,t,n){n(70);var i=n(5).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var i=n(28),r=n(29),s=n(66);e.exports=function(e){return function(t,n,o){var l,a=i(t),u=r(a.length),c=s(o,u);if(e&&n!=n){for(;u>c;)if((l=a[c++])!=l)return!0}else for(;u>c;c++)if((e||c in a)&&a[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var i=n(20),r=n(1)("toStringTag"),s="Arguments"==i(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=o(t=Object(e),r))?n:s?i(t):"Object"==(l=i(t))&&"function"==typeof t.callee?"Arguments":l}},function(e,t,n){"use strict";var i=n(9),r=n(14);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},function(e,t,n){e.exports=n(3).document&&document.documentElement},function(e,t,n){e.exports=!n(6)&&!n(24)(function(){return 7!=Object.defineProperty(n(22)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(20);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t,n){var i=n(13),r=n(1)("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[r]===e)}},function(e,t,n){var i=n(4);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){var s=e.return;throw void 0!==s&&i(s.call(e)),t}}},function(e,t,n){"use strict";var i=n(25),r=n(14),s=n(26),o={};n(8)(o,n(1)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(o,{next:r(1,n)}),s(e,t+" Iterator")}},function(e,t,n){"use strict";var i=n(59),r=n(11),s=n(64),o=n(8),l=n(7),a=n(13),u=n(56),c=n(26),d=n(61),h=n(1)("iterator"),p=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,t,n,g,m,v,y){u(n,t,g);var k,b,x,_=function(e){if(!p&&e in T)return T[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",w="values"==m,S=!1,T=e.prototype,I=T[h]||T["@@iterator"]||m&&T[m],L=I||_(m),O=m?w?_("entries"):L:void 0,C="Array"==t?T.entries||I:I;if(C&&(x=d(C.call(new e)))!==Object.prototype&&(c(x,E,!0),i||l(x,h)||o(x,h,f)),w&&I&&"values"!==I.name&&(S=!0,L=function(){return I.call(this)}),i&&!y||!p&&!S&&T[h]||o(T,h,L),a[t]=L,a[E]=f,m)if(k={values:w?L:_("values"),keys:v?L:_("keys"),entries:O},y)for(b in k)b in T||s(T,b,k[b]);else r(r.P+r.F*(p||S),t,k);return k}},function(e,t,n){var i=n(1)("iterator"),r=!1;try{var s=[7][i]();s.return=function(){r=!0},Array.from(s,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var s=[7],o=s[i]();o.next=function(){return{done:n=!0}},s[i]=function(){return o},e(s)}catch(e){}return n}},function(e,t){e.exports=!0},function(e,t,n){var i=n(9),r=n(4),s=n(63);e.exports=n(6)?Object.defineProperties:function(e,t){r(e);for(var n,o=s(t),l=o.length,a=0;l>a;)i.f(e,n=o[a++],t[n]);return e}},function(e,t,n){var i=n(7),r=n(30),s=n(15)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,n){var i=n(7),r=n(28),s=n(48)(!1),o=n(15)("IE_PROTO");e.exports=function(e,t){var n,l=r(e),a=0,u=[];for(n in l)n!=o&&i(l,n)&&u.push(n);for(;t.length>a;)i(l,n=t[a++])&&(~s(u,n)||u.push(n));return u}},function(e,t,n){var i=n(62),r=n(23);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){e.exports=n(8)},function(e,t,n){var i=n(16),r=n(10);e.exports=function(e){return function(t,n){var s,o,l=String(r(t)),a=i(n),u=l.length;return a<0||a>=u?e?"":void 0:(s=l.charCodeAt(a),s<55296||s>56319||a+1===u||(o=l.charCodeAt(a+1))<56320||o>57343?e?l.charAt(a):s:e?l.slice(a,a+2):o-56320+(s-55296<<10)+65536)}}},function(e,t,n){var i=n(16),r=Math.max,s=Math.min;e.exports=function(e,t){return e=i(e),e<0?r(e+t,0):s(e,t)}},function(e,t,n){var i=n(12);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(49),r=n(1)("iterator"),s=n(13);e.exports=n(5).getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||s[i(e)]}},function(e,t,n){"use strict";var i=n(21),r=n(11),s=n(30),o=n(55),l=n(54),a=n(29),u=n(50),c=n(68);r(r.S+r.F*!n(58)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,d,h=s(e),p="function"==typeof this?this:Array,f=arguments.length,g=f>1?arguments[1]:void 0,m=void 0!==g,v=0,y=c(h);if(m&&(g=i(g,f>2?arguments[2]:void 0,2)),void 0==y||p==Array&&l(y))for(t=a(h.length),n=new p(t);t>v;v++)u(n,v,m?g(h[v],v):h[v]);else for(d=y.call(h),n=new p;!(r=d.next()).done;v++)u(n,v,m?o(d,g,[r.value,v],!0):r.value);return n.length=v,n}})},function(e,t,n){var i=n(11);i(i.S,"Object",{create:n(25)})},function(e,t,n){"use strict";var i=n(65)(!0);n(57)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){(function(t){(function(){function t(e){this.tokens=[],this.tokens.links={},this.options=e||c.defaults,this.rules=d.normal,this.options.gfm&&(this.options.tables?this.rules=d.tables:this.rules=d.gfm)}function n(e,t){if(this.options=t||c.defaults,this.links=e,this.rules=h.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=h.breaks:this.rules=h.gfm:this.options.pedantic&&(this.rules=h.pedantic)}function i(e){this.options=e||{}}function r(e){this.tokens=[],this.token=null,this.options=e||c.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options}function s(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function l(e,t){return e=e.source,t=t||"",function n(i,r){return i?(r=r.source||r,r=r.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(i,r),n):new RegExp(e,t)}}function a(){}function u(e){for(var t,n,i=1;i<arguments.length;i++){t=arguments[i];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}function c(e,n,i){if(i||"function"==typeof n){i||(i=n,n=null),n=u({},c.defaults,n||{});var o,l,a=n.highlight,d=0;try{o=t.lex(e,n)}catch(e){return i(e)}l=o.length;var h=function(e){if(e)return n.highlight=a,i(e);var t;try{t=r.parse(o,n)}catch(t){e=t}return n.highlight=a,e?i(e):i(null,t)};if(!a||a.length<3)return h();if(delete n.highlight,!l)return h();for(;d<o.length;d++)!function(e){"code"!==e.type?--l||h():a(e.text,e.lang,function(t,n){return t?h(t):null==n||n===e.text?--l||h():(e.text=n,e.escaped=!0,void(--l||h()))})}(o[d])}else try{return n&&(n=u({},c.defaults,n)),r.parse(t.lex(e,n),n)}catch(e){if(e.message+="\nPlease report this to https://github.com/chjj/marked.",(n||c.defaults).silent)return"<p>An error occured:</p><pre>"+s(e.message+"",!0)+"</pre>";throw e}}var d={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:a,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:a,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:a,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};d.bullet=/(?:[*+-]|\d+\.)/,d.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,d.item=l(d.item,"gm")(/bull/g,d.bullet)(),d.list=l(d.list)(/bull/g,d.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+d.def.source+")")(),d.blockquote=l(d.blockquote)("def",d.def)(),d._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",d.html=l(d.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,d._tag)(),d.paragraph=l(d.paragraph)("hr",d.hr)("heading",d.heading)("lheading",d.lheading)("blockquote",d.blockquote)("tag","<"+d._tag)("def",d.def)(),d.normal=u({},d),d.gfm=u({},d.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),d.gfm.paragraph=l(d.paragraph)("(?!","(?!"+d.gfm.fences.source.replace("\\1","\\2")+"|"+d.list.source.replace("\\1","\\3")+"|")(),d.tables=u({},d.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=d,t.lex=function(e,n){return new t(n).lex(e)},t.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},t.prototype.token=function(e,t,n){for(var i,r,s,o,l,a,u,c,h,e=e.replace(/^ +$/gm,"");e;)if((s=this.rules.newline.exec(e))&&(e=e.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(e))e=e.substring(s[0].length),s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?s:s.replace(/\n+$/,"")});else if(s=this.rules.fences.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"code",lang:s[2],text:s[3]||""});else if(s=this.rules.heading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if(t&&(s=this.rules.nptable.exec(e))){for(e=e.substring(s[0].length),a={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/\n$/,"").split("\n")},c=0;c<a.align.length;c++)/^ *-+: *$/.test(a.align[c])?a.align[c]="right":/^ *:-+: *$/.test(a.align[c])?a.align[c]="center":/^ *:-+ *$/.test(a.align[c])?a.align[c]="left":a.align[c]=null;for(c=0;c<a.cells.length;c++)a.cells[c]=a.cells[c].split(/ *\| */);this.tokens.push(a)}else if(s=this.rules.lheading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2]?1:2,text:s[1]});else if(s=this.rules.hr.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,t,!0),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(e)){for(e=e.substring(s[0].length),o=s[2],this.tokens.push({type:"list_start",ordered:o.length>1}),s=s[0].match(this.rules.item),i=!1,h=s.length,c=0;c<h;c++)a=s[c],u=a.length,a=a.replace(/^ *([*+-]|\d+\.) +/,""),~a.indexOf("\n ")&&(u-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&c!==h-1&&(l=d.bullet.exec(s[c+1])[0],o===l||o.length>1&&l.length>1||(e=s.slice(c+1).join("\n")+e,c=h-1)),r=i||/\n\n(?!\s*$)/.test(a),c!==h-1&&(i="\n"===a.charAt(a.length-1),r||(r=i)),this.tokens.push({type:r?"loose_item_start":"list_item_start"}),this.token(a,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(e))e=e.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:s[0]});else if(!n&&t&&(s=this.rules.def.exec(e)))e=e.substring(s[0].length),this.tokens.links[s[1].toLowerCase()]={href:s[2],title:s[3]};else if(t&&(s=this.rules.table.exec(e))){for(e=e.substring(s[0].length),a={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/(?: *\| *)?\n$/,"").split("\n")},c=0;c<a.align.length;c++)/^ *-+: *$/.test(a.align[c])?a.align[c]="right":/^ *:-+: *$/.test(a.align[c])?a.align[c]="center":/^ *:-+ *$/.test(a.align[c])?a.align[c]="left":a.align[c]=null;for(c=0;c<a.cells.length;c++)a.cells[c]=a.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(a)}else if(t&&(s=this.rules.paragraph.exec(e)))e=e.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var h={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:a,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:a,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};h._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,h._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,h.link=l(h.link)("inside",h._inside)("href",h._href)(),h.reflink=l(h.reflink)("inside",h._inside)(),h.normal=u({},h),h.pedantic=u({},h.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),h.gfm=u({},h.normal,{escape:l(h.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:l(h.text)("]|","~]|")("|","|https?://|")()}),h.breaks=u({},h.gfm,{br:l(h.br)("{2,}","*")(),text:l(h.gfm.text)("{2,}","*")()}),n.rules=h,n.output=function(e,t,i){return new n(t,i).output(e)},n.prototype.output=function(e){for(var t,n,i,r,o="";e;)if(r=this.rules.escape.exec(e))e=e.substring(r[0].length),o+=r[1];else if(r=this.rules.autolink.exec(e))e=e.substring(r[0].length),"@"===r[2]?(n=":"===r[1].charAt(6)?this.mangle(r[1].substring(7)):this.mangle(r[1]),i=this.mangle("mailto:")+n):(n=s(r[1]),i=n),o+=this.renderer.link(i,null,n);else if(this.inLink||!(r=this.rules.url.exec(e))){if(r=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(r[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(r[0])&&(this.inLink=!1),e=e.substring(r[0].length),o+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):s(r[0]):r[0];else if(r=this.rules.link.exec(e))e=e.substring(r[0].length),this.inLink=!0,o+=this.outputLink(r,{href:r[2],title:r[3]}),this.inLink=!1;else if((r=this.rules.reflink.exec(e))||(r=this.rules.nolink.exec(e))){if(e=e.substring(r[0].length),t=(r[2]||r[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){o+=r[0].charAt(0),e=r[0].substring(1)+e;continue}this.inLink=!0,o+=this.outputLink(r,t),this.inLink=!1}else if(r=this.rules.strong.exec(e))e=e.substring(r[0].length),o+=this.renderer.strong(this.output(r[2]||r[1]));else if(r=this.rules.em.exec(e))e=e.substring(r[0].length),o+=this.renderer.em(this.output(r[2]||r[1]));else if(r=this.rules.code.exec(e))e=e.substring(r[0].length),o+=this.renderer.codespan(s(r[2],!0));else if(r=this.rules.br.exec(e))e=e.substring(r[0].length),o+=this.renderer.br();else if(r=this.rules.del.exec(e))e=e.substring(r[0].length),o+=this.renderer.del(this.output(r[1]));else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),o+=this.renderer.text(s(this.smartypants(r[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(r[0].length),n=s(r[1]),i=n,o+=this.renderer.link(i,null,n);return o},n.prototype.outputLink=function(e,t){var n=s(t.href),i=t.title?s(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,i,this.output(e[1])):this.renderer.image(n,i,s(e[1]))},n.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},n.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",i=e.length,r=0;r<i;r++)t=e.charCodeAt(r),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},i.prototype.code=function(e,t,n){if(this.options.highlight){var i=this.options.highlight(e,t);null!=i&&i!==e&&(n=!0,e=i)}return t?'<pre><code class="'+this.options.langPrefix+s(t,!0)+'">'+(n?e:s(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:s(e,!0))+"\n</code></pre>"},i.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},i.prototype.html=function(e){return e},i.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},i.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},i.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},i.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},i.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},i.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},i.prototype.strong=function(e){return"<strong>"+e+"</strong>"},i.prototype.em=function(e){return"<em>"+e+"</em>"},i.prototype.codespan=function(e){return"<code>"+e+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(e){return"<del>"+e+"</del>"},i.prototype.link=function(e,t,n){if(this.options.sanitize){try{var i=decodeURIComponent(o(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:"))return""}var r='<a href="'+e+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>"},i.prototype.image=function(e,t,n){var i='<img src="'+e+'" alt="'+n+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">"},i.prototype.text=function(e){return e},r.parse=function(e,t,n){return new r(t,n).parse(e)},r.prototype.parse=function(e){this.inline=new n(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},r.prototype.next=function(){return this.token=this.tokens.pop()},r.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},r.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},r.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,i,r="",s="";for(n="",e=0;e<this.token.header.length;e++)({header:!0,align:this.token.align[e]}),n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(r+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",i=0;i<t.length;i++)n+=this.renderer.tablecell(this.inline.output(t[i]),{header:!1,align:this.token.align[i]});s+=this.renderer.tablerow(n)}return this.renderer.table(r,s);case"blockquote_start":for(var s="";"blockquote_end"!==this.next().type;)s+=this.tok();return this.renderer.blockquote(s);case"list_start":for(var s="",o=this.token.ordered;"list_end"!==this.next().type;)s+=this.tok();return this.renderer.list(s,o);case"list_item_start":for(var s="";"list_item_end"!==this.next().type;)s+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(s);case"loose_item_start":for(var s="";"list_item_end"!==this.next().type;)s+=this.tok();return this.renderer.listitem(s);case"html":var l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},a.exec=a,c.options=c.setOptions=function(e){return u(c.defaults,e),c},c.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new i,xhtml:!1},c.Parser=r,c.parser=r.parse,c.Renderer=i,c.Lexer=t,c.lexer=t.lex,c.InlineLexer=n,c.inlineLexer=n.output,c.parse=c,e.exports=c}).call(function(){return this||("undefined"!=typeof window?window:t)}())}).call(t,n(73))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){e.exports=n(32)}])});