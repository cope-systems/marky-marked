{"version":3,"sources":["node_modules/browser-pack/_prelude.js","index.js","node_modules/marked/lib/marked.js","src/marky.js","src/modules/Buttons.js","src/modules/Dialogs.js","src/modules/Element.js","src/modules/ListItems.js","src/modules/Marky.js","src/modules/custom-events.js","src/modules/dispatcher.js","src/modules/handlers.js","src/modules/mark.js","src/modules/operation.js","src/modules/prototypes.js"],"names":[],"mappings":"AAAA;ACAA;;;;;;;;AAGA,OAAO,OAAP;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"marky.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nimport marky from './src/marky';\nmodule.exports = marky;\n","/**\n * marked - a markdown parser\n * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/chjj/marked\n */\n\n;(function() {\n\n/**\n * Block-Level Grammar\n */\n\nvar block = {\n  newline: /^\\n+/,\n  code: /^( {4}[^\\n]+\\n*)+/,\n  fences: noop,\n  hr: /^( *[-*_]){3,} *(?:\\n+|$)/,\n  heading: /^ *(#{1,6}) *([^\\n]+?) *#* *(?:\\n+|$)/,\n  nptable: noop,\n  lheading: /^([^\\n]+)\\n *(=|-){2,} *(?:\\n+|$)/,\n  blockquote: /^( *>[^\\n]+(\\n(?!def)[^\\n]+)*\\n*)+/,\n  list: /^( *)(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n  html: /^ *(?:comment *(?:\\n|\\s*$)|closed *(?:\\n{2,}|\\s*$)|closing *(?:\\n{2,}|\\s*$))/,\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +[\"(]([^\\n]+)[\")])? *(?:\\n+|$)/,\n  table: noop,\n  paragraph: /^((?:[^\\n]+\\n?(?!hr|heading|lheading|blockquote|tag|def))+)\\n*/,\n  text: /^[^\\n]+/\n};\n\nblock.bullet = /(?:[*+-]|\\d+\\.)/;\nblock.item = /^( *)(bull) [^\\n]*(?:\\n(?!\\1bull )[^\\n]*)*/;\nblock.item = replace(block.item, 'gm')\n  (/bull/g, block.bullet)\n  ();\n\nblock.list = replace(block.list)\n  (/bull/g, block.bullet)\n  ('hr', '\\\\n+(?=\\\\1?(?:[-*_] *){3,}(?:\\\\n+|$))')\n  ('def', '\\\\n+(?=' + block.def.source + ')')\n  ();\n\nblock.blockquote = replace(block.blockquote)\n  ('def', block.def)\n  ();\n\nblock._tag = '(?!(?:'\n  + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code'\n  + '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo'\n  + '|span|br|wbr|ins|del|img)\\\\b)\\\\w+(?!:/|[^\\\\w\\\\s@]*@)\\\\b';\n\nblock.html = replace(block.html)\n  ('comment', /<!--[\\s\\S]*?-->/)\n  ('closed', /<(tag)[\\s\\S]+?<\\/\\1>/)\n  ('closing', /<tag(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/)\n  (/tag/g, block._tag)\n  ();\n\nblock.paragraph = replace(block.paragraph)\n  ('hr', block.hr)\n  ('heading', block.heading)\n  ('lheading', block.lheading)\n  ('blockquote', block.blockquote)\n  ('tag', '<' + block._tag)\n  ('def', block.def)\n  ();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = merge({}, block);\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = merge({}, block.normal, {\n  fences: /^ *(`{3,}|~{3,})[ \\.]*(\\S+)? *\\n([\\s\\S]*?)\\s*\\1 *(?:\\n+|$)/,\n  paragraph: /^/,\n  heading: /^ *(#{1,6}) +([^\\n]+?) *#* *(?:\\n+|$)/\n});\n\nblock.gfm.paragraph = replace(block.paragraph)\n  ('(?!', '(?!'\n    + block.gfm.fences.source.replace('\\\\1', '\\\\2') + '|'\n    + block.list.source.replace('\\\\1', '\\\\3') + '|')\n  ();\n\n/**\n * GFM + Tables Block Grammar\n */\n\nblock.tables = merge({}, block.gfm, {\n  nptable: /^ *(\\S.*\\|.*)\\n *([-:]+ *\\|[-| :]*)\\n((?:.*\\|.*(?:\\n|$))*)\\n*/,\n  table: /^ *\\|(.+)\\n *\\|( *[-:]+[-| :]*)\\n((?: *\\|.*(?:\\n|$))*)\\n*/\n});\n\n/**\n * Block Lexer\n */\n\nfunction Lexer(options) {\n  this.tokens = [];\n  this.tokens.links = {};\n  this.options = options || marked.defaults;\n  this.rules = block.normal;\n\n  if (this.options.gfm) {\n    if (this.options.tables) {\n      this.rules = block.tables;\n    } else {\n      this.rules = block.gfm;\n    }\n  }\n}\n\n/**\n * Expose Block Rules\n */\n\nLexer.rules = block;\n\n/**\n * Static Lex Method\n */\n\nLexer.lex = function(src, options) {\n  var lexer = new Lexer(options);\n  return lexer.lex(src);\n};\n\n/**\n * Preprocessing\n */\n\nLexer.prototype.lex = function(src) {\n  src = src\n    .replace(/\\r\\n|\\r/g, '\\n')\n    .replace(/\\t/g, '    ')\n    .replace(/\\u00a0/g, ' ')\n    .replace(/\\u2424/g, '\\n');\n\n  return this.token(src, true);\n};\n\n/**\n * Lexing\n */\n\nLexer.prototype.token = function(src, top, bq) {\n  var src = src.replace(/^ +$/gm, '')\n    , next\n    , loose\n    , cap\n    , bull\n    , b\n    , item\n    , space\n    , i\n    , l;\n\n  while (src) {\n    // newline\n    if (cap = this.rules.newline.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[0].length > 1) {\n        this.tokens.push({\n          type: 'space'\n        });\n      }\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      cap = cap[0].replace(/^ {4}/gm, '');\n      this.tokens.push({\n        type: 'code',\n        text: !this.options.pedantic\n          ? cap.replace(/\\n+$/, '')\n          : cap\n      });\n      continue;\n    }\n\n    // fences (gfm)\n    if (cap = this.rules.fences.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'code',\n        lang: cap[2],\n        text: cap[3] || ''\n      });\n      continue;\n    }\n\n    // heading\n    if (cap = this.rules.heading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[1].length,\n        text: cap[2]\n      });\n      continue;\n    }\n\n    // table no leading pipe (gfm)\n    if (top && (cap = this.rules.nptable.exec(src))) {\n      src = src.substring(cap[0].length);\n\n      item = {\n        type: 'table',\n        header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3].replace(/\\n$/, '').split('\\n')\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = 'right';\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = 'center';\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = 'left';\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = item.cells[i].split(/ *\\| */);\n      }\n\n      this.tokens.push(item);\n\n      continue;\n    }\n\n    // lheading\n    if (cap = this.rules.lheading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[2] === '=' ? 1 : 2,\n        text: cap[1]\n      });\n      continue;\n    }\n\n    // hr\n    if (cap = this.rules.hr.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'hr'\n      });\n      continue;\n    }\n\n    // blockquote\n    if (cap = this.rules.blockquote.exec(src)) {\n      src = src.substring(cap[0].length);\n\n      this.tokens.push({\n        type: 'blockquote_start'\n      });\n\n      cap = cap[0].replace(/^ *> ?/gm, '');\n\n      // Pass `top` to keep the current\n      // \"toplevel\" state. This is exactly\n      // how markdown.pl works.\n      this.token(cap, top, true);\n\n      this.tokens.push({\n        type: 'blockquote_end'\n      });\n\n      continue;\n    }\n\n    // list\n    if (cap = this.rules.list.exec(src)) {\n      src = src.substring(cap[0].length);\n      bull = cap[2];\n\n      this.tokens.push({\n        type: 'list_start',\n        ordered: bull.length > 1\n      });\n\n      // Get each top-level item.\n      cap = cap[0].match(this.rules.item);\n\n      next = false;\n      l = cap.length;\n      i = 0;\n\n      for (; i < l; i++) {\n        item = cap[i];\n\n        // Remove the list item's bullet\n        // so it is seen as the next token.\n        space = item.length;\n        item = item.replace(/^ *([*+-]|\\d+\\.) +/, '');\n\n        // Outdent whatever the\n        // list item contains. Hacky.\n        if (~item.indexOf('\\n ')) {\n          space -= item.length;\n          item = !this.options.pedantic\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n            : item.replace(/^ {1,4}/gm, '');\n        }\n\n        // Determine whether the next list item belongs here.\n        // Backpedal if it does not belong in this list.\n        if (this.options.smartLists && i !== l - 1) {\n          b = block.bullet.exec(cap[i + 1])[0];\n          if (bull !== b && !(bull.length > 1 && b.length > 1)) {\n            src = cap.slice(i + 1).join('\\n') + src;\n            i = l - 1;\n          }\n        }\n\n        // Determine whether item is loose or not.\n        // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n        // for discount behavior.\n        loose = next || /\\n\\n(?!\\s*$)/.test(item);\n        if (i !== l - 1) {\n          next = item.charAt(item.length - 1) === '\\n';\n          if (!loose) loose = next;\n        }\n\n        this.tokens.push({\n          type: loose\n            ? 'loose_item_start'\n            : 'list_item_start'\n        });\n\n        // Recurse.\n        this.token(item, false, bq);\n\n        this.tokens.push({\n          type: 'list_item_end'\n        });\n      }\n\n      this.tokens.push({\n        type: 'list_end'\n      });\n\n      continue;\n    }\n\n    // html\n    if (cap = this.rules.html.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: this.options.sanitize\n          ? 'paragraph'\n          : 'html',\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: cap[0]\n      });\n      continue;\n    }\n\n    // def\n    if ((!bq && top) && (cap = this.rules.def.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.links[cap[1].toLowerCase()] = {\n        href: cap[2],\n        title: cap[3]\n      };\n      continue;\n    }\n\n    // table (gfm)\n    if (top && (cap = this.rules.table.exec(src))) {\n      src = src.substring(cap[0].length);\n\n      item = {\n        type: 'table',\n        header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3].replace(/(?: *\\| *)?\\n$/, '').split('\\n')\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = 'right';\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = 'center';\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = 'left';\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = item.cells[i]\n          .replace(/^ *\\| *| *\\| *$/g, '')\n          .split(/ *\\| */);\n      }\n\n      this.tokens.push(item);\n\n      continue;\n    }\n\n    // top-level paragraph\n    if (top && (cap = this.rules.paragraph.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'paragraph',\n        text: cap[1].charAt(cap[1].length - 1) === '\\n'\n          ? cap[1].slice(0, -1)\n          : cap[1]\n      });\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      // Top-level should never reach here.\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'text',\n        text: cap[0]\n      });\n      continue;\n    }\n\n    if (src) {\n      throw new\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return this.tokens;\n};\n\n/**\n * Inline-Level Grammar\n */\n\nvar inline = {\n  escape: /^\\\\([\\\\`*{}\\[\\]()#+\\-.!_>])/,\n  autolink: /^<([^ >]+(@|:\\/)[^ >]+)>/,\n  url: noop,\n  tag: /^<!--[\\s\\S]*?-->|^<\\/?\\w+(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/,\n  link: /^!?\\[(inside)\\]\\(href\\)/,\n  reflink: /^!?\\[(inside)\\]\\s*\\[([^\\]]*)\\]/,\n  nolink: /^!?\\[((?:\\[[^\\]]*\\]|[^\\[\\]])*)\\]/,\n  strong: /^__([\\s\\S]+?)__(?!_)|^\\*\\*([\\s\\S]+?)\\*\\*(?!\\*)/,\n  em: /^\\b_((?:[^_]|__)+?)_\\b|^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/,\n  code: /^(`+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/,\n  br: /^ {2,}\\n(?!\\s*$)/,\n  del: noop,\n  text: /^[\\s\\S]+?(?=[\\\\<!\\[_*`]| {2,}\\n|$)/\n};\n\ninline._inside = /(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*/;\ninline._href = /\\s*<?([\\s\\S]*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*/;\n\ninline.link = replace(inline.link)\n  ('inside', inline._inside)\n  ('href', inline._href)\n  ();\n\ninline.reflink = replace(inline.reflink)\n  ('inside', inline._inside)\n  ();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = merge({}, inline);\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = merge({}, inline.normal, {\n  strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n  em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/\n});\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = merge({}, inline.normal, {\n  escape: replace(inline.escape)('])', '~|])')(),\n  url: /^(https?:\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])/,\n  del: /^~~(?=\\S)([\\s\\S]*?\\S)~~/,\n  text: replace(inline.text)\n    (']|', '~]|')\n    ('|', '|https?://|')\n    ()\n});\n\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = merge({}, inline.gfm, {\n  br: replace(inline.br)('{2,}', '*')(),\n  text: replace(inline.gfm.text)('{2,}', '*')()\n});\n\n/**\n * Inline Lexer & Compiler\n */\n\nfunction InlineLexer(links, options) {\n  this.options = options || marked.defaults;\n  this.links = links;\n  this.rules = inline.normal;\n  this.renderer = this.options.renderer || new Renderer;\n  this.renderer.options = this.options;\n\n  if (!this.links) {\n    throw new\n      Error('Tokens array requires a `links` property.');\n  }\n\n  if (this.options.gfm) {\n    if (this.options.breaks) {\n      this.rules = inline.breaks;\n    } else {\n      this.rules = inline.gfm;\n    }\n  } else if (this.options.pedantic) {\n    this.rules = inline.pedantic;\n  }\n}\n\n/**\n * Expose Inline Rules\n */\n\nInlineLexer.rules = inline;\n\n/**\n * Static Lexing/Compiling Method\n */\n\nInlineLexer.output = function(src, links, options) {\n  var inline = new InlineLexer(links, options);\n  return inline.output(src);\n};\n\n/**\n * Lexing/Compiling\n */\n\nInlineLexer.prototype.output = function(src) {\n  var out = ''\n    , link\n    , text\n    , href\n    , cap;\n\n  while (src) {\n    // escape\n    if (cap = this.rules.escape.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += cap[1];\n      continue;\n    }\n\n    // autolink\n    if (cap = this.rules.autolink.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[2] === '@') {\n        text = cap[1].charAt(6) === ':'\n          ? this.mangle(cap[1].substring(7))\n          : this.mangle(cap[1]);\n        href = this.mangle('mailto:') + text;\n      } else {\n        text = escape(cap[1]);\n        href = text;\n      }\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // url (gfm)\n    if (!this.inLink && (cap = this.rules.url.exec(src))) {\n      src = src.substring(cap[0].length);\n      text = escape(cap[1]);\n      href = text;\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // tag\n    if (cap = this.rules.tag.exec(src)) {\n      if (!this.inLink && /^<a /i.test(cap[0])) {\n        this.inLink = true;\n      } else if (this.inLink && /^<\\/a>/i.test(cap[0])) {\n        this.inLink = false;\n      }\n      src = src.substring(cap[0].length);\n      out += this.options.sanitize\n        ? this.options.sanitizer\n          ? this.options.sanitizer(cap[0])\n          : escape(cap[0])\n        : cap[0]\n      continue;\n    }\n\n    // link\n    if (cap = this.rules.link.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.inLink = true;\n      out += this.outputLink(cap, {\n        href: cap[2],\n        title: cap[3]\n      });\n      this.inLink = false;\n      continue;\n    }\n\n    // reflink, nolink\n    if ((cap = this.rules.reflink.exec(src))\n        || (cap = this.rules.nolink.exec(src))) {\n      src = src.substring(cap[0].length);\n      link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = this.links[link.toLowerCase()];\n      if (!link || !link.href) {\n        out += cap[0].charAt(0);\n        src = cap[0].substring(1) + src;\n        continue;\n      }\n      this.inLink = true;\n      out += this.outputLink(cap, link);\n      this.inLink = false;\n      continue;\n    }\n\n    // strong\n    if (cap = this.rules.strong.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.strong(this.output(cap[2] || cap[1]));\n      continue;\n    }\n\n    // em\n    if (cap = this.rules.em.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.em(this.output(cap[2] || cap[1]));\n      continue;\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.codespan(escape(cap[2], true));\n      continue;\n    }\n\n    // br\n    if (cap = this.rules.br.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.br();\n      continue;\n    }\n\n    // del (gfm)\n    if (cap = this.rules.del.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.del(this.output(cap[1]));\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.text(escape(this.smartypants(cap[0])));\n      continue;\n    }\n\n    if (src) {\n      throw new\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return out;\n};\n\n/**\n * Compile Link\n */\n\nInlineLexer.prototype.outputLink = function(cap, link) {\n  var href = escape(link.href)\n    , title = link.title ? escape(link.title) : null;\n\n  return cap[0].charAt(0) !== '!'\n    ? this.renderer.link(href, title, this.output(cap[1]))\n    : this.renderer.image(href, title, escape(cap[1]));\n};\n\n/**\n * Smartypants Transformations\n */\n\nInlineLexer.prototype.smartypants = function(text) {\n  if (!this.options.smartypants) return text;\n  return text\n    // em-dashes\n    .replace(/---/g, '\\u2014')\n    // en-dashes\n    .replace(/--/g, '\\u2013')\n    // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n    // closing singles & apostrophes\n    .replace(/'/g, '\\u2019')\n    // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n    // closing doubles\n    .replace(/\"/g, '\\u201d')\n    // ellipses\n    .replace(/\\.{3}/g, '\\u2026');\n};\n\n/**\n * Mangle Links\n */\n\nInlineLexer.prototype.mangle = function(text) {\n  if (!this.options.mangle) return text;\n  var out = ''\n    , l = text.length\n    , i = 0\n    , ch;\n\n  for (; i < l; i++) {\n    ch = text.charCodeAt(i);\n    if (Math.random() > 0.5) {\n      ch = 'x' + ch.toString(16);\n    }\n    out += '&#' + ch + ';';\n  }\n\n  return out;\n};\n\n/**\n * Renderer\n */\n\nfunction Renderer(options) {\n  this.options = options || {};\n}\n\nRenderer.prototype.code = function(code, lang, escaped) {\n  if (this.options.highlight) {\n    var out = this.options.highlight(code, lang);\n    if (out != null && out !== code) {\n      escaped = true;\n      code = out;\n    }\n  }\n\n  if (!lang) {\n    return '<pre><code>'\n      + (escaped ? code : escape(code, true))\n      + '\\n</code></pre>';\n  }\n\n  return '<pre><code class=\"'\n    + this.options.langPrefix\n    + escape(lang, true)\n    + '\">'\n    + (escaped ? code : escape(code, true))\n    + '\\n</code></pre>\\n';\n};\n\nRenderer.prototype.blockquote = function(quote) {\n  return '<blockquote>\\n' + quote + '</blockquote>\\n';\n};\n\nRenderer.prototype.html = function(html) {\n  return html;\n};\n\nRenderer.prototype.heading = function(text, level, raw) {\n  return '<h'\n    + level\n    + ' id=\"'\n    + this.options.headerPrefix\n    + raw.toLowerCase().replace(/[^\\w]+/g, '-')\n    + '\">'\n    + text\n    + '</h'\n    + level\n    + '>\\n';\n};\n\nRenderer.prototype.hr = function() {\n  return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n};\n\nRenderer.prototype.list = function(body, ordered) {\n  var type = ordered ? 'ol' : 'ul';\n  return '<' + type + '>\\n' + body + '</' + type + '>\\n';\n};\n\nRenderer.prototype.listitem = function(text) {\n  return '<li>' + text + '</li>\\n';\n};\n\nRenderer.prototype.paragraph = function(text) {\n  return '<p>' + text + '</p>\\n';\n};\n\nRenderer.prototype.table = function(header, body) {\n  return '<table>\\n'\n    + '<thead>\\n'\n    + header\n    + '</thead>\\n'\n    + '<tbody>\\n'\n    + body\n    + '</tbody>\\n'\n    + '</table>\\n';\n};\n\nRenderer.prototype.tablerow = function(content) {\n  return '<tr>\\n' + content + '</tr>\\n';\n};\n\nRenderer.prototype.tablecell = function(content, flags) {\n  var type = flags.header ? 'th' : 'td';\n  var tag = flags.align\n    ? '<' + type + ' style=\"text-align:' + flags.align + '\">'\n    : '<' + type + '>';\n  return tag + content + '</' + type + '>\\n';\n};\n\n// span level renderer\nRenderer.prototype.strong = function(text) {\n  return '<strong>' + text + '</strong>';\n};\n\nRenderer.prototype.em = function(text) {\n  return '<em>' + text + '</em>';\n};\n\nRenderer.prototype.codespan = function(text) {\n  return '<code>' + text + '</code>';\n};\n\nRenderer.prototype.br = function() {\n  return this.options.xhtml ? '<br/>' : '<br>';\n};\n\nRenderer.prototype.del = function(text) {\n  return '<del>' + text + '</del>';\n};\n\nRenderer.prototype.link = function(href, title, text) {\n  if (this.options.sanitize) {\n    try {\n      var prot = decodeURIComponent(unescape(href))\n        .replace(/[^\\w:]/g, '')\n        .toLowerCase();\n    } catch (e) {\n      return '';\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0) {\n      return '';\n    }\n  }\n  var out = '<a href=\"' + href + '\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += '>' + text + '</a>';\n  return out;\n};\n\nRenderer.prototype.image = function(href, title, text) {\n  var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += this.options.xhtml ? '/>' : '>';\n  return out;\n};\n\nRenderer.prototype.text = function(text) {\n  return text;\n};\n\n/**\n * Parsing & Compiling\n */\n\nfunction Parser(options) {\n  this.tokens = [];\n  this.token = null;\n  this.options = options || marked.defaults;\n  this.options.renderer = this.options.renderer || new Renderer;\n  this.renderer = this.options.renderer;\n  this.renderer.options = this.options;\n}\n\n/**\n * Static Parse Method\n */\n\nParser.parse = function(src, options, renderer) {\n  var parser = new Parser(options, renderer);\n  return parser.parse(src);\n};\n\n/**\n * Parse Loop\n */\n\nParser.prototype.parse = function(src) {\n  this.inline = new InlineLexer(src.links, this.options, this.renderer);\n  this.tokens = src.reverse();\n\n  var out = '';\n  while (this.next()) {\n    out += this.tok();\n  }\n\n  return out;\n};\n\n/**\n * Next Token\n */\n\nParser.prototype.next = function() {\n  return this.token = this.tokens.pop();\n};\n\n/**\n * Preview Next Token\n */\n\nParser.prototype.peek = function() {\n  return this.tokens[this.tokens.length - 1] || 0;\n};\n\n/**\n * Parse Text Tokens\n */\n\nParser.prototype.parseText = function() {\n  var body = this.token.text;\n\n  while (this.peek().type === 'text') {\n    body += '\\n' + this.next().text;\n  }\n\n  return this.inline.output(body);\n};\n\n/**\n * Parse Current Token\n */\n\nParser.prototype.tok = function() {\n  switch (this.token.type) {\n    case 'space': {\n      return '';\n    }\n    case 'hr': {\n      return this.renderer.hr();\n    }\n    case 'heading': {\n      return this.renderer.heading(\n        this.inline.output(this.token.text),\n        this.token.depth,\n        this.token.text);\n    }\n    case 'code': {\n      return this.renderer.code(this.token.text,\n        this.token.lang,\n        this.token.escaped);\n    }\n    case 'table': {\n      var header = ''\n        , body = ''\n        , i\n        , row\n        , cell\n        , flags\n        , j;\n\n      // header\n      cell = '';\n      for (i = 0; i < this.token.header.length; i++) {\n        flags = { header: true, align: this.token.align[i] };\n        cell += this.renderer.tablecell(\n          this.inline.output(this.token.header[i]),\n          { header: true, align: this.token.align[i] }\n        );\n      }\n      header += this.renderer.tablerow(cell);\n\n      for (i = 0; i < this.token.cells.length; i++) {\n        row = this.token.cells[i];\n\n        cell = '';\n        for (j = 0; j < row.length; j++) {\n          cell += this.renderer.tablecell(\n            this.inline.output(row[j]),\n            { header: false, align: this.token.align[j] }\n          );\n        }\n\n        body += this.renderer.tablerow(cell);\n      }\n      return this.renderer.table(header, body);\n    }\n    case 'blockquote_start': {\n      var body = '';\n\n      while (this.next().type !== 'blockquote_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.blockquote(body);\n    }\n    case 'list_start': {\n      var body = ''\n        , ordered = this.token.ordered;\n\n      while (this.next().type !== 'list_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.list(body, ordered);\n    }\n    case 'list_item_start': {\n      var body = '';\n\n      while (this.next().type !== 'list_item_end') {\n        body += this.token.type === 'text'\n          ? this.parseText()\n          : this.tok();\n      }\n\n      return this.renderer.listitem(body);\n    }\n    case 'loose_item_start': {\n      var body = '';\n\n      while (this.next().type !== 'list_item_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.listitem(body);\n    }\n    case 'html': {\n      var html = !this.token.pre && !this.options.pedantic\n        ? this.inline.output(this.token.text)\n        : this.token.text;\n      return this.renderer.html(html);\n    }\n    case 'paragraph': {\n      return this.renderer.paragraph(this.inline.output(this.token.text));\n    }\n    case 'text': {\n      return this.renderer.paragraph(this.parseText());\n    }\n  }\n};\n\n/**\n * Helpers\n */\n\nfunction escape(html, encode) {\n  return html\n    .replace(!encode ? /&(?!#?\\w+;)/g : /&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#39;');\n}\n\nfunction unescape(html) {\n  return html.replace(/&([#\\w]+);/g, function(_, n) {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nfunction replace(regex, opt) {\n  regex = regex.source;\n  opt = opt || '';\n  return function self(name, val) {\n    if (!name) return new RegExp(regex, opt);\n    val = val.source || val;\n    val = val.replace(/(^|[^\\[])\\^/g, '$1');\n    regex = regex.replace(name, val);\n    return self;\n  };\n}\n\nfunction noop() {}\nnoop.exec = noop;\n\nfunction merge(obj) {\n  var i = 1\n    , target\n    , key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\n\n/**\n * Marked\n */\n\nfunction marked(src, opt, callback) {\n  if (callback || typeof opt === 'function') {\n    if (!callback) {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n\n    var highlight = opt.highlight\n      , tokens\n      , pending\n      , i = 0;\n\n    try {\n      tokens = Lexer.lex(src, opt)\n    } catch (e) {\n      return callback(e);\n    }\n\n    pending = tokens.length;\n\n    var done = function(err) {\n      if (err) {\n        opt.highlight = highlight;\n        return callback(err);\n      }\n\n      var out;\n\n      try {\n        out = Parser.parse(tokens, opt);\n      } catch (e) {\n        err = e;\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!pending) return done();\n\n    for (; i < tokens.length; i++) {\n      (function(token) {\n        if (token.type !== 'code') {\n          return --pending || done();\n        }\n        return highlight(token.text, token.lang, function(err, code) {\n          if (err) return done(err);\n          if (code == null || code === token.text) {\n            return --pending || done();\n          }\n          token.text = code;\n          token.escaped = true;\n          --pending || done();\n        });\n      })(tokens[i]);\n    }\n\n    return;\n  }\n  try {\n    if (opt) opt = merge({}, marked.defaults, opt);\n    return Parser.parse(Lexer.lex(src, opt), opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/chjj/marked.';\n    if ((opt || marked.defaults).silent) {\n      return '<p>An error occured:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  return marked;\n};\n\nmarked.defaults = {\n  gfm: true,\n  tables: true,\n  breaks: false,\n  pedantic: false,\n  sanitize: false,\n  sanitizer: null,\n  mangle: true,\n  smartLists: false,\n  silent: false,\n  highlight: null,\n  langPrefix: 'lang-',\n  smartypants: false,\n  headerPrefix: '',\n  renderer: new Renderer,\n  xhtml: false\n};\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\n\nmarked.Renderer = Renderer;\n\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\n\nmarked.InlineLexer = InlineLexer;\nmarked.inlineLexer = InlineLexer.output;\n\nmarked.parse = marked;\n\nif (typeof module !== 'undefined' && typeof exports === 'object') {\n  module.exports = marked;\n} else if (typeof define === 'function' && define.amd) {\n  define(function() { return marked; });\n} else {\n  this.marked = marked;\n}\n\n}).call(function() {\n  return this || (typeof window !== 'undefined' ? window : global);\n}());\n","'use strict';\n\nimport {Marky} from './modules/Marky';\nlet marky = new Marky;\nexport default marky;\n","'use strict';\n\nimport {Element} from './Element';\n\n/**\n * Creates HTML button elements\n * @class\n * @requires Element\n * @param {String}\t\t\ttype\t\ttag name for the element\n * @param {String}\t\t\ttitle\t\ttitle for the element\n * @param {String}\t\t\tid\t\t\teditor ID to associate with the element\n * @param {HTMLElement}\trelevant\telement this element should have access to\n */\n\nexport class HeadingButton extends Element {\n\tconstructor (type, title, id, relevant) {\n\t\tsuper(type || 'button', title || 'Headings', id, relevant);\n\t\tthis.addClass([this.title, id]);\n\t\tthis.assign('value', title);\n\t\tlet icon = new Element('i');\n\t\tlet dialog = this.relevant.element;\n\t\ticon.addClass(['fa', 'fa-header']);\n\t\ticon.appendTo(this.element);\n\t\tthis.listen('click', e => {\n\t\t\te.preventDefault();\n\t\t\tthis.element.blur();\n\t\t\tdialog.classList.toggle('toggled');\n\t\t\tif (dialog.style.visibility === 'hidden') return dialog.style.visibility = 'visible';\n\t\t\treturn dialog.style.visibility = 'hidden';\n\t\t});\n\t}\n}\n\nexport class BoldButton extends Element {\n\tconstructor (type, title, id, relevant) {\n\t\tsuper(type || 'button', title || 'Bold', id, relevant);\n\t\tthis.addClass([this.title, id]);\n\t\tthis.assign('value', title);\n\t\tlet editor = this.relevant.element;\n\t\tlet icon = new Element('i');\n\t\ticon.addClass(['fa', 'fa-bold']);\n\t\ticon.appendTo(this.element);\n\t\tthis.listen('mousedown', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn this.addClass(['active']);\n\t\t});\n\t\tthis.listen('mouseup', () => {\n\t\t\treturn this.removeClass(['active']);\n\t\t});\n\t\tthis.listen('click', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn editor._marky.bold([editor.selectionStart, editor.selectionEnd]);\n\t\t});\n\t}\n}\n\nexport class ItalicButton extends Element {\n\tconstructor (type, title, id, relevant) {\n\t\tsuper(type || 'button', title || 'Italic', id, relevant);\n\t\tthis.addClass([this.title, id]);\n\t\tthis.assign('value', title);\n\t\tlet editor = this.relevant.element;\n\t\tlet icon = new Element('i');\n\t\ticon.addClass(['fa', 'fa-italic']);\n\t\ticon.appendTo(this.element);\n\t\tthis.listen('mousedown', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn this.addClass(['active']);\n\t\t});\n\t\tthis.listen('mouseup', () => {\n\t\t\treturn this.removeClass(['active']);\n\t\t});\n\t\tthis.listen('click', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn editor._marky.italic([editor.selectionStart, editor.selectionEnd]);\n\t\t});\n\t}\n}\n\nexport class StrikethroughButton extends Element {\n\tconstructor (type, title, id, relevant) {\n\t\tsuper(type || 'button', title || 'Strikethrough', id, relevant);\n\t\tthis.addClass([this.title, id]);\n\t\tthis.assign('value', title);\n\t\tlet icon = new Element('i');\n\t\tlet editor = this.relevant.element;\n\t\ticon.addClass(['fa', 'fa-strikethrough']);\n\t\ticon.appendTo(this.element);\n\t\tthis.listen('mousedown', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn this.addClass(['active']);\n\t\t});\n\t\tthis.listen('mouseup', () => {\n\t\t\treturn this.removeClass(['active']);\n\t\t});\n\t\tthis.listen('click', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn editor._marky.strikethrough([editor.selectionStart, editor.selectionEnd]);\n\t\t});\n\t}\n}\n\nexport class CodeButton extends Element {\n\tconstructor (type, title, id, relevant) {\n\t\tsuper(type || 'button', title || 'Code', id, relevant);\n\t\tthis.addClass([this.title, id]);\n\t\tthis.assign('value', title);\n\t\tlet icon = new Element('i');\n\t\tlet editor = this.relevant.element;\n\t\ticon.addClass(['fa', 'fa-code']);\n\t\ticon.appendTo(this.element);\n\t\tthis.listen('mousedown', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn this.addClass(['active']);\n\t\t});\n\t\tthis.listen('mouseup', () => {\n\t\t\treturn this.removeClass(['active']);\n\t\t});\n\t\tthis.listen('click', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn editor._marky.code([editor.selectionStart, editor.selectionEnd]);\n\t\t});\n\t}\n}\n\nexport class BlockquoteButton extends Element {\n\tconstructor (type, title, id, relevant) {\n\t\tsuper(type || 'button', title || 'Blockquote', id, relevant);\n\t\tthis.addClass([this.title, id]);\n\t\tthis.assign('value', title);\n\t\tlet icon = new Element('i');\n\t\tlet editor = this.relevant.element;\n\t\ticon.addClass(['fa', 'fa-quote-right']);\n\t\ticon.appendTo(this.element);\n\t\tthis.listen('mousedown', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn this.addClass(['active']);\n\t\t});\n\t\tthis.listen('mouseup', () => {\n\t\t\treturn this.removeClass(['active']);\n\t\t});\n\t\tthis.listen('click', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn editor._marky.blockquote([editor.selectionStart, editor.selectionEnd]);\n\t\t});\n\t}\n}\n\nexport class LinkButton extends Element {\n\tconstructor (type, title, id, relevant) {\n\t\tsuper(type || 'button', title || 'Link', id, relevant);\n\t\tthis.addClass([this.title, id]);\n\t\tthis.assign('value', title);\n\t\tlet icon = new Element('i');\n\t\tlet dialog = this.relevant[0].element;\n\t\tlet editor = this.relevant[1].element;\n\t\ticon.addClass(['fa', 'fa-link']);\n\t\ticon.appendTo(this.element);\n\t\tthis.listen('mousedown', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn this.addClass(['active']);\n\t\t});\n\t\tthis.listen('mouseup', () => {\n\t\t\treturn this.removeClass(['active']);\n\t\t});\n\t\tthis.listen('click', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\tdialog.classList.toggle('toggled');\n\t\t\tif (dialog.style.visibility === 'hidden') {\n\t\t\t\tdialog.children[0].children[1].value = editor.value.substring(editor.selectionStart, editor.selectionEnd);\n\t\t\t\treturn dialog.style.visibility = 'visible';\n\t\t\t}\n\t\t\treturn dialog.style.visibility = 'hidden';\n\t\t});\n\t}\n}\n\nexport class ImageButton extends Element {\n\tconstructor (type, title, id, relevant) {\n\t\tsuper(type || 'button', title || 'Image', id, relevant);\n\t\tthis.addClass([this.title, id]);\n\t\tthis.assign('value', title);\n\t\tlet icon = new Element('i');\n\t\tlet dialog = this.relevant[0].element;\n\t\tlet editor = this.relevant[1].element;\n\t\ticon.addClass(['fa', 'fa-file-image-o']);\n\t\ticon.appendTo(this.element);\n\t\tthis.listen('mousedown', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn this.addClass(['active']);\n\t\t});\n\t\tthis.listen('mouseup', () => {\n\t\t\treturn this.removeClass(['active']);\n\t\t});\n\t\tthis.listen('click', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\tdialog.classList.toggle('toggled');\n\t\t\tif (dialog.style.visibility === 'hidden') {\n\t\t\t\tdialog.children[0].children[1].value = editor.value.substring(editor.selectionStart, editor.selectionEnd);\n\t\t\t\treturn dialog.style.visibility = 'visible';\n\t\t\t}\n\t\t\treturn dialog.style.visibility = 'hidden';\n\t\t});\n\t}\n}\n\nexport class UnorderedListButton extends Element {\n\tconstructor (type, title, id, relevant) {\n\t\tsuper(type || 'button', title || 'Unordered List', id, relevant);\n\t\tthis.addClass([this.title, id]);\n\t\tthis.assign('value', title);\n\t\tlet icon = new Element('i');\n\t\tlet editor = this.relevant.element;\n\t\ticon.addClass(['fa', 'fa-list-ul']);\n\t\ticon.appendTo(this.element);\n\t\tthis.listen('mousedown', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn this.addClass(['active']);\n\t\t});\n\t\tthis.listen('mouseup', () => {\n\t\t\treturn this.removeClass(['active']);\n\t\t});\n\t\tthis.listen('click', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn editor._marky.unorderedList([editor.selectionStart, editor.selectionEnd]);\n\t\t});\n\t}\n}\n\nexport class OrderedListButton extends Element {\n\tconstructor (type, title, id, relevant) {\n\t\tsuper(type || 'button', title || 'Ordered List', id, relevant);\n\t\tthis.addClass([this.title, id]);\n\t\tthis.assign('value', title);\n\t\tlet icon = new Element('i');\n\t\tlet editor = this.relevant.element;\n\t\ticon.addClass(['fa', 'fa-list-ol']);\n\t\ticon.appendTo(this.element);\n\t\tthis.listen('mousedown', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn this.addClass(['active']);\n\t\t});\n\t\tthis.listen('mouseup', () => {\n\t\t\treturn this.removeClass(['active']);\n\t\t});\n\t\tthis.listen('click', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn editor._marky.orderedList([editor.selectionStart, editor.selectionEnd]);\n\t\t});\n\t}\n}\n\nexport class IndentButton extends Element {\n\tconstructor (type, title, id, relevant) {\n\t\tsuper(type || 'button', title || 'Indent', id, relevant);\n\t\tthis.addClass([this.title, id]);\n\t\tthis.assign('value', title);\n\t\tlet icon = new Element('i');\n\t\tlet editor = this.relevant.element;\n\t\ticon.addClass(['fa', 'fa-indent']);\n\t\ticon.appendTo(this.element);\n\t\tthis.listen('mousedown', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn this.addClass(['active']);\n\t\t});\n\t\tthis.listen('mouseup', () => {\n\t\t\treturn this.removeClass(['active']);\n\t\t});\n\t\tthis.listen('click', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn editor._marky.indent([editor.selectionStart, editor.selectionEnd]);\n\t\t});\n\t}\n}\n\nexport class OutdentButton extends Element {\n\tconstructor (type, title, id, relevant) {\n\t\tsuper(type || 'button', title || 'Outdent', id, relevant);\n\t\tthis.addClass([this.title, id]);\n\t\tthis.assign('value', title);\n\t\tlet icon = new Element('i');\n\t\tlet editor = this.relevant.element;\n\t\ticon.addClass(['fa', 'fa-outdent']);\n\t\ticon.appendTo(this.element);\n\t\tthis.listen('mousedown', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn this.addClass(['active']);\n\t\t});\n\t\tthis.listen('mouseup', () => {\n\t\t\treturn this.removeClass(['active']);\n\t\t});\n\t\tthis.listen('click', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn editor._marky.outdent([editor.selectionStart, editor.selectionEnd]);\n\t\t});\n\t}\n}\n\nexport class UndoButton extends Element {\n\tconstructor (type, title, id, relevant) {\n\t\tsuper(type || 'button', title || 'Undo', id, relevant);\n\t\tthis.addClass([this.title, id]);\n\t\tthis.assign('value', title);\n\t\tlet icon = new Element('i');\n\t\tlet editor = this.relevant.element;\n\t\ticon.addClass(['fa', 'fa-backward']);\n\t\ticon.appendTo(this.element);\n\t\tthis.listen('mousedown', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn this.addClass(['active']);\n\t\t});\n\t\tthis.listen('mouseup', () => {\n\t\t\treturn this.removeClass(['active']);\n\t\t});\n\t\tthis.listen('click', e => {\n\t\t\te.preventDefault();\n\t\t\tif (this.element.classList.contains('disabled')) return;\n\t\t\teditor.focus();\n\t\t\treturn editor._marky.undo(1, editor._marky.state, editor._marky.index);\n\t\t});\n\t}\n}\n\nexport class RedoButton extends Element {\n\tconstructor (type, title, id, relevant) {\n\t\tsuper(type || 'button', title || 'Redo', id, relevant);\n\t\tthis.addClass([this.title, id]);\n\t\tthis.assign('value', title);\n\t\tlet icon = new Element('i');\n\t\tlet editor = this.relevant.element;\n\t\ticon.addClass(['fa', 'fa-forward']);\n\t\ticon.appendTo(this.element);\n\t\tthis.listen('mousedown', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t\treturn this.addClass(['active']);\n\t\t});\n\t\tthis.listen('mouseup', () => {\n\t\t\treturn this.removeClass(['active']);\n\t\t});\n\t\tthis.listen('click', e => {\n\t\t\te.preventDefault();\n\t\t\tif (this.element.classList.contains('disabled')) return;\n\t\t\teditor.focus();\n\t\t\treturn editor._marky.redo(1, editor._marky.state, editor._marky.index);\n\t\t});\n\t}\n}\n\nexport class FullscreenButton extends Element {\n\tconstructor (type, title, id, relevant) {\n\t\tsuper(type || 'button', title || 'Image', id, relevant);\n\t\tthis.addClass([this.title, id]);\n\t\tthis.assign('value', title);\n\t\tlet icon = new Element('i');\n\t\tlet container = this.relevant[0];\n\t\tlet editor = this.relevant[1].element;\n\t\ticon.addClass(['fa', 'fa-expand']);\n\t\ticon.appendTo(this.element);\n\t\tthis.listen('click', e => {\n\t\t\te.preventDefault();\n\t\t\tthis.element.blur();\n\t\t\tcontainer.classList.toggle('fullscreen-toggled');\n\t\t\teditor.classList.toggle('fullscreen-toggled');\n\t\t\tthis.element.classList.toggle('fullscreen-toggled');\n\t\t\ticon.element.classList.toggle('fa-expand');\n\t\t\ticon.element.classList.toggle('fa-compress');\n\t\t\treturn;\n\t\t});\n\t}\n}\n","'use strict';\n\nimport {Element} from './Element';\nimport {HeadingItem} from './ListItems';\n\n/**\n * Creates dialog (modal) elements\n * @class\n * @requires Element\n * @param {String}\t\t\ttype\t\ttag name for the element\n * @param {String}\t\t\ttitle\t\ttitle for the element\n * @param {String}\t\t\tid\t\t\teditor ID to associate with the element\n * @param {HTMLElement}\trelevant\telement this element should have access to\n */\n\nexport class LinkDialog extends Element {\n\tconstructor (type, title, id, relevant) {\n\t\tsuper(type || 'div', title || 'Link Dialog', id, relevant);\n\t\tthis.addClass([this.title, id, 'dialog']);\n\t\tlet element = this.element;\n\t\tlet editor = this.relevant.element;\n\n\t\tlet linkForm = new Element('form', 'Link-Form');\n\t\tlinkForm.assign('id', id + '-link-form');\n\n\t\tlet linkUrlInput = new Element('input', 'Link-Url');\n\t\tlinkUrlInput.addClass(['link-url-input']);\n\t\tlinkUrlInput.assign('type', 'text');\n\t\tlinkUrlInput.assign('name', id + '-link-url-input');\n\t\tlinkUrlInput.assign('placeholder', 'http://url.com');\n\n\t\tlet linkDisplayInput = new Element('input', 'Link-Display');\n\t\tlinkDisplayInput.addClass(['link-display-input']);\n\t\tlinkDisplayInput.assign('type', 'text');\n\t\tlinkDisplayInput.assign('name', id + '-link-display-input');\n\t\tlinkDisplayInput.assign('placeholder', 'Display text');\n\n\t\tlet insertButton = new Element('button', 'Insert Link');\n\t\tinsertButton.addClass(['insert-link']);\n\t\tinsertButton.assign('textContent', 'Insert');\n\n\t\tlinkForm.appendTo(this.element);\n\t\tlinkUrlInput.appendTo(linkForm.element);\n\t\tlinkDisplayInput.appendTo(linkForm.element);\n\t\tinsertButton.appendTo(linkForm.element);\n\n\t\tlinkForm.listen('submit', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t});\n\t\tinsertButton.listen('click', e => {\n\t\t\te.preventDefault;\n\t\t\teditor.focus();\n\t\t\tlet url = linkUrlInput.element.value ? linkUrlInput.element.value : 'http://url.com';\n\t\t\tlet display = linkDisplayInput.element.value ? linkDisplayInput.element.value : url;\n\t\t\tlinkUrlInput.element.value = '';\n\t\t\tlinkDisplayInput.element.value = '';\n\t\t\telement.style.visibility = 'hidden';\n\t\t\tthis.removeClass(['toggled']);\n\t\t\treturn editor._marky.link([editor.selectionStart, editor.selectionEnd], url, display);\n\t\t});\n\t\tthis.relevant.listen('click', () => {\n\t\t\tthis.removeClass(['toggled']);\n\t\t\treturn element.style.visibility = 'hidden';\n\t\t});\n\t}\n}\n\nexport class ImageDialog extends Element {\n\tconstructor (type, title, id, relevant) {\n\t\tsuper(type || 'div', title || 'Image Dialog', id, relevant);\n\t\tthis.addClass([this.title, id, 'dialog']);\n\t\tlet element = this.element;\n\t\tlet editor = this.relevant.element;\n\n\t\tlet imageForm = new Element('form', 'Image-Form');\n\t\timageForm.assign('id', id + '-image-form');\n\n\t\tlet imageSourceInput = new Element('input', 'Image-Source');\n\t\timageSourceInput.addClass(['image-source-input']);\n\t\timageSourceInput.assign('type', 'text');\n\t\timageSourceInput.assign('name', id + '-image-source-input');\n\t\timageSourceInput.assign('placeholder', 'http://imagesource.com/image.jpg');\n\n\t\tlet imageAltInput = new Element('input', 'Image-Alt');\n\t\timageAltInput.addClass(['image-alt-input']);\n\t\timageAltInput.assign('type', 'text');\n\t\timageAltInput.assign('name', id + '-image-display-input');\n\t\timageAltInput.assign('placeholder', 'Alt text');\n\n\t\tlet insertButton = new Element('button', 'Insert Image');\n\t\tinsertButton.addClass(['insert-image']);\n\t\tinsertButton.assign('textContent', 'Insert');\n\n\t\timageForm.appendTo(this.element);\n\t\timageSourceInput.appendTo(imageForm.element);\n\t\timageAltInput.appendTo(imageForm.element);\n\t\tinsertButton.appendTo(imageForm.element);\n\n\t\timageForm.listen('submit', e => {\n\t\t\te.preventDefault();\n\t\t\teditor.focus();\n\t\t});\n\t\tinsertButton.listen('click', e => {\n\t\t\te.preventDefault;\n\t\t\teditor.focus();\n\t\t\tlet source = imageSourceInput.element.value ? imageSourceInput.element.value : 'http://imagesource.com/image.jpg';\n\t\t\tlet alt = imageAltInput.element.value ? imageAltInput.element.value : source;\n\t\t\timageSourceInput.element.value = '';\n\t\t\timageAltInput.element.value = '';\n\t\t\telement.style.visibility = 'hidden';\n\t\t\tthis.removeClass(['toggled']);\n\t\t\treturn editor._marky.image([editor.selectionStart, editor.selectionEnd], source, alt);\n\t\t});\n\t\tthis.relevant.listen('click', () => {\n\t\t\tthis.removeClass(['toggled']);\n\t\t\treturn element.style.visibility = 'hidden';\n\t\t});\n\t}\n}\n\nexport class HeadingDialog extends Element {\n\tconstructor (type, title, id, relevant) {\n\t\tsuper(type || 'div', title || 'Heading Dialog', id, relevant);\n\t\tthis.addClass([this.title, id, 'dialog']);\n\t\tlet element = this.element;\n\t\tlet editor = this.relevant.element;\n\n\t\tlet headingList = new Element('ul', 'Heading-List');\n\t\theadingList.assign('id', id + '-heading-list');\n\n\t\tlet option1 = new HeadingItem('li', 'Heading 1', '1');\n\t\tlet option2 = new HeadingItem('li', 'Heading 2', '2');\n\t\tlet option3 = new HeadingItem('li', 'Heading 3', '3');\n\t\tlet option4 = new HeadingItem('li', 'Heading 4', '4');\n\t\tlet option5 = new HeadingItem('li', 'Heading 5', '5');\n\t\tlet option6 = new HeadingItem('li', 'Heading 6', '6');\n\t\tlet remove = new HeadingItem('li', 'Remove Heading', '0', 'fa-remove');\n\n\t\theadingList.appendTo(element);\n\t\toption1.appendTo(headingList.element);\n\t\toption2.appendTo(headingList.element);\n\t\toption3.appendTo(headingList.element);\n\t\toption4.appendTo(headingList.element);\n\t\toption5.appendTo(headingList.element);\n\t\toption6.appendTo(headingList.element);\n\t\tremove.appendTo(headingList.element);\n\n\t\tArray.prototype.forEach.call(headingList.element.children, el => {\n\t\t\tel.children[0].addEventListener('click', e => {\n\t\t\t\te.preventDefault();\n\t\t\t\tlet value = parseInt(e.target.value);\n\t\t\t\teditor.focus();\n\t\t\t\tthis.removeClass(['toggled']);\n\t\t\t\telement.style.visibility = 'hidden';\n\t\t\t\treturn editor._marky.heading(value, [editor.selectionStart, editor.selectionEnd]);\n\t\t\t});\n\t\t});\n\t}\n}\n","'use strict';\n\n/**\n * Creates an HTML element with some built-in shortcut methods\n * @class\n * @param {String}\t\t\ttype\t\ttag name for the element\n * @param {String}\t\t\ttitle\t\ttitle for the element\n * @param {String}\t\t\tid\t\t\teditor ID to associate with the element\n * @param {HTMLElement}\trelevant\telement this element should have access to\n */\nexport class Element {\n\tconstructor(type, title = null, id = null, relevant = null) {\n\t\tthis.title = title;\n\t\tthis.type = type;\n\t\tthis.id = id;\n\t\tthis.relevant = relevant;\n\t\tthis.element = this.register();\n\t\tif (this.title) this.element.title = this.title;\n\t}\n\n\tregister () {\n\t\treturn document.createElement(this.type);\n\t}\n\n\tassign (prop, value) {\n\t\treturn this.element[prop] = value;\n\t}\n\n\tappendTo (container) {\n\t\treturn container.appendChild(this.element);\n\t}\n\n\taddClass (classNames) {\n\t\treturn classNames.forEach(className => {\n\t\t\tthis.element.classList.add(className.replace(/[ ]/g, '-').toLowerCase());\n\t\t});\n\t}\n\n\tremoveClass (classNames) {\n\t\treturn classNames.forEach(className => {\n\t\t\tthis.element.classList.remove(className.replace(/[ ]/g, '-').toLowerCase());\n\t\t});\n\t}\n\n\tlisten (evt, cb) {\n\t\treturn this.element.addEventListener(evt, cb);\n\t}\n}\n","'use strict';\n\nimport {Element} from './Element';\n\n/**\n * Creates HTML option elements\n * @class\n * @requires Element\n * @param {String}\ttype\t\ttag name for the element\n * @param {String}\ttitle\t\ttitle for the element\n * @param {String} \tvalue\t\ta value to assign the element\n */\nexport class HeadingItem extends Element {\n\tconstructor (type, title, value, iconClass = null) {\n\t\tsuper(type || 'li', title);\n\t\tthis.addClass([this.title.replace(' ', '-')]);\n\t\tthis.assign('value', value);\n\t\tlet button = new Element('button', title);\n\t\tbutton.assign('value', value);\n\t\tbutton.addClass(['heading-button']);\n\t\tbutton.appendTo(this.element);\n\t\tif (iconClass) {\n\t\t\tlet icon = new Element('i');\n\t\t\ticon.addClass(['fa', iconClass]);\n\t\t\ticon.appendTo(button.element);\n\t\t} else {\n\t\t\tbutton.assign('textContent', value);\n\t\t}\n\t}\n}\n","'use strict';\n\n/**\n * Marky Mark\n * Author: Patrick Fricano\n * https://www.github.com/patrickfatrick/marky-marked\n */\n\nimport prototypes from './prototypes';\nimport mark from './mark';\nimport * as dispatcher from './dispatcher';\nimport {markyupdate, markychange} from './custom-events';\nimport {inlineHandler, blockHandler, insertHandler, listHandler, indentHandler} from './handlers';\n\nprototypes();\n\nexport class Marky {\n\tconstructor (editor) {\n\t\tthis.mark = mark;\n\t\tthis.state = [{markdown: '', html: '', selection: [0, 0]}];\n\t\tthis.index = 0;\n\t\tthis.editor = editor;\n\t}\n\n\t/**\n\t * Handles updating the state on forward-progress changes\n\t * @requires dispatcher/update\n\t * @param {String} markdown the new markdown blob\n\t * @param {Array}  state    the state timeline\n\t * @param {Number} index    current state index\n\t */\n\tupdate (markdown, selection = [0, 0], state = this.state, index = this.index) {\n\t\tconst action = dispatcher.update(markdown, selection, state, index);\n\t\tthis.state = action.state;\n\t\tthis.index = action.index;\n\t}\n\n\t/**\n\t * Handles moving backward in state\n\t * @requires dispatcher/undo\n\t * @param   {Number}      num    number of states to move back\n\t * @param   {Array}       state  the state timeline\n\t * @param   {Number}      index  current state index\n\t * @param   {HTMLElement} editor the marky marked editor\n\t * @returns {Number}      the new index\n\t */\n\tundo (num = 1, state = this.state, index = this.index, editor = this.editor) {\n\t\tif (index === 0) return index;\n\n\t\tconst action = dispatcher.undo(num, state, index);\n\t\tthis.index = action.index;\n\t\teditor.value = action.state.markdown;\n\t\teditor.setSelectionRange(action.state.selection[0], action.state.selection[1]);\n\t\teditor.nextSibling.value = action.state.html;\n\t\teditor.dispatchEvent(markychange);\n\t\treturn this.index;\n\t}\n\n\t/**\n\t * Handles moving forward in state\n\t * @requires dispatcher/redo\n\t * @param   {Number}      num    number of states to move back\n\t * @param   {Array}       state  the state timeline\n\t * @param   {Number}      index  current state index\n\t * @param   {HTMLElement} editor the marky marked editor\n\t * @returns {Number}      the new index\n\t */\n\tredo (num = 1, state = this.state, index = this.index, editor = this.editor) {\n\t\tif (index === state.length - 1) return index;\n\n\t\tconst action = dispatcher.redo(num, state, index);\n\t\tthis.index = action.index;\n\t\teditor.value = action.state.markdown;\n\t\teditor.setSelectionRange(action.state.selection[0], action.state.selection[1]);\n\t\teditor.nextSibling.value = action.state.html;\n\t\teditor.dispatchEvent(markychange);\n\t\treturn this.index;\n\t}\n\n\t/**\n\t * Setsa the selection indices in the editor\n\t * @param   {Array}       arr    starting and ending indices\n\t * @param   {HTMLElement} editor the marky marked editor\n\t * @returns {Array}       the array that was passed in\n\t */\n\tsetSelection (arr = [0, 0], editor = this.editor) {\n\t\teditor.setSelectionRange(arr[0], arr[1]);\n\t\treturn arr;\n\t}\n\n\t/**\n\t * expands the selection to the right\n\t * @param   {Number}      num    number of characters to expand by\n\t * @param   {HTMLElement} editor the marky marked editor\n\t * @returns {Array}       the new selection indices\n\t */\n\texpandSelectionForward (num = 0, editor = this.editor) {\n\t\tconst start = editor.selectionStart;\n\t\tconst end = editor.selectionEnd + num;\n\n\t\teditor.setSelectionRange(start, end);\n\t\treturn [start, end];\n\t}\n\n\t/**\n\t * expands the selection to the left\n\t * @param   {Number}      num    number of characters to expand by\n\t * @param   {HTMLElement} editor the marky marked editor\n\t * @returns {Array}       the new selection indices\n\t */\n\texpandSelectionBackward (num = 0, editor = this.editor) {\n\t\tconst start = editor.selectionStart - num;\n\t\tconst end = editor.selectionEnd;\n\n\t\teditor.setSelectionRange(start, end);\n\t\treturn [start, end];\n\t}\n\n\t/**\n\t * expands the cursor to the right\n\t * @param   {Number}      num    number of characters to move by\n\t * @param   {HTMLElement} editor the marky marked editor\n\t * @returns {Array}       the new cursor position\n\t */\n\tmoveCursorBackward (num = 0, editor = this.editor) {\n\t\tconst start = editor.selectionStart - num;\n\n\t\teditor.setSelectionRange(start, start);\n\t\treturn start;\n\t}\n\n\t/**\n\t * expands the cursor to the left\n\t * @param   {Number}      num    number of characters to move by\n\t * @param   {HTMLElement} editor the marky marked editor\n\t * @returns {Array}       the new cursor position\n\t */\n\tmoveCursorForward (num = 0, editor = this.editor) {\n\t\tconst start = editor.selectionStart + num;\n\n\t\teditor.setSelectionRange(start, start);\n\t\treturn start;\n\t}\n\n\t/**\n\t * implements a bold on a selection\n\t * @requires handlers/inlineHandler\n\t * @param   {Array}       indices starting and ending positions for the selection\n\t * @param   {HTMLElement} editor  the marky marked editor\n\t * @returns {Array}       the new selection after the bold\n\t */\n\tbold (indices, editor = this.editor) {\n\t\tindices = indices || [editor.selectionStart, editor.selectionEnd];\n\t\tlet boldify = inlineHandler(editor.value, indices, '**');\n\t\teditor.value = boldify.value;\n\t\teditor.setSelectionRange(boldify.range[0], boldify.range[1]);\n\t\tlet html = editor._marky.state[editor._marky.index].html;\n\t\teditor.nextSibling.value = html;\n\t\teditor.dispatchEvent(markyupdate);\n\t\treturn [boldify.range[0], boldify.range[1]];\n\t}\n\n\t/**\n\t * implements an italic on a selection\n\t * @requires handlers/inlineHandler\n\t * @param   {Array}       indices starting and ending positions for the selection\n\t * @param   {HTMLElement} editor  the marky marked editor\n\t * @returns {Array}       the new selection after the italic\n\t */\n\titalic (indices, editor = this.editor) {\n\t\tindices = indices || [editor.selectionStart, editor.selectionEnd];\n\t\tlet italicize = inlineHandler(editor.value, indices, '_');\n\t\teditor.value = italicize.value;\n\t\teditor.setSelectionRange(italicize.range[0], italicize.range[1]);\n\t\tlet html = editor._marky.state[editor._marky.index].html;\n\t\teditor.nextSibling.value = html;\n\t\teditor.dispatchEvent(markyupdate);\n\t\treturn [italicize.range[0], italicize.range[1]];\n\t}\n\n\t/**\n\t * implements a strikethrough on a selection\n\t * @requires handlers/inlineHandler\n\t * @param   {Array}       indices starting and ending positions for the selection\n\t * @param   {HTMLElement} editor  the marky marked editor\n\t * @returns {Array}       the new selection after the strikethrough\n\t */\n\tstrikethrough (indices, editor = this.editor) {\n\t\tindices = indices || [editor.selectionStart, editor.selectionEnd];\n\t\tlet strikitize = inlineHandler(editor.value, indices, '~~');\n\t\teditor.value = strikitize.value;\n\t\teditor.setSelectionRange(strikitize.range[0], strikitize.range[1]);\n\t\tlet html = editor._marky.state[editor._marky.index].html;\n\t\teditor.nextSibling.value = html;\n\t\teditor.dispatchEvent(markyupdate);\n\t\treturn [strikitize.range[0], strikitize.range[1]];\n\t}\n\n\t/**\n\t * implements a code on a selection\n\t * @requires handlers/inlineHandler\n\t * @param   {Array}       indices starting and ending positions for the selection\n\t * @param   {HTMLElement} editor  the marky marked editor\n\t * @returns {Array}       the new selection after the code\n\t */\n\tcode (indices, editor = this.editor) {\n\t\tindices = indices || [editor.selectionStart, editor.selectionEnd];\n\t\tlet codify = inlineHandler(editor.value, indices, '`');\n\t\teditor.value = codify.value;\n\t\teditor.setSelectionRange(codify.range[0], codify.range[1]);\n\t\tlet html = editor._marky.state[editor._marky.index].html;\n\t\teditor.nextSibling.value = html;\n\t\teditor.dispatchEvent(markyupdate);\n\t\treturn [codify.range[0], codify.range[1]];\n\t}\n\n\t/**\n\t * implements a blockquote on a selection\n\t * @requires handlers/blockHandler\n\t * @param   {Array}       indices starting and ending positions for the selection\n\t * @param   {HTMLElement} editor  the marky marked editor\n\t * @returns {Array}       the new selection after the bold\n\t */\n\tblockquote (indices, editor = this.editor) {\n\t\tindices = indices || [editor.selectionStart, editor.selectionEnd];\n\t\tlet quotify = blockHandler(editor.value, indices, '> ');\n\t\teditor.value = quotify.value;\n\t\teditor.setSelectionRange(quotify.range[0], quotify.range[1]);\n\t\tlet html = editor._marky.state[editor._marky.index].html;\n\t\teditor.nextSibling.value = html;\n\t\teditor.dispatchEvent(markyupdate);\n\t\treturn [quotify.range[0], quotify.range[1]];\n\t}\n\n\t/**\n\t * implements a heading on a selection\n\t * @requires handlers/blockHandler\n\t * @param   {Array}       indices starting and ending positions for the selection\n\t * @param   {HTMLElement} editor  the marky marked editor\n\t * @returns {Array}       the new selection after the heading\n\t */\n\theading (value = 0, indices, editor = this.editor) {\n\t\tindices = indices || [editor.selectionStart, editor.selectionEnd];\n\t\tlet markArr = [];\n\t\tlet mark;\n\t\tfor (let i = 1; i <= value; i++) {\n\t\t\tmarkArr.push('#');\n\t\t}\n\t\tmark = markArr.join('');\n\t\tlet space = mark ? ' ' : '';\n\t\tlet headingify = blockHandler(editor.value, indices, mark + space);\n\t\teditor.value = headingify.value;\n\t\teditor.setSelectionRange(headingify.range[0], headingify.range[1]);\n\t\tlet html = editor._marky.state[editor._marky.index].html;\n\t\teditor.nextSibling.value = html;\n\t\teditor.dispatchEvent(markyupdate);\n\t\treturn [headingify.range[0], headingify.range[1]];\n\t}\n\n\t/**\n\t * inserts a link snippet at the end of a selection\n\t * @requires handlers/insertHandler\n\t * @param   {Array}       indices starting and ending positions for the selection\n\t * @param   {HTMLElement} editor  the marky marked editor\n\t * @returns {Array}       the new selection after the snippet is inserted\n\t */\n\tlink (indices, url = 'http://url.com', display = 'http://url.com', editor = this.editor) {\n\t\tindices = indices || [editor.selectionStart, editor.selectionEnd];\n\t\tconst mark = '[' + display + '](' + url + ')';\n\t\tlet linkify = insertHandler(editor.value, indices, mark);\n\t\teditor.value = linkify.value;\n\t\teditor.setSelectionRange(linkify.range[0], linkify.range[1]);\n\t\tlet html = editor._marky.state[editor._marky.index].html;\n\t\teditor.nextSibling.value = html;\n\t\teditor.dispatchEvent(markyupdate);\n\t\treturn [linkify.range[0], linkify.range[1]];\n\t}\n\n\t/**\n\t * inserts an image snippet at the end of a selection\n\t * @requires handlers/insertHandler\n\t * @param   {Array}       indices starting and ending positions for the selection\n\t * @param   {HTMLElement} editor  the marky marked editor\n\t * @returns {Array}       the new selection after the snippet is inserted\n\t */\n\timage (indices, source = 'http://imagesource.com/image.jpg', alt = 'http://imagesource.com/image.jpg', editor = this.editor) {\n\t\tindices = indices || [editor.selectionStart, editor.selectionEnd];\n\t\tconst mark = '![' + alt + '](' + source + ')';\n\t\tlet imageify = insertHandler(editor.value, indices, mark);\n\t\teditor.value = imageify.value;\n\t\teditor.setSelectionRange(imageify.range[0], imageify.range[1]);\n\t\tlet html = editor._marky.state[editor._marky.index].html;\n\t\teditor.nextSibling.value = html;\n\t\teditor.dispatchEvent(markyupdate);\n\t\treturn [imageify.range[0], imageify.range[1]];\n\t}\n\n\t/**\n\t * implements an unordered list on a selection\n\t * @requires handlers/listHandler\n\t * @param   {Array}       indices starting and ending positions for the selection\n\t * @param   {HTMLElement} editor  the marky marked editor\n\t * @returns {Array}       the new selection after the list is implemented\n\t */\n\tunorderedList (indices, editor = this.editor) {\n\t\tindices = indices || [editor.selectionStart, editor.selectionEnd];\n\t\tlet listify = listHandler(editor.value, indices, 'ul');\n\t\teditor.value = listify.value;\n\t\teditor.setSelectionRange(listify.range[0], listify.range[1]);\n\t\tlet html = editor._marky.state[editor._marky.index].html;\n\t\teditor.nextSibling.value = html;\n\t\teditor.dispatchEvent(markyupdate);\n\t\treturn [listify.range[0], listify.range[1]];\n\t}\n\n\t/**\n\t * implements an ordered list on a selection\n\t * @requires handlers/listHandler\n\t * @param   {Array}       indices starting and ending positions for the selection\n\t * @param   {HTMLElement} editor  the marky marked editor\n\t * @returns {Array}       the new selection after the list is implemented\n\t */\n\torderedList (indices, editor = this.editor) {\n\t\tindices = indices || [editor.selectionStart, editor.selectionEnd];\n\t\tlet listify = listHandler(editor.value, indices, 'ol');\n\t\teditor.value = listify.value;\n\t\teditor.setSelectionRange(listify.range[0], listify.range[1]);\n\t\tlet html = editor._marky.state[editor._marky.index].html;\n\t\teditor.nextSibling.value = html;\n\t\teditor.dispatchEvent(markyupdate);\n\t\treturn [listify.range[0], listify.range[1]];\n\t}\n\n\t/**\n\t * implements an indent on a selection\n\t * @requires handlers/indentHandler\n\t * @param   {Array}       indices starting and ending positions for the selection\n\t * @param   {HTMLElement} editor  the marky marked editor\n\t * @returns {Array}       the new selection after the indent is implemented\n\t */\n\tindent (indices, editor = this.editor) {\n\t\tindices = indices || [editor.selectionStart, editor.selectionEnd];\n\t\tlet indentify = indentHandler(editor.value, indices, 'in');\n\t\teditor.value = indentify.value;\n\t\teditor.setSelectionRange(indentify.range[0], indentify.range[1]);\n\t\tlet html = editor._marky.state[editor._marky.index].html;\n\t\teditor.nextSibling.value = html;\n\t\teditor.dispatchEvent(markyupdate);\n\t\treturn [indentify.range[0], indentify.range[1]];\n\t}\n\n\t/**\n\t * implements an outdent on a selection\n\t * @requires handlers/indentHandler\n\t * @param   {Array}       indices starting and ending positions for the selection\n\t * @param   {HTMLElement} editor  the marky marked editor\n\t * @returns {Array}       the new selection after the outdent is implemented\n\t */\n\toutdent (indices, editor = this.editor) {\n\t\tindices = indices || [editor.selectionStart, editor.selectionEnd];\n\t\tlet indentify = indentHandler(editor.value, indices, 'out');\n\t\teditor.value = indentify.value;\n\t\teditor.setSelectionRange(indentify.range[0], indentify.range[1]);\n\t\tlet html = editor._marky.state[editor._marky.index].html;\n\t\teditor.nextSibling.value = html;\n\t\teditor.dispatchEvent(markyupdate);\n\t\treturn [indentify.range[0], indentify.range[1]];\n\t}\n\n}\n","'use strict';\n\n// Custom Event Polyfill for IE9+\n(function () {\n\tfunction CustomEvent(event, params) {\n\t\tparams = params || {\n\t\t\tbubbles: false,\n\t\t\tcancelable: false,\n\t\t\tdetail: undefined\n\t\t};\n\t\tvar evt = document.createEvent('CustomEvent');\n\t\tevt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n\t\treturn evt;\n\t}\n\n\tCustomEvent.prototype = window.Event.prototype;\n\n\twindow.CustomEvent = CustomEvent;\n})();\n\nexport var markyblur = new CustomEvent('markyblur');\nexport var markyfocus = new CustomEvent('markyfocus');\nexport var markyselect = new CustomEvent('markyselect');\nexport var markyupdate = new CustomEvent('markyupdate');\nexport var markychange = new CustomEvent('markychange');","'use strict';\n\nimport marked from 'marked';\nimport operation from './operation';\n\n/**\n * updates the state\n * @external marked\n * @requires operation\n * @param   {String} markdown   markdown blob\n * @param   {Array}  state      the state timeline\n * @param   {Number} stateIndex the current state index\n * @returns {Object} the newly active state\n */\nexport function update (markdown, selection, state, stateIndex) {\n\tlet markedOptions = {\n\t\tsanitize: true\n\t};\n\tlet html = marked(markdown, markedOptions).toString() || '';\n\tlet newState = operation(state, stateIndex, () => {\n\t\treturn {markdown: markdown, html: html, selection: selection};\n\t});\n\treturn newState;\n}\n\n/**\n * moves backward in state\n * @param   {Number} num        the number of states to move back by\n * @param   {Array}  state      the state timeline\n * @param   {Number} stateIndex the current state index\n * @returns {Object} the newly active state\n */\nexport function undo (num, state, stateIndex) {\n\tstateIndex = (stateIndex > (num - 1)) ? stateIndex - num : 0;\n\treturn {state: state[stateIndex], index: stateIndex};\n}\n\n/**\n * moves forwardin state\n * @param   {Number} num        the number of states to move back by\n * @param   {Array}  state      the state timeline\n * @param   {Number} stateIndex the current state index\n * @returns {Object} the newly active state\n */\nexport function redo (num, state, stateIndex) {\n\tstateIndex = (stateIndex < state.length - (num + 1)) ? stateIndex + num : state.length - 1;\n\treturn {state: state[stateIndex], index: stateIndex};\n}\n","'use strict';\n\n/**\n * Handles wrapping format strings around a selection\n * @param   {String} string  the entire string to use\n * @param   {Array}  indices the starting and ending positions to wrap\n * @param   {String} mark    the format string to use\n * @returns {Object} the new string, the updated indices\n */\nexport function inlineHandler (string, indices, mark) {\n\tlet value;\n\tlet useMark = [mark, mark];\n\tif (string.indexOf(mark) !== -1) {\n\t\tfor (let index in indices) {\n\t\t\tif (string.lastIndexOf(mark, indices[index]) === indices[index] - mark.length) {\n\t\t\t\tstring = string.substring(0, indices[index] - mark.length) + string.substring(indices[index], string.length);\n\t\t\t\tif (index == 0) {\n\t\t\t\t\tindices[0] = indices[0] - mark.length;\n\t\t\t\t\tindices[1] = indices[1] - mark.length;\n\t\t\t\t} else {\n\t\t\t\t\tindices[1] = indices[1] - mark.length;\n\t\t\t\t}\n\t\t\t\tif (index == 1 && useMark[0]) indices[1] = indices[1] + mark.length;\n\t\t\t\tuseMark[index] = '';\n\t\t\t}\n\t\t\tif (string.indexOf(mark, indices[index]) == indices[index]) {\n\t\t\t\tstring = string.substring(0, indices[index]) + string.substring(indices[index] + mark.length, string.length);\n\t\t\t\tif (index == 0 && (indices[0] != indices[1])) {\n\t\t\t\t\tindices[1] = indices[1] - mark.length;\n\t\t\t\t}\n\t\t\t\tif (index == 0 && (indices[0] === indices[1])) {\n\t\t\t\t\tindices[0] = indices[0] - mark.length;\n\t\t\t\t}\n\t\t\t\tif (index == 1 && useMark[0]) indices[1] = indices[1] + mark.length;\n\t\t\t\tuseMark[index] = '';\n\t\t\t}\n\t\t}\n\t}\n\tvalue = string.substring(0, indices[0]) + useMark[0] + string.substring(indices[0], indices[1]) + useMark[1] + string.substring(indices[1], string.length);\n\treturn {value: value, range: [indices[0] + useMark[0].length, indices[1] + useMark[1].length]};\n}\n\n/**\n * Handles adding/removing a format string to a line\n * @param   {String} string  the entire string to use\n * @param   {Array}  indices the starting and ending positions to wrap\n * @param   {String} mark    the format string to use\n * @returns {Object} the new string, the updated indices\n */\nexport function blockHandler (string, indices, mark) {\n\tconst start = indices[0];\n\tconst end = indices[1];\n\tlet value;\n\tlet lineStart = string.lineStart(start);\n\tlet lineEnd = string.lineEnd(end);\n\tif (string.indexOfMatch(/^[#>]/m, lineStart) === lineStart) {\n\t\tlet currentFormat = string.substring(lineStart, lineStart + string.substring(lineStart).search(/[0-9~*`_-]|\\b|\\n|$/gm));\n\t\tvalue = string.substring(0, lineStart) + string.substring(lineStart + string.substring(lineStart).search(/[0-9~*`_-]|\\b|\\n|$/gm), string.length);\n\t\tlineEnd = lineEnd - currentFormat.length;\n\t\tif (currentFormat.trim() !== mark.trim() && mark.trim().length) {\n\t\t\tvalue = string.substring(0, lineStart) + mark + string.substring(lineStart + string.substring(lineStart).search(/[0-9~*`_-]|\\b|\\n|$/gm), string.length);\n\t\t\tlineStart = lineStart + mark.length;\n\t\t\tlineEnd = lineEnd + mark.length;\n\t\t}\n\t\treturn {value: value, range: [lineStart, lineEnd]};\n\t}\n\tvalue = string.substring(0, lineStart) + mark + string.substring(lineStart, string.length);\n\treturn {value: value, range: [start + mark.length, end + mark.length]};\n}\n\n/**\n * Handles adding/removing format strings to groups of lines\n * @param   {String} string  the entire string to use\n * @param   {Array}  indices the starting and ending positions to wrap\n * @param   {String} type    ul or ol\n * @returns {Object} the new string, the updated indices\n */\nexport function listHandler (string, indices, type) {\n\tconst start = string.lineStart(indices[0]);\n\tconst end = string.lineEnd(indices[1]);\n\tconst lines = string.substring(start, end).splitLines();\n\tlet newLines = [];\n\tlet value;\n\tlines.forEach((line, i) => {\n\t\tlet mark = (type === 'ul') ? '-' + ' ' : (i + 1) + '.' + ' ';\n\t\tlet newLine;\n\t\tif (line.indexOfMatch(/^[0-9#>-]/m, 0) === 0) {\n\t\t\tlet currentFormat = line.substring(0, 0 + line.substring(0).search(/[~*`_[!]|[a-zA-Z]|\\r|\\n|$/gm));\n\t\t\tnewLine = line.substring(line.search(/[~*`_[!]|[a-zA-Z]|\\r|\\n|$/gm), line.length);\n\t\t\tif (currentFormat.trim() !== mark.trim()) {\n\t\t\t\tnewLine = mark + line.substring(line.search(/[~*`_[!]|[a-zA-Z]|\\r|\\n|$/gm), line.length);\n\t\t\t}\n\t\t\treturn newLines.push(newLine);\n\t\t}\n\t\tnewLine = mark + line.substring(0, line.length);\n\t\treturn newLines.push(newLine);\n\t});\n\tlet joined = newLines.join('\\r\\n');\n\tvalue = string.substring(0, start) + newLines.join('\\r\\n') + string.substring(end, string.length);\n\treturn {value: value, range: [start, start + joined.replace(/\\n/gm, '').length]};\n}\n\n/**\n * Handles adding/removing indentation to groups of lines\n * @param   {String} string  the entire string to use\n * @param   {Array}  indices the starting and ending positions to wrap\n * @param   {String} type    in or out\n * @returns {Object} the new string, the updated indices\n */\nexport function indentHandler (string, indices, type) {\n\tconst start = string.lineStart(indices[0]);\n\tconst end = string.lineEnd(indices[1]);\n\tconst lines = string.substring(start, end).splitLines();\n\tlet newLines = [];\n\tlet value;\n\tlines.forEach((line) => {\n\t\tlet mark = '    ';\n\t\tlet newLine;\n\t\tif (type === 'out') {\n\t\t\tnewLine = (line.indexOf(mark, 0) === 0) ? line.substring(mark.length, line.length) : line.substring(line.search(/[~*`_[!#>-]|[a-zA-Z0-9]|\\r|\\n|$/gm), line.length);\n\t\t\treturn newLines.push(newLine);\n\t\t}\n\t\tnewLine = mark + line.substring(0, line.length);\n\t\treturn newLines.push(newLine);\n\t});\n\tlet joined = newLines.join('\\r\\n');\n\tvalue = string.substring(0, start) + newLines.join('\\r\\n') + string.substring(end, string.length);\n\treturn {value: value, range: [start, start + joined.replace(/\\n/gm, '').length]};\n}\n\n/**\n * Handles inserting a snippet at the end of a selection\n * @param   {String} string  the entire string to use\n * @param   {Array}  indices the starting and ending positions to wrap\n * @param   {String} mark    the snippet to insert\n * @returns {Object} the new string, the updated indices\n */\nexport function insertHandler (string, indices, mark) {\n\tconst start = indices[0];\n\tconst end = indices[1];\n\tlet value;\n\tvalue = string.substring(0, start) + mark + string.substring(end, string.length);\n\n\treturn {value: value, range: [start, start + mark.length]};\n}\n","'use strict';\n\nimport {Marky} from './Marky';\nimport {Element} from './Element';\nimport {HeadingButton, BoldButton, ItalicButton, StrikethroughButton, CodeButton, BlockquoteButton, LinkButton, ImageButton, UnorderedListButton, OrderedListButton, IndentButton, OutdentButton, UndoButton, RedoButton, FullscreenButton} from './Buttons';\nimport {LinkDialog, ImageDialog, HeadingDialog} from './Dialogs';\nimport {markyblur, markyfocus, markyselect, markyupdate, markychange} from './custom-events';\n\nlet timeoutID; //Used later for input events\n\n/**\n * Register and append the DOM elements needed and set the event listeners\n * @param \t{String}\ttag name to be used for initialization\n */\nexport default function (tag = 'marky-mark') {\n\tlet containers = document.getElementsByTagName(tag);\n\treturn Array.prototype.forEach.call(containers, (container, i) => {\n\t\tif (container.children.length) return;\n\t\tlet toolbar = new Element('div', 'Toolbar');\n\t\tlet id = 'marky-mark-' + i;\n\t\tcontainer.id = id;\n\t\ttoolbar.addClass(['marky-toolbar', id]);\n\n\t\tlet dialogs = new Element('div', 'Dialogs');\n\t\tdialogs.addClass(['marky-dialogs', id]);\n\n\t\tlet markyEditor = new Element('textarea', 'Marky Marked Editor');\n\t\tmarkyEditor.addClass(['marky-editor', id]);\n\t\tmarkyEditor.assign('_marky', new Marky(markyEditor.element));\n\n\t\tlet markyOutput = new Element('input', 'Marky Marked Output');\n\t\tmarkyOutput.assign('type', 'hidden');\n\t\tmarkyOutput.addClass(['marky-output', id]);\n\n\t\tlet headingDialog = new HeadingDialog('div', 'Heading Dialog', id, markyEditor);\n\t\theadingDialog.element.style.visibility = 'hidden';\n\n\t\tlet linkDialog = new LinkDialog('div', 'Link Dialog', id, markyEditor);\n\t\tlinkDialog.element.style.visibility = 'hidden';\n\n\t\tlet imageDialog = new ImageDialog('div', 'Image Dialog', id, markyEditor);\n\t\timageDialog.element.style.visibility = 'hidden';\n\n\t\tlet headingButton = new HeadingButton('button', 'Heading', id, headingDialog);\n\t\theadingButton.listen('click', function () {\n\t\t\timageDialog.element.style.visibility = 'hidden';\n\t\t\timageDialog.removeClass(['toggled']);\n\t\t\tlinkDialog.element.style.visibility = 'hidden';\n\t\t\tlinkDialog.removeClass(['toggled']);\n\t\t});\n\t\tlet boldButton = new BoldButton('button', 'Bold', id, markyEditor);\n\t\tlet italicButton = new ItalicButton('button', 'Italic', id, markyEditor);\n\t\tlet strikethroughButton = new StrikethroughButton('button', 'Strikethrough', id, markyEditor);\n\t\tlet codeButton = new CodeButton('button', 'Code', id, markyEditor);\n\t\tlet blockquoteButton = new BlockquoteButton('button', 'Blockquote', id, markyEditor);\n\t\tlet linkButton = new LinkButton('button', 'Link', id, [linkDialog, markyEditor]);\n\t\tlinkButton.listen('click', function () {\n\t\t\timageDialog.element.style.visibility = 'hidden';\n\t\t\timageDialog.removeClass(['toggled']);\n\t\t\theadingDialog.element.style.visibility = 'hidden';\n\t\t\theadingDialog.removeClass(['toggled']);\n\t\t});\n\t\tlet imageButton = new ImageButton('button', 'Image', id, [imageDialog, markyEditor]);\n\t\timageButton.listen('click', function () {\n\t\t\tlinkDialog.element.style.visibility = 'hidden';\n\t\t\tlinkDialog.removeClass(['toggled']);\n\t\t\theadingDialog.element.style.visibility = 'hidden';\n\t\t\theadingDialog.removeClass(['toggled']);\n\t\t});\n\t\tlet unorderedListButton = new UnorderedListButton('button', 'Unordered List', id, markyEditor);\n\t\tlet orderedListButton = new OrderedListButton('button', 'Ordered List', id, markyEditor);\n\t\tlet outdentButton = new OutdentButton('button', 'Outdent', id, markyEditor);\n\t\tlet indentButton = new IndentButton('button', 'Indent', id, markyEditor);\n\t\tlet undoButton = new UndoButton('button', 'Undo', id, markyEditor);\n\t\tlet redoButton = new RedoButton('button', 'Redo', id, markyEditor);\n\t\tlet fullscreenButton = new FullscreenButton('button', 'Fullscreen', id, [container, markyEditor]);\n\n\t\tlet separatorA = new Element('span');\n\t\tseparatorA.addClass(['separator']);\n\n\t\tlet separatorB = new Element('span');\n\t\tseparatorB.addClass(['separator']);\n\n\t\tlet separatorC = new Element('span');\n\t\tseparatorC.addClass(['separator']);\n\n\t\tlet separatorD = new Element('span');\n\t\tseparatorD.addClass(['separator']);\n\n\t\tlet separatorE = new Element('span');\n\t\tseparatorE.addClass(['separator']);\n\n\t\ttoolbar.appendTo(container);\n\t\tmarkyEditor.appendTo(container);\n\t\tmarkyOutput.appendTo(container);\n\t\theadingButton.appendTo(toolbar.element);\n\t\tseparatorA.appendTo(toolbar.element);\n\t\tboldButton.appendTo(toolbar.element);\n\t\titalicButton.appendTo(toolbar.element);\n\t\tstrikethroughButton.appendTo(toolbar.element);\n\t\tcodeButton.appendTo(toolbar.element);\n\t\tblockquoteButton.appendTo(toolbar.element);\n\t\tseparatorB.appendTo(toolbar.element);\n\t\tlinkButton.appendTo(toolbar.element);\n\t\timageButton.appendTo(toolbar.element);\n\t\tseparatorC.appendTo(toolbar.element);\n\t\tunorderedListButton.appendTo(toolbar.element);\n\t\torderedListButton.appendTo(toolbar.element);\n\t\toutdentButton.appendTo(toolbar.element);\n\t\tindentButton.appendTo(toolbar.element);\n\t\tseparatorD.appendTo(toolbar.element);\n\t\tundoButton.appendTo(toolbar.element);\n\t\tredoButton.appendTo(toolbar.element);\n\t\tseparatorE.appendTo(toolbar.element);\n\t\tfullscreenButton.appendTo(toolbar.element);\n\t\tdialogs.appendTo(toolbar.element);\n\t\tlinkDialog.appendTo(dialogs.element);\n\t\timageDialog.appendTo(dialogs.element);\n\t\theadingDialog.appendTo(dialogs.element);\n\n\t\tmarkyEditor.listen('markyupdate', function (e) {\n\t\t\tthis._marky.update(e.target.value, [e.target.selectionStart, e.target.selectionEnd], this._marky.state, this._marky.index);\n\t\t\treturn e.target.dispatchEvent(markychange);\n\t\t}, false);\n\n\t\tmarkyEditor.listen('markychange', function (e) {\n\t\t\tlet html = this._marky.state[this._marky.index].html;\n\t\t\tif (this._marky.index === 0)  {\n\t\t\t\tundoButton.addClass(['disabled']);\n\t\t\t} else {\n\t\t\t\tundoButton.removeClass(['disabled']);\n\t\t\t}\n\t\t\tif (this._marky.index === this._marky.state.length - 1) {\n\t\t\t\tredoButton.addClass(['disabled']);\n\t\t\t} else {\n\t\t\t\tredoButton.removeClass(['disabled']);\n\t\t\t}\n\t\t\treturn e.target.nextSibling.value = html;\n\t\t}, false);\n\n\n\t\t/**\n\t\t * Listen for input events, set timeout to update state, clear timeout from previous input\n\t\t */\n\t\tmarkyEditor.listen('input', function (e) {\n\t\t\twindow.clearTimeout(timeoutID);\n\t\t\ttimeoutID = window.setTimeout(() => {\n\t\t\t\treturn e.target.dispatchEvent(markyupdate);\n\t\t\t}, 1000);\n\t\t}, false);\n\n\t\t/**\n\t\t * Listen for change events (requires loss of focus) and update state\n\t\t */\n\t\tmarkyEditor.listen('change', function (e) {\n\t\t\treturn e.target.dispatchEvent(markyupdate);\n\t\t}, false);\n\n\t\t/**\n\t\t * Listen for pasting into the editor and update state\n\t\t */\n\t\tmarkyEditor.listen('paste', function (e) {\n\t\t\tsetTimeout(() => {\n\t\t\t\treturn e.target.dispatchEvent(markyupdate);\n\t\t\t}, 0);\n\t\t}, false);\n\n\t\t/**\n\t\t * Listen for cutting from the editor and update state\n\t\t */\n\t\tmarkyEditor.listen('cut', function (e) {\n\t\t\tsetTimeout(() => {\n\t\t\t\treturn e.target.dispatchEvent(markyupdate);\n\t\t\t}, 0);\n\t\t}, false);\n\n\t\tlet deleteSelection = 0;\n\n\t\t/**\n\t\t * Listen for keydown events, if key is delete key, set deleteSelection to length of selection\n\t\t */\n\t\tmarkyEditor.listen('keydown', function (e) {\n\t\t\tif (e.which === 8) return deleteSelection = e.target.selectionEnd - e.target.selectionStart;\n\t\t});\n\n\t\tlet keyMap = []; // Used for determining whether or not to update state on space keyup\n\t\tlet punctuations = [\n\t\t\t46, // period\n\t\t\t44, // comma\n\t\t\t63, // question mark\n\t\t\t33, // exclamation point\n\t\t\t58, // colon\n\t\t\t59, // semi-colon\n\t\t\t47, // back slash\n\t\t\t92, // forward slash\n\t\t\t38, // ampersand\n\t\t\t124, // vertical pipe\n\t\t\t32 // space\n\t\t];\n\n\t\t/**\n\t\t * Listen for keyup events, if key is space or punctuation \n\t\t * (but not a space following punctuation or another space), update state and clear input timeout.\n\t\t */\n\t\tmarkyEditor.listen('keypress', function (e) {\n\t\t\tkeyMap.push(e.which);\n\t\t\tif (keyMap.length > 2) keyMap.shift();\n\t\t\tpunctuations.forEach(punctuation => {\n\t\t\t\tif (e.which === 32 && keyMap[0] === punctuation) {\n\t\t\t\t\treturn window.clearTimeout(timeoutID);\n\t\t\t\t}\n\t\t\t\tif (e.which === punctuation) {\n\t\t\t\t\twindow.clearTimeout(timeoutID);\n\t\t\t\t\treturn e.target.dispatchEvent(markyupdate);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t/**\n\t\t * Listen for keyup events, if key is delete and it's a bulk selection, update state and clear input timeout.\n\t\t */\n\t\tmarkyEditor.listen('keyup', function (e) {\n\t\t\tif (e.which === 8 && deleteSelection > 0) {\n\t\t\t\twindow.clearTimeout(timeoutID);\n\t\t\t\tdeleteSelection = 0;\n\t\t\t\treturn e.target.dispatchEvent(markyupdate);\n\t\t\t}\n\t\t});\n\n\t\tmarkyEditor.listen('select', function (e) {\n\t\t\treturn e.target.dispatchEvent(markyselect);\n\t\t});\n\n\t\tmarkyEditor.listen('blur', function (e) {\n\t\t\treturn e.target.dispatchEvent(markyblur);\n\t\t});\n\n\t\tmarkyEditor.listen('focus', function (e) {\n\t\t\treturn e.target.dispatchEvent(markyfocus);\n\t\t});\n\t\t\n\t\tmarkyEditor.listen('click', function () {\n\t\t\timageDialog.element.style.visibility = 'hidden';\n\t\t\timageDialog.removeClass(['toggled']);\n\t\t\tlinkDialog.element.style.visibility = 'hidden';\n\t\t\tlinkDialog.removeClass(['toggled']);\n\t\t\theadingDialog.element.style.visibility = 'hidden';\n\t\t\theadingDialog.removeClass(['toggled']);\n\t\t\treturn;\n\t\t});\n\t});\n}\n","'use strict';\n\n/**\n * Handles adding and removing state\n * @param   {Array}    state      the state timeline\n * @param   {Number}   stateIndex the current state index\n * @param   {Function} fn         a function to call\n * @returns {Object}   the new timeline\n */\nexport default function (state, stateIndex, fn) {\n\tstate = state.slice(0, stateIndex + 1);\n\tlet newVersion = fn();\n\tstate.push(newVersion);\n\tstateIndex++;\n\tif (stateIndex > 999) {\n\t\tstate.shift();\n\t\tstateIndex--;\n\t}\n\treturn {state: state, index: stateIndex};\n}\n","'use strict';\n\nexport default function () {\n\t/**\n\t * Finds the first index based on a regex match\n\t * @param   {RegExp} regex a regex object\n\t * @param   {Number} index optional starting index\n\t * @returns {Number} the index of the match\n\t */\n\tString.prototype.indexOfMatch = function (regex, index) {\n\t\tvar str = (index !== null) ? this.substring(index) : this;\n\t\tvar matches = str.match(regex);\n\t\treturn matches ? str.indexOf(matches[0]) + index : -1;\n\t};\n\n\t/**\n\t * Finds the first index based on a regex match\n\t * @param   {RegExp} regex a regex object\n\t * @param   {Number} index optional starting index\n\t * @returns {Number} the index of the match\n\t */\n\tString.prototype.indicesOfMatches = function (regex, index) {\n\t\tvar str = (index !== null) ? this.substring(index) : this;\n\t\tvar matches = str.match(regex);\n\t\tvar indices = [];\n\t\tmatches.forEach(function (match, i) {\n\t\t\tlet prevIndex = indices ? indices[i - 1] : null;\n\t\t\tindices.push(str.indexOf(match, prevIndex + 1) + index);\n\t\t});\n\t\treturn indices ? indices : -1;\n\t};\n\n\t/**\n\t * Finds the last index based on a regex match\n\t * @param   {RegExp} regex a regex object\n\t * @param   {Number} index optional ending index\n\t * @returns {Number} the index of the match\n\t */\n\tString.prototype.lastIndexOfMatch = function (regex, index) {\n\t\tvar str = (index !== null) ? this.substring(0, index) : this;\n\t\tvar matches = str.match(regex);\n\t\treturn matches ? str.lastIndexOf(matches[matches.length - 1]) : -1;\n\t};\n\n\t/**\n\t * Creates an array of lines separated by line breaks\n\t * @param   {Number} index optional ending index\n\t * @returns {Array}  an array of strings\n\t */\n\tString.prototype.splitLinesBackward = function (index) {\n\t\tvar str = index ? this.substring(0, index) : this;\n\t\treturn str.split(/\\r\\n|\\r|\\n/);\n\t};\n\n\t/**\n\t * Creates an array of lines split by line breaks\n\t * @param   {Number} index optional starting index\n\t * @returns {Array}  an array of strings\n\t */\n\tString.prototype.splitLines = function (index) {\n\t\tvar str = index ? this.substring(index) : this;\n\t\treturn str.split(/\\r\\n|\\r|\\n/);\n\t};\n\n\t/**\n\t * Finds the start of a line\n\t * @param   {Number} index \toptional position\n\t * @returns {Number} the index of the line start\n\t */\n\tString.prototype.lineStart = function (index = 0) {\n\t\treturn this.lastIndexOfMatch(/^.*/gm, index);\n\t};\n\n\t/**\n\t * Finds the end of a line\n\t * @param   {Number} index \toptional position\n\t * @returns {Number} the index of the line end\n\t */\n\tString.prototype.lineEnd = function (index = 0) {\n\t\treturn this.indexOfMatch(/(\\r|\\n|$)/gm, index);\n\t};\n}\n"]}