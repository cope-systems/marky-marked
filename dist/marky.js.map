{"version":3,"sources":["node_modules/browser-pack/_prelude.js","index.js","node_modules/marked/lib/marked.js","src/marky.js","src/modules/Button.js","src/modules/Dialogs.js","src/modules/Element.js","src/modules/Icon.js","src/modules/ListItems.js","src/modules/Marky.js","src/modules/Separator.js","src/modules/custom-events.js","src/modules/dispatcher.js","src/modules/handlers.js","src/modules/mark.js","src/modules/parsers.js","src/modules/push-state.js"],"names":[],"mappings":"AAAA;ACAA;;;;;;;;;;;;;;AAUA,OAAO,OAAP;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACrwCA;;;;;;;;AAIA,IAAI,QAAQ,OAAO,MAAP,cAAR;AACJ,MAAM,IAAN;;kBAEe;;;ACPf;;;;;;;;;;;;;;;;;;;AAaO,IAAI,0BAAS,OAAO,MAAP,kBAAT;AACX,OAAO,IAAP,GAAc,UAAU,KAAV,EAAiB,EAAjB,EAAqC;AACjD,mBAAQ,IAAR,CAAa,IAAb,CAAkB,IAAlB,EAAwB,QAAxB,EAAkC,KAAlC,EAAyC,EAAzC,EADiD;AAEjD,OAAK,QAAL,CAAc,KAAK,KAAL,EAAY,KAAK,EAAL,CAA1B,CAFiD;AAGjD,OAAK,MAAL,CAAY,OAAZ,EAAqB,KAAK,KAAL,CAArB,CAHiD;AAIjD,OAAK,IAAL,GAAY,OAAO,MAAP,YAAZ,CAJiD;;oCAAb;;GAAa;;AAKjD,OAAK,IAAL,CAAU,IAAV,CAAe,WAAf,EALiD;AAMjD,OAAK,IAAL,CAAU,QAAV,CAAmB,KAAK,OAAL,CAAnB,CANiD;CAArC;;;ACdd;;;;;;;;;;;;;;;;;;AAYO,IAAI,kCAAa,OAAO,MAAP,kBAAb;AACX,WAAW,IAAX,GAAkB,UAAU,KAAV,EAAiB,EAAjB,EAAqB;AACrC,mBAAQ,IAAR,CAAa,IAAb,CAAkB,IAAlB,EAAwB,KAAxB,EAA+B,KAA/B,EAAsC,EAAtC,EADqC;AAErC,OAAK,QAAL,CAAc,KAAK,KAAL,EAAY,EAA1B,EAA8B,QAA9B,EAFqC;;AAIrC,aAAW,QAAX,GAAsB,OAAO,MAAP,kBAAtB,CAJqC;AAKrC,OAAK,QAAL,CAAc,IAAd,CAAmB,MAAnB,EAA2B,WAA3B,EALqC;AAMrC,OAAK,QAAL,CAAc,MAAd,CAAqB,IAArB,EAA2B,KAAK,EAAL,GAAU,YAAV,CAA3B,CANqC;;AAQrC,OAAK,YAAL,GAAoB,OAAO,MAAP,kBAApB,CARqC;AASrC,OAAK,YAAL,CAAkB,IAAlB,CAAuB,OAAvB,EAAgC,UAAhC,EATqC;AAUrC,OAAK,YAAL,CAAkB,QAAlB,CAA2B,gBAA3B,EAVqC;AAWrC,OAAK,YAAL,CAAkB,MAAlB,CAAyB,MAAzB,EAAiC,MAAjC,EAXqC;AAYrC,OAAK,YAAL,CAAkB,MAAlB,CAAyB,MAAzB,EAAiC,KAAK,EAAL,GAAU,iBAAV,CAAjC,CAZqC;AAarC,OAAK,YAAL,CAAkB,MAAlB,CAAyB,aAAzB,EAAwC,gBAAxC,EAbqC;;AAerC,OAAK,gBAAL,GAAwB,OAAO,MAAP,kBAAxB,CAfqC;AAgBrC,OAAK,gBAAL,CAAsB,IAAtB,CAA2B,OAA3B,EAAoC,cAApC,EAhBqC;AAiBrC,OAAK,gBAAL,CAAsB,QAAtB,CAA+B,oBAA/B,EAjBqC;AAkBrC,OAAK,gBAAL,CAAsB,MAAtB,CAA6B,MAA7B,EAAqC,MAArC,EAlBqC;AAmBrC,OAAK,gBAAL,CAAsB,MAAtB,CAA6B,MAA7B,EAAqC,KAAK,EAAL,GAAU,qBAAV,CAArC,CAnBqC;AAoBrC,OAAK,gBAAL,CAAsB,MAAtB,CAA6B,aAA7B,EAA4C,cAA5C,EApBqC;;AAsBrC,OAAK,YAAL,GAAoB,OAAO,MAAP,kBAApB,CAtBqC;AAuBrC,OAAK,YAAL,CAAkB,IAAlB,CAAuB,QAAvB,EAAiC,aAAjC,EAvBqC;AAwBrC,OAAK,YAAL,CAAkB,QAAlB,CAA2B,aAA3B,EAxBqC;AAyBrC,OAAK,YAAL,CAAkB,MAAlB,CAAyB,aAAzB,EAAwC,QAAxC,EAzBqC;;AA2BrC,OAAK,YAAL,CAAkB,QAAlB,CAA2B,KAAK,QAAL,CAAc,OAAd,CAA3B,CA3BqC;AA4BrC,OAAK,gBAAL,CAAsB,QAAtB,CAA+B,KAAK,QAAL,CAAc,OAAd,CAA/B,CA5BqC;AA6BrC,OAAK,YAAL,CAAkB,QAAlB,CAA2B,KAAK,QAAL,CAAc,OAAd,CAA3B,CA7BqC;AA8BrC,OAAK,QAAL,CAAc,QAAd,CAAuB,KAAK,OAAL,CAAvB,CA9BqC;CAArB;;AAiCX,IAAI,oCAAc,OAAO,MAAP,kBAAd;AACX,YAAY,IAAZ,GAAmB,UAAU,KAAV,EAAiB,EAAjB,EAAqB;AACtC,mBAAQ,IAAR,CAAa,IAAb,CAAkB,IAAlB,EAAwB,KAAxB,EAA+B,KAA/B,EAAsC,EAAtC,EADsC;AAEtC,OAAK,QAAL,CAAc,KAAK,KAAL,EAAY,EAA1B,EAA8B,QAA9B,EAFsC;;AAItC,cAAY,SAAZ,GAAwB,OAAO,MAAP,kBAAxB,CAJsC;AAKtC,OAAK,SAAL,CAAe,IAAf,CAAoB,MAApB,EAA4B,YAA5B,EALsC;AAMtC,OAAK,SAAL,CAAe,MAAf,CAAsB,IAAtB,EAA4B,KAAK,EAAL,GAAU,aAAV,CAA5B,CANsC;;AAQtC,OAAK,gBAAL,GAAwB,OAAO,MAAP,kBAAxB,CARsC;AAStC,OAAK,gBAAL,CAAsB,IAAtB,CAA2B,OAA3B,EAAoC,cAApC,EATsC;AAUtC,OAAK,gBAAL,CAAsB,QAAtB,CAA+B,oBAA/B,EAVsC;AAWtC,OAAK,gBAAL,CAAsB,MAAtB,CAA6B,MAA7B,EAAqC,MAArC,EAXsC;AAYtC,OAAK,gBAAL,CAAsB,MAAtB,CAA6B,MAA7B,EAAqC,KAAK,EAAL,GAAU,qBAAV,CAArC,CAZsC;AAatC,OAAK,gBAAL,CAAsB,MAAtB,CAA6B,aAA7B,EAA4C,0BAA5C,EAbsC;;AAetC,OAAK,aAAL,GAAqB,OAAO,MAAP,kBAArB,CAfsC;AAgBtC,OAAK,aAAL,CAAmB,IAAnB,CAAwB,OAAxB,EAAiC,WAAjC,EAhBsC;AAiBtC,OAAK,aAAL,CAAmB,QAAnB,CAA4B,iBAA5B,EAjBsC;AAkBtC,OAAK,aAAL,CAAmB,MAAnB,CAA0B,MAA1B,EAAkC,MAAlC,EAlBsC;AAmBtC,OAAK,aAAL,CAAmB,MAAnB,CAA0B,MAA1B,EAAkC,KAAK,EAAL,GAAU,kBAAV,CAAlC,CAnBsC;AAoBtC,OAAK,aAAL,CAAmB,MAAnB,CAA0B,aAA1B,EAAyC,UAAzC,EApBsC;;AAsBtC,OAAK,YAAL,GAAoB,OAAO,MAAP,kBAApB,CAtBsC;AAuBtC,OAAK,YAAL,CAAkB,IAAlB,CAAuB,QAAvB,EAAiC,cAAjC,EAvBsC;AAwBtC,OAAK,YAAL,CAAkB,QAAlB,CAA2B,cAA3B,EAxBsC;AAyBtC,OAAK,YAAL,CAAkB,MAAlB,CAAyB,aAAzB,EAAwC,QAAxC,EAzBsC;;AA2BtC,OAAK,gBAAL,CAAsB,QAAtB,CAA+B,KAAK,SAAL,CAAe,OAAf,CAA/B,CA3BsC;AA4BtC,OAAK,aAAL,CAAmB,QAAnB,CAA4B,KAAK,SAAL,CAAe,OAAf,CAA5B,CA5BsC;AA6BtC,OAAK,YAAL,CAAkB,QAAlB,CAA2B,KAAK,SAAL,CAAe,OAAf,CAA3B,CA7BsC;AA8BtC,OAAK,SAAL,CAAe,QAAf,CAAwB,KAAK,OAAL,CAAxB,CA9BsC;CAArB;;AAiCZ,IAAI,wCAAgB,OAAO,MAAP,kBAAhB;AACX,cAAc,IAAd,GAAqB,UAAU,KAAV,EAAiB,EAAjB,EAAqB;;;AACxC,mBAAQ,IAAR,CAAa,IAAb,CAAkB,IAAlB,EAAwB,KAAxB,EAA+B,KAA/B,EAAsC,EAAtC,EADwC;AAExC,OAAK,QAAL,CAAc,KAAK,KAAL,EAAY,EAA1B,EAA8B,QAA9B,EAFwC;;AAIxC,OAAK,WAAL,GAAmB,OAAO,MAAP,kBAAnB,CAJwC;AAKxC,OAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,EAA4B,cAA5B,EALwC;AAMxC,OAAK,WAAL,CAAiB,MAAjB,CAAwB,IAAxB,EAA8B,KAAK,eAAL,CAA9B,CANwC;;AAQxC,OAAK,OAAL,GAAe,EAAf,CARwC;;AAUxC,OAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,CAAJ,EAAO,GAAvB,EAA4B;AAC1B,QAAI,SAAS,OAAO,MAAP,wBAAT,CADsB;AAE1B,WAAO,IAAP,CAAY,cAAc,IAAI,CAAJ,CAAd,EAAsB,IAAI,CAAJ,CAAlC,CAF0B;AAG1B,SAAK,OAAL,CAAa,IAAb,CAAkB,MAAlB,EAH0B;GAA5B;;AAMA,MAAI,SAAS,OAAO,MAAP,wBAAT,CAhBoC;AAiBxC,SAAO,IAAP,CAAY,gBAAZ,EAA8B,GAA9B,EAAmC,IAAnC,EAAyC,WAAzC,EAjBwC;AAkBxC,OAAK,OAAL,CAAa,IAAb,CAAkB,MAAlB,EAlBwC;;AAoBxC,OAAK,OAAL,CAAa,OAAb,CAAqB,UAAC,MAAD,EAAY;AAC/B,WAAO,QAAP,CAAgB,MAAK,WAAL,CAAiB,OAAjB,CAAhB,CAD+B;GAAZ,CAArB,CApBwC;;AAwBxC,OAAK,WAAL,CAAiB,QAAjB,CAA0B,KAAK,OAAL,CAA1B,CAxBwC;CAArB;;;ACjFrB;;;;;;;;;;;;AAQO,IAAI,4BAAU;AACnB,sBAAM,MAA+B;QAAzB,8DAAQ,oBAAiB;QAAX,2DAAK,oBAAM;;AACnC,SAAK,IAAL,GAAY,IAAZ,CADmC;AAEnC,SAAK,KAAL,GAAa,KAAb,CAFmC;AAGnC,SAAK,EAAL,GAAU,EAAV,CAHmC;AAInC,SAAK,OAAL,GAAe,KAAK,QAAL,EAAf,CAJmC;AAKnC,QAAI,KAAK,KAAL,EAAY,KAAK,OAAL,CAAa,KAAb,GAAqB,KAAK,KAAL,CAArC;GANiB;AAQnB,gCAAY;AACV,WAAO,SAAS,aAAT,CAAuB,KAAK,IAAL,CAA9B,CADU;GARO;AAWnB,0BAAQ,MAAM,OAAO;AACnB,SAAK,OAAL,CAAa,IAAb,IAAqB,KAArB,CADmB;GAXF;AAcnB,8BAAU,WAAW;AACnB,cAAU,WAAV,CAAsB,KAAK,OAAL,CAAtB,CADmB;GAdF;AAiBnB,gCAAyB;;;sCAAZ;;KAAY;;AACvB,eAAW,OAAX,CAAmB,UAAC,SAAD,EAAe;AAChC,YAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,UAAU,OAAV,CAAkB,MAAlB,EAA0B,GAA1B,EAA+B,WAA/B,EAA3B,EADgC;KAAf,CAAnB,CADuB;GAjBN;AAsBnB,sCAA4B;;;uCAAZ;;KAAY;;AAC1B,eAAW,OAAX,CAAmB,UAAC,SAAD,EAAe;AAChC,aAAK,OAAL,CAAa,SAAb,CAAuB,MAAvB,CAA8B,UAAU,OAAV,CAAkB,MAAlB,EAA0B,GAA1B,EAA+B,WAA/B,EAA9B,EADgC;KAAf,CAAnB,CAD0B;GAtBT;AA2BnB,0BAAQ,KAAK,IAAI;AACf,SAAK,OAAL,CAAa,gBAAb,CAA8B,GAA9B,EAAmC,EAAnC,EADe;GA3BE;CAAV;;;;;;;;;;;;;;;;;;;ACDJ,IAAI,sBAAO,OAAO,MAAP,kBAAP;AACX,KAAK,IAAL,GAAY,UAAU,UAAV,EAAsB;AAChC,mBAAQ,IAAR,CAAa,IAAb,CAAkB,IAAlB,EAAwB,GAAxB,EADgC;AAEhC,OAAK,QAAL,gCAAiB,WAAjB,EAFgC;CAAtB;;;ACRZ;;;;;;;;;;;;;;;;;;;AAaO,IAAI,oCAAc,OAAO,MAAP,kBAAd;AACX,YAAY,IAAZ,GAAmB,UAAU,KAAV,EAAiB,KAAjB,EAAwC;AACzD,mBAAQ,IAAR,CAAa,IAAb,CAAkB,IAAlB,EAAwB,IAAxB,EAA8B,KAA9B,EADyD;AAEzD,OAAK,QAAL,CAAc,KAAK,KAAL,CAAW,OAAX,CAAmB,GAAnB,EAAwB,GAAxB,CAAd,EAFyD;AAGzD,OAAK,MAAL,CAAY,OAAZ,EAAqB,KAArB,EAHyD;;AAKzD,OAAK,MAAL,GAAc,OAAO,MAAP,kBAAd,CALyD;AAMzD,OAAK,MAAL,CAAY,IAAZ,CAAiB,QAAjB,EAA2B,KAA3B,EANyD;AAOzD,OAAK,MAAL,CAAY,MAAZ,CAAmB,OAAnB,EAA4B,KAA5B,EAPyD;AAQzD,OAAK,MAAL,CAAY,QAAZ,CAAqB,gBAArB,EARyD;AASzD,OAAK,MAAL,CAAY,QAAZ,CAAqB,KAAK,OAAL,CAArB,CATyD;;oCAAb;;GAAa;;AAWzD,MAAI,YAAY,MAAZ,EAAoB;AACtB,SAAK,IAAL,GAAY,OAAO,MAAP,YAAZ,CADsB;AAEtB,SAAK,IAAL,CAAU,IAAV,CAAe,WAAf,EAFsB;AAGtB,SAAK,IAAL,CAAU,QAAV,CAAmB,KAAK,MAAL,CAAY,OAAZ,CAAnB,CAHsB;GAAxB,MAIO;AACL,SAAK,MAAL,CAAY,MAAZ,CAAmB,aAAnB,EAAkC,KAAlC,EADK;GAJP;CAXiB;;;ACdnB;;;;;;;;;;;;;IAGY;;;;;;;;;;AAIL,IAAI,wBAAQ;AACjB,sBAAM,QAAQ,WAAW;AACvB,SAAK,IAAL,kBADuB;AAEvB,SAAK,KAAL,GAAa,CAAC,EAAC,UAAU,EAAV,EAAc,MAAM,EAAN,EAAU,WAAW,CAAC,CAAD,EAAI,CAAJ,CAAX,EAA1B,CAAb,CAFuB;AAGvB,SAAK,KAAL,GAAa,CAAb,CAHuB;AAIvB,SAAK,MAAL,GAAc,MAAd,CAJuB;AAKvB,SAAK,SAAL,GAAiB,SAAjB,CALuB;GADR;;;;;;;AAajB,8BAAqC;QAA5B,kEAAY,KAAK,SAAL,gBAAgB;;AACnC,QAAI,UAAU,UAAV,EAAsB;AACxB,gBAAU,UAAV,CAAqB,WAArB,CAAiC,SAAjC,EADwB;KAA1B;GAde;;;;;;;;;;AA0BjB,0BAAQ,UAA4F;QAAlF,kEAAY,CAAC,CAAD,EAAI,CAAJ,iBAAsE;QAA9D,8DAAQ,KAAK,KAAL,gBAAsD;QAA1C,8DAAQ,KAAK,KAAL,gBAAkC;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AAClG,QAAM,SAAS,WAAW,MAAX,CAAkB,QAAlB,EAA4B,SAA5B,EAAuC,KAAvC,EAA8C,KAA9C,CAAT,CAD4F;AAElG,SAAK,KAAL,GAAa,OAAO,KAAP,CAFqF;AAGlG,SAAK,KAAL,GAAa,OAAO,KAAP,CAHqF;AAIlG,WAAO,aAAP,4BAJkG;AAKlG,WAAO,KAAK,KAAL,CAL2F;GA1BnF;;;;;;;;;;;;AA2CjB,wBAA6E;QAAvE,4DAAM,iBAAiE;QAA9D,8DAAQ,KAAK,KAAL,gBAAsD;QAA1C,8DAAQ,KAAK,KAAL,gBAAkC;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AAC3E,QAAI,UAAU,CAAV,EAAa,OAAO,KAAP,CAAjB;;AAEA,QAAM,SAAS,WAAW,IAAX,CAAgB,GAAhB,EAAqB,KAArB,EAA4B,KAA5B,CAAT,CAHqE;AAI3E,SAAK,KAAL,GAAa,OAAO,KAAP,CAJ8D;AAK3E,WAAO,KAAP,GAAe,OAAO,KAAP,CAAa,QAAb,CAL4D;AAM3E,WAAO,iBAAP,CAAyB,OAAO,KAAP,CAAa,SAAb,CAAuB,CAAvB,CAAzB,EAAoD,OAAO,KAAP,CAAa,SAAb,CAAuB,CAAvB,CAApD,EAN2E;AAO3E,WAAO,WAAP,CAAmB,KAAnB,GAA2B,OAAO,KAAP,CAAa,IAAb,CAPgD;AAQ3E,WAAO,aAAP,4BAR2E;AAS3E,WAAO,KAAK,KAAL,CAToE;GA3C5D;;;;;;;;;;;;AAgEjB,wBAA6E;QAAvE,4DAAM,iBAAiE;QAA9D,8DAAQ,KAAK,KAAL,gBAAsD;QAA1C,8DAAQ,KAAK,KAAL,gBAAkC;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AAC3E,QAAI,UAAU,MAAM,MAAN,GAAe,CAAf,EAAkB,OAAO,KAAP,CAAhC;;AAEA,QAAM,SAAS,WAAW,IAAX,CAAgB,GAAhB,EAAqB,KAArB,EAA4B,KAA5B,CAAT,CAHqE;AAI3E,SAAK,KAAL,GAAa,OAAO,KAAP,CAJ8D;AAK3E,WAAO,KAAP,GAAe,OAAO,KAAP,CAAa,QAAb,CAL4D;AAM3E,WAAO,iBAAP,CAAyB,OAAO,KAAP,CAAa,SAAb,CAAuB,CAAvB,CAAzB,EAAoD,OAAO,KAAP,CAAa,SAAb,CAAuB,CAAvB,CAApD,EAN2E;AAO3E,WAAO,WAAP,CAAmB,KAAnB,GAA2B,OAAO,KAAP,CAAa,IAAb,CAPgD;AAQ3E,WAAO,aAAP,4BAR2E;AAS3E,WAAO,KAAK,KAAL,CAToE;GAhE5D;;;;;;;;;AAkFjB,wCAAkD;QAApC,4DAAM,CAAC,CAAD,EAAI,CAAJ,iBAA8B;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AAChD,WAAO,iBAAP,CAAyB,IAAI,CAAJ,CAAzB,EAAiC,IAAI,CAAJ,CAAjC,EADgD;AAEhD,WAAO,GAAP,CAFgD;GAlFjC;;;;;;;;;AA6FjB,4DAAuD;QAA/B,4DAAM,iBAAyB;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AACrD,QAAM,QAAQ,OAAO,cAAP,CADuC;AAErD,QAAM,MAAM,OAAO,YAAP,GAAsB,GAAtB,CAFyC;;AAIrD,WAAO,iBAAP,CAAyB,KAAzB,EAAgC,GAAhC,EAJqD;AAKrD,WAAO,CAAC,KAAD,EAAQ,GAAR,CAAP,CALqD;GA7FtC;;;;;;;;;AA2GjB,8DAAwD;QAA/B,4DAAM,iBAAyB;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AACtD,QAAM,QAAQ,OAAO,cAAP,GAAwB,GAAxB,CADwC;AAEtD,QAAM,MAAM,OAAO,YAAP,CAF0C;;AAItD,WAAO,iBAAP,CAAyB,KAAzB,EAAgC,GAAhC,EAJsD;AAKtD,WAAO,CAAC,KAAD,EAAQ,GAAR,CAAP,CALsD;GA3GvC;;;;;;;;;AAyHjB,oDAAmD;QAA/B,4DAAM,iBAAyB;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AACjD,QAAM,QAAQ,OAAO,cAAP,GAAwB,GAAxB,CADmC;;AAGjD,WAAO,iBAAP,CAAyB,KAAzB,EAAgC,KAAhC,EAHiD;AAIjD,WAAO,KAAP,CAJiD;GAzHlC;;;;;;;;;AAsIjB,kDAAkD;QAA/B,4DAAM,iBAAyB;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AAChD,QAAM,QAAQ,OAAO,cAAP,GAAwB,GAAxB,CADkC;;AAGhD,WAAO,iBAAP,CAAyB,KAAzB,EAAgC,KAAhC,EAHgD;AAIhD,WAAO,KAAP,CAJgD;GAtIjC;;;;;;;;;;AAoJjB,sBAAM,SAA+B;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AACnC,cAAU,WAAW,CAAC,OAAO,cAAP,EAAuB,OAAO,YAAP,CAAnC,CADyB;AAEnC,QAAI,UAAU,6BAAc,OAAO,KAAP,EAAc,OAA5B,EAAqC,IAArC,CAAV,CAF+B;AAGnC,WAAO,KAAP,GAAe,QAAQ,KAAR,CAHoB;AAInC,WAAO,iBAAP,CAAyB,QAAQ,KAAR,CAAc,CAAd,CAAzB,EAA2C,QAAQ,KAAR,CAAc,CAAd,CAA3C,EAJmC;AAKnC,QAAI,OAAO,OAAO,MAAP,CAAc,KAAd,CAAoB,OAAO,MAAP,CAAc,KAAd,CAApB,CAAyC,IAAzC,CALwB;AAMnC,WAAO,WAAP,CAAmB,KAAnB,GAA2B,IAA3B,CANmC;AAOnC,WAAO,aAAP,4BAPmC;AAQnC,WAAO,CAAC,QAAQ,KAAR,CAAc,CAAd,CAAD,EAAmB,QAAQ,KAAR,CAAc,CAAd,CAAnB,CAAP,CARmC;GApJpB;;;;;;;;;;AAsKjB,0BAAQ,SAA+B;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AACrC,cAAU,WAAW,CAAC,OAAO,cAAP,EAAuB,OAAO,YAAP,CAAnC,CAD2B;AAErC,QAAI,YAAY,6BAAc,OAAO,KAAP,EAAc,OAA5B,EAAqC,GAArC,CAAZ,CAFiC;AAGrC,WAAO,KAAP,GAAe,UAAU,KAAV,CAHsB;AAIrC,WAAO,iBAAP,CAAyB,UAAU,KAAV,CAAgB,CAAhB,CAAzB,EAA6C,UAAU,KAAV,CAAgB,CAAhB,CAA7C,EAJqC;AAKrC,QAAI,OAAO,OAAO,MAAP,CAAc,KAAd,CAAoB,OAAO,MAAP,CAAc,KAAd,CAApB,CAAyC,IAAzC,CAL0B;AAMrC,WAAO,WAAP,CAAmB,KAAnB,GAA2B,IAA3B,CANqC;AAOrC,WAAO,aAAP,4BAPqC;AAQrC,WAAO,CAAC,UAAU,KAAV,CAAgB,CAAhB,CAAD,EAAqB,UAAU,KAAV,CAAgB,CAAhB,CAArB,CAAP,CARqC;GAtKtB;;;;;;;;;;AAwLjB,wCAAe,SAA+B;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AAC5C,cAAU,WAAW,CAAC,OAAO,cAAP,EAAuB,OAAO,YAAP,CAAnC,CADkC;AAE5C,QAAI,aAAa,6BAAc,OAAO,KAAP,EAAc,OAA5B,EAAqC,IAArC,CAAb,CAFwC;AAG5C,WAAO,KAAP,GAAe,WAAW,KAAX,CAH6B;AAI5C,WAAO,iBAAP,CAAyB,WAAW,KAAX,CAAiB,CAAjB,CAAzB,EAA8C,WAAW,KAAX,CAAiB,CAAjB,CAA9C,EAJ4C;AAK5C,QAAI,OAAO,OAAO,MAAP,CAAc,KAAd,CAAoB,OAAO,MAAP,CAAc,KAAd,CAApB,CAAyC,IAAzC,CALiC;AAM5C,WAAO,WAAP,CAAmB,KAAnB,GAA2B,IAA3B,CAN4C;AAO5C,WAAO,aAAP,4BAP4C;AAQ5C,WAAO,CAAC,WAAW,KAAX,CAAiB,CAAjB,CAAD,EAAsB,WAAW,KAAX,CAAiB,CAAjB,CAAtB,CAAP,CAR4C;GAxL7B;;;;;;;;;;AA0MjB,sBAAM,SAA+B;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AACnC,cAAU,WAAW,CAAC,OAAO,cAAP,EAAuB,OAAO,YAAP,CAAnC,CADyB;AAEnC,QAAI,SAAS,6BAAc,OAAO,KAAP,EAAc,OAA5B,EAAqC,GAArC,CAAT,CAF+B;AAGnC,WAAO,KAAP,GAAe,OAAO,KAAP,CAHoB;AAInC,WAAO,iBAAP,CAAyB,OAAO,KAAP,CAAa,CAAb,CAAzB,EAA0C,OAAO,KAAP,CAAa,CAAb,CAA1C,EAJmC;AAKnC,QAAI,OAAO,OAAO,MAAP,CAAc,KAAd,CAAoB,OAAO,MAAP,CAAc,KAAd,CAApB,CAAyC,IAAzC,CALwB;AAMnC,WAAO,WAAP,CAAmB,KAAnB,GAA2B,IAA3B,CANmC;AAOnC,WAAO,aAAP,4BAPmC;AAQnC,WAAO,CAAC,OAAO,KAAP,CAAa,CAAb,CAAD,EAAkB,OAAO,KAAP,CAAa,CAAb,CAAlB,CAAP,CARmC;GA1MpB;;;;;;;;;;AA4NjB,kCAAY,SAA+B;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AACzC,cAAU,WAAW,CAAC,OAAO,cAAP,EAAuB,OAAO,YAAP,CAAnC,CAD+B;AAEzC,QAAI,UAAU,4BAAa,OAAO,KAAP,EAAc,OAA3B,EAAoC,IAApC,CAAV,CAFqC;AAGzC,WAAO,KAAP,GAAe,QAAQ,KAAR,CAH0B;AAIzC,WAAO,iBAAP,CAAyB,QAAQ,KAAR,CAAc,CAAd,CAAzB,EAA2C,QAAQ,KAAR,CAAc,CAAd,CAA3C,EAJyC;AAKzC,QAAI,OAAO,OAAO,MAAP,CAAc,KAAd,CAAoB,OAAO,MAAP,CAAc,KAAd,CAApB,CAAyC,IAAzC,CAL8B;AAMzC,WAAO,WAAP,CAAmB,KAAnB,GAA2B,IAA3B,CANyC;AAOzC,WAAO,aAAP,4BAPyC;AAQzC,WAAO,CAAC,QAAQ,KAAR,CAAc,CAAd,CAAD,EAAmB,QAAQ,KAAR,CAAc,CAAd,CAAnB,CAAP,CARyC;GA5N1B;;;;;;;;;;AA8OjB,8BAAmD;QAA1C,8DAAQ,iBAAkC;QAA/B,uBAA+B;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AACjD,cAAU,WAAW,CAAC,OAAO,cAAP,EAAuB,OAAO,YAAP,CAAnC,CADuC;AAEjD,QAAI,UAAU,EAAV,CAF6C;AAGjD,QAAI,gBAAJ,CAHiD;AAIjD,SAAK,IAAI,IAAI,CAAJ,EAAO,KAAK,KAAL,EAAY,GAA5B,EAAiC;AAC/B,cAAQ,IAAR,CAAa,GAAb,EAD+B;KAAjC;AAGA,WAAO,QAAQ,IAAR,CAAa,EAAb,CAAP,CAPiD;AAQjD,QAAI,QAAQ,OAAO,GAAP,GAAa,EAAb,CARqC;AASjD,QAAI,aAAa,4BAAa,OAAO,KAAP,EAAc,OAA3B,EAAoC,OAAO,KAAP,CAAjD,CAT6C;AAUjD,WAAO,KAAP,GAAe,WAAW,KAAX,CAVkC;AAWjD,WAAO,iBAAP,CAAyB,WAAW,KAAX,CAAiB,CAAjB,CAAzB,EAA8C,WAAW,KAAX,CAAiB,CAAjB,CAA9C,EAXiD;AAYjD,QAAI,OAAO,OAAO,MAAP,CAAc,KAAd,CAAoB,OAAO,MAAP,CAAc,KAAd,CAApB,CAAyC,IAAzC,CAZsC;AAajD,WAAO,WAAP,CAAmB,KAAnB,GAA2B,IAA3B,CAbiD;AAcjD,WAAO,aAAP,4BAdiD;AAejD,WAAO,CAAC,WAAW,KAAX,CAAiB,CAAjB,CAAD,EAAsB,WAAW,KAAX,CAAiB,CAAjB,CAAtB,CAAP,CAfiD;GA9OlC;;;;;;;;;;AAuQjB,sBAAM,SAAmF;QAA1E,4DAAM,gCAAoE;QAAlD,gEAAU,gCAAwC;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AACvF,cAAU,WAAW,CAAC,OAAO,cAAP,EAAuB,OAAO,YAAP,CAAnC,CAD6E;AAEvF,QAAM,OAAO,MAAM,OAAN,GAAgB,IAAhB,GAAuB,GAAvB,GAA6B,GAA7B,CAF0E;AAGvF,QAAI,UAAU,6BAAc,OAAO,KAAP,EAAc,OAA5B,EAAqC,IAArC,CAAV,CAHmF;AAIvF,WAAO,KAAP,GAAe,QAAQ,KAAR,CAJwE;AAKvF,WAAO,iBAAP,CAAyB,QAAQ,KAAR,CAAc,CAAd,CAAzB,EAA2C,QAAQ,KAAR,CAAc,CAAd,CAA3C,EALuF;AAMvF,QAAI,OAAO,OAAO,MAAP,CAAc,KAAd,CAAoB,OAAO,MAAP,CAAc,KAAd,CAApB,CAAyC,IAAzC,CAN4E;AAOvF,WAAO,WAAP,CAAmB,KAAnB,GAA2B,IAA3B,CAPuF;AAQvF,WAAO,aAAP,4BARuF;AASvF,WAAO,CAAC,QAAQ,KAAR,CAAc,CAAd,CAAD,EAAmB,QAAQ,KAAR,CAAc,CAAd,CAAnB,CAAP,CATuF;GAvQxE;;;;;;;;;;AA0RjB,wBAAO,SAAsH;QAA7G,+DAAS,kDAAoG;QAAhE,4DAAM,kDAA0D;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AAC3H,cAAU,WAAW,CAAC,OAAO,cAAP,EAAuB,OAAO,YAAP,CAAnC,CADiH;AAE3H,QAAM,OAAO,OAAO,GAAP,GAAa,IAAb,GAAoB,MAApB,GAA6B,GAA7B,CAF8G;AAG3H,QAAI,WAAW,6BAAc,OAAO,KAAP,EAAc,OAA5B,EAAqC,IAArC,CAAX,CAHuH;AAI3H,WAAO,KAAP,GAAe,SAAS,KAAT,CAJ4G;AAK3H,WAAO,iBAAP,CAAyB,SAAS,KAAT,CAAe,CAAf,CAAzB,EAA4C,SAAS,KAAT,CAAe,CAAf,CAA5C,EAL2H;AAM3H,QAAI,OAAO,OAAO,MAAP,CAAc,KAAd,CAAoB,OAAO,MAAP,CAAc,KAAd,CAApB,CAAyC,IAAzC,CANgH;AAO3H,WAAO,WAAP,CAAmB,KAAnB,GAA2B,IAA3B,CAP2H;AAQ3H,WAAO,aAAP,4BAR2H;AAS3H,WAAO,CAAC,SAAS,KAAT,CAAe,CAAf,CAAD,EAAoB,SAAS,KAAT,CAAe,CAAf,CAApB,CAAP,CAT2H;GA1R5G;;;;;;;;;;AA6SjB,wCAAe,SAA+B;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AAC5C,cAAU,WAAW,CAAC,OAAO,cAAP,EAAuB,OAAO,YAAP,CAAnC,CADkC;AAE5C,QAAI,UAAU,2BAAY,OAAO,KAAP,EAAc,OAA1B,EAAmC,IAAnC,CAAV,CAFwC;AAG5C,WAAO,KAAP,GAAe,QAAQ,KAAR,CAH6B;AAI5C,WAAO,iBAAP,CAAyB,QAAQ,KAAR,CAAc,CAAd,CAAzB,EAA2C,QAAQ,KAAR,CAAc,CAAd,CAA3C,EAJ4C;AAK5C,QAAI,OAAO,OAAO,MAAP,CAAc,KAAd,CAAoB,OAAO,MAAP,CAAc,KAAd,CAApB,CAAyC,IAAzC,CALiC;AAM5C,WAAO,WAAP,CAAmB,KAAnB,GAA2B,IAA3B,CAN4C;AAO5C,WAAO,aAAP,4BAP4C;AAQ5C,WAAO,CAAC,QAAQ,KAAR,CAAc,CAAd,CAAD,EAAmB,QAAQ,KAAR,CAAc,CAAd,CAAnB,CAAP,CAR4C;GA7S7B;;;;;;;;;;AA+TjB,oCAAa,SAA+B;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AAC1C,cAAU,WAAW,CAAC,OAAO,cAAP,EAAuB,OAAO,YAAP,CAAnC,CADgC;AAE1C,QAAI,UAAU,2BAAY,OAAO,KAAP,EAAc,OAA1B,EAAmC,IAAnC,CAAV,CAFsC;AAG1C,WAAO,KAAP,GAAe,QAAQ,KAAR,CAH2B;AAI1C,WAAO,iBAAP,CAAyB,QAAQ,KAAR,CAAc,CAAd,CAAzB,EAA2C,QAAQ,KAAR,CAAc,CAAd,CAA3C,EAJ0C;AAK1C,QAAI,OAAO,OAAO,MAAP,CAAc,KAAd,CAAoB,OAAO,MAAP,CAAc,KAAd,CAApB,CAAyC,IAAzC,CAL+B;AAM1C,WAAO,WAAP,CAAmB,KAAnB,GAA2B,IAA3B,CAN0C;AAO1C,WAAO,aAAP,4BAP0C;AAQ1C,WAAO,CAAC,QAAQ,KAAR,CAAc,CAAd,CAAD,EAAmB,QAAQ,KAAR,CAAc,CAAd,CAAnB,CAAP,CAR0C;GA/T3B;;;;;;;;;;AAiVjB,0BAAQ,SAA+B;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AACrC,cAAU,WAAW,CAAC,OAAO,cAAP,EAAuB,OAAO,YAAP,CAAnC,CAD2B;AAErC,QAAI,YAAY,6BAAc,OAAO,KAAP,EAAc,OAA5B,EAAqC,IAArC,CAAZ,CAFiC;AAGrC,WAAO,KAAP,GAAe,UAAU,KAAV,CAHsB;AAIrC,WAAO,iBAAP,CAAyB,UAAU,KAAV,CAAgB,CAAhB,CAAzB,EAA6C,UAAU,KAAV,CAAgB,CAAhB,CAA7C,EAJqC;AAKrC,QAAI,OAAO,OAAO,MAAP,CAAc,KAAd,CAAoB,OAAO,MAAP,CAAc,KAAd,CAApB,CAAyC,IAAzC,CAL0B;AAMrC,WAAO,WAAP,CAAmB,KAAnB,GAA2B,IAA3B,CANqC;AAOrC,WAAO,aAAP,4BAPqC;AAQrC,WAAO,CAAC,UAAU,KAAV,CAAgB,CAAhB,CAAD,EAAqB,UAAU,KAAV,CAAgB,CAAhB,CAArB,CAAP,CARqC;GAjVtB;;;;;;;;;;AAmWjB,4BAAS,SAA+B;QAAtB,+DAAS,KAAK,MAAL,gBAAa;;AACtC,cAAU,WAAW,CAAC,OAAO,cAAP,EAAuB,OAAO,YAAP,CAAnC,CAD4B;AAEtC,QAAI,YAAY,6BAAc,OAAO,KAAP,EAAc,OAA5B,EAAqC,KAArC,CAAZ,CAFkC;AAGtC,WAAO,KAAP,GAAe,UAAU,KAAV,CAHuB;AAItC,WAAO,iBAAP,CAAyB,UAAU,KAAV,CAAgB,CAAhB,CAAzB,EAA6C,UAAU,KAAV,CAAgB,CAAhB,CAA7C,EAJsC;AAKtC,QAAI,OAAO,OAAO,MAAP,CAAc,KAAd,CAAoB,OAAO,MAAP,CAAc,KAAd,CAApB,CAAyC,IAAzC,CAL2B;AAMtC,WAAO,WAAP,CAAmB,KAAnB,GAA2B,IAA3B,CANsC;AAOtC,WAAO,aAAP,4BAPsC;AAQtC,WAAO,CAAC,UAAU,KAAV,CAAgB,CAAhB,CAAD,EAAqB,UAAU,KAAV,CAAgB,CAAhB,CAArB,CAAP,CARsC;GAnWvB;CAAR;;;;;;;;;;;;;;;;ACDJ,IAAI,gCAAY,OAAO,MAAP,kBAAZ;AACX,UAAU,IAAV,GAAiB,YAAY;AAC3B,mBAAQ,IAAR,CAAa,IAAb,CAAkB,IAAlB,EAAwB,MAAxB,EAD2B;AAE3B,OAAK,QAAL,CAAc,WAAd,EAF2B;CAAZ;;;;ACNjB;;;;;;;AAGC,CAAC,YAAY;AACZ,WAAS,WAAT,CAAsB,KAAtB,EAA6B,MAA7B,EAAqC;AACnC,aAAS,UAAU;AACjB,eAAS,KAAT;AACA,kBAAY,KAAZ;AACA,cAAQ,SAAR;KAHO,CAD0B;AAMnC,QAAI,MAAM,SAAS,WAAT,CAAqB,aAArB,CAAN,CAN+B;AAOnC,QAAI,eAAJ,CAAoB,KAApB,EAA2B,OAAO,OAAP,EAAgB,OAAO,UAAP,EAAmB,OAAO,MAAP,CAA9D,CAPmC;AAQnC,WAAO,GAAP,CARmC;GAArC;;AAWA,cAAY,SAAZ,GAAwB,OAAO,KAAP,CAAa,SAAb,CAZZ;;AAcZ,SAAO,WAAP,GAAqB,WAArB,CAdY;CAAZ,CAAD;;AAiBM,IAAI,gCAAY,IAAI,WAAJ,CAAgB,WAAhB,CAAZ;AACJ,IAAI,kCAAa,IAAI,WAAJ,CAAgB,YAAhB,CAAb;AACJ,IAAI,oCAAc,IAAI,WAAJ,CAAgB,aAAhB,CAAd;AACJ,IAAI,oCAAc,IAAI,WAAJ,CAAgB,aAAhB,CAAd;AACJ,IAAI,oCAAc,IAAI,WAAJ,CAAgB,aAAhB,CAAd;;;ACzBX;;;;;QAcgB;QAkBA;QAYA;;;;;;;;;;;;;;;;;;;;;AA9BT,SAAS,MAAT,CAAiB,QAAjB,EAA2B,SAA3B,EAAsC,KAAtC,EAA6C,UAA7C,EAAyD;AAC9D,MAAI,gBAAgB;AAClB,cAAU,IAAV;GADE,CAD0D;AAI9D,MAAI,OAAO,sBAAO,QAAP,EAAiB,aAAjB,EAAgC,QAAhC,MAA8C,EAA9C,CAJmD;AAK9D,MAAI,WAAW,yBAAU,KAAV,EAAiB,UAAjB,EAA6B,YAAM;AAChD,WAAO,EAAC,UAAU,QAAV,EAAoB,MAAM,IAAN,EAAY,WAAW,SAAX,EAAxC,CADgD;GAAN,CAAxC,CAL0D;AAQ9D,SAAO,QAAP,CAR8D;CAAzD;;;;;;;;;AAkBA,SAAS,IAAT,CAAe,GAAf,EAAoB,KAApB,EAA2B,UAA3B,EAAuC;AAC5C,eAAa,UAAC,GAAc,MAAM,CAAN,GAAY,aAAa,GAAb,GAAmB,CAA9C,CAD+B;AAE5C,SAAO,EAAC,OAAO,MAAM,UAAN,CAAP,EAA0B,OAAO,UAAP,EAAlC,CAF4C;CAAvC;;;;;;;;;AAYA,SAAS,IAAT,CAAe,GAAf,EAAoB,KAApB,EAA2B,UAA3B,EAAuC;AAC5C,eAAa,UAAC,GAAa,MAAM,MAAN,IAAgB,MAAM,CAAN,CAAhB,GAA4B,aAAa,GAAb,GAAmB,MAAM,MAAN,GAAe,CAAf,CAD9B;AAE5C,SAAO,EAAC,OAAO,MAAM,UAAN,CAAP,EAA0B,OAAO,UAAP,EAAlC,CAF4C;CAAvC;;;AC5CP;;;;;QAWgB;QAwCA;QA4BA;QAgCA;QA4BA;;;;;;;;;;;AAhIT,SAAS,aAAT,CAAwB,MAAxB,EAAgC,OAAhC,EAAyC,IAAzC,EAA+C;AACpD,MAAI,iBAAJ,CADoD;AAEpD,MAAI,UAAU,CAAC,IAAD,EAAO,IAAP,CAAV,CAFgD;AAGpD,MAAI,OAAO,OAAP,CAAe,IAAf,MAAyB,CAAC,CAAD,EAAI;AAC/B,YAAQ,OAAR,CAAgB,UAAU,CAAV,EAAa,CAAb,EAAgB;AAC9B,UAAI,OAAO,WAAP,CAAmB,IAAnB,EAAyB,CAAzB,MAAgC,IAAI,KAAK,MAAL,EAAa;AACnD,iBAAS,OAAO,SAAP,CAAiB,CAAjB,EAAoB,IAAI,KAAK,MAAL,CAAxB,GAAuC,OAAO,SAAP,CAAiB,CAAjB,EAAoB,OAAO,MAAP,CAA3D,CAD0C;AAEnD,YAAI,MAAM,CAAN,EAAS;AACX,kBAAQ,CAAR,IAAa,QAAQ,CAAR,IAAa,KAAK,MAAL,CADf;AAEX,kBAAQ,CAAR,IAAa,QAAQ,CAAR,IAAa,KAAK,MAAL,CAFf;SAAb,MAGO;AACL,kBAAQ,CAAR,IAAa,QAAQ,CAAR,IAAa,KAAK,MAAL,CADrB;SAHP;AAMA,YAAI,MAAM,CAAN,IAAW,QAAQ,CAAR,CAAX,EAAuB,QAAQ,CAAR,IAAa,QAAQ,CAAR,IAAa,KAAK,MAAL,CAArD;AACA,gBAAQ,CAAR,IAAa,EAAb,CATmD;OAArD;AAWA,UAAI,OAAO,OAAP,CAAe,IAAf,EAAqB,CAArB,MAA4B,CAA5B,EAA+B;AACjC,iBAAS,OAAO,SAAP,CAAiB,CAAjB,EAAoB,CAApB,IAAyB,OAAO,SAAP,CAAiB,IAAI,KAAK,MAAL,EAAa,OAAO,MAAP,CAA3D,CADwB;AAEjC,YAAI,MAAM,CAAN,IAAY,QAAQ,CAAR,MAAe,QAAQ,CAAR,CAAf,EAA4B;AAC1C,kBAAQ,CAAR,IAAa,QAAQ,CAAR,IAAa,KAAK,MAAL,CADgB;SAA5C;AAGA,YAAI,MAAM,CAAN,IAAY,QAAQ,CAAR,MAAe,QAAQ,CAAR,CAAf,EAA4B;AAC1C,kBAAQ,CAAR,IAAa,QAAQ,CAAR,IAAa,KAAK,MAAL,CADgB;SAA5C;AAGA,YAAI,MAAM,CAAN,IAAW,QAAQ,CAAR,CAAX,EAAuB,QAAQ,CAAR,IAAa,QAAQ,CAAR,IAAa,KAAK,MAAL,CAArD;AACA,gBAAQ,CAAR,IAAa,EAAb,CATiC;OAAnC;KAZc,CAAhB,CAD+B;GAAjC;AA0BA,UAAQ,OAAO,SAAP,CAAiB,CAAjB,EAAoB,QAAQ,CAAR,CAApB,IAAkC,QAAQ,CAAR,CAAlC,GAA+C,OAAO,SAAP,CAAiB,QAAQ,CAAR,CAAjB,EAA6B,QAAQ,CAAR,CAA7B,CAA/C,GAA0F,QAAQ,CAAR,CAA1F,GAAuG,OAAO,SAAP,CAAiB,QAAQ,CAAR,CAAjB,EAA6B,OAAO,MAAP,CAApI,CA7B4C;AA8BpD,SAAO,EAAC,OAAO,KAAP,EAAc,OAAO,CAAC,QAAQ,CAAR,IAAa,QAAQ,CAAR,EAAW,MAAX,EAAmB,QAAQ,CAAR,IAAa,QAAQ,CAAR,EAAW,MAAX,CAArD,EAAtB,CA9BoD;CAA/C;;;;;;;;;AAwCA,SAAS,YAAT,CAAuB,MAAvB,EAA+B,OAA/B,EAAwC,IAAxC,EAA8C;AACnD,MAAM,QAAQ,QAAQ,CAAR,CAAR,CAD6C;AAEnD,MAAM,MAAM,QAAQ,CAAR,CAAN,CAF6C;AAGnD,MAAI,iBAAJ,CAHmD;AAInD,MAAI,YAAY,0BAAY,MAAZ,EAAoB,KAApB,CAAZ,CAJ+C;AAKnD,MAAI,UAAU,wBAAU,MAAV,EAAkB,GAAlB,CAAV,CAL+C;AAMnD,MAAI,2BAAa,MAAb,EAAqB,QAArB,EAA+B,SAA/B,MAA8C,SAA9C,EAAyD;AAC3D,QAAI,gBAAgB,OAAO,SAAP,CAAiB,SAAjB,EAA4B,YAAY,OAAO,SAAP,CAAiB,SAAjB,EAA4B,MAA5B,CAAmC,sBAAnC,CAAZ,CAA5C,CADuD;AAE3D,YAAQ,OAAO,SAAP,CAAiB,CAAjB,EAAoB,SAApB,IAAiC,OAAO,SAAP,CAAiB,YAAY,OAAO,SAAP,CAAiB,SAAjB,EAA4B,MAA5B,CAAmC,sBAAnC,CAAZ,EAAwE,OAAO,MAAP,CAA1H,CAFmD;AAG3D,cAAU,UAAU,cAAc,MAAd,CAHuC;AAI3D,QAAI,cAAc,IAAd,OAAyB,KAAK,IAAL,EAAzB,IAAwC,KAAK,IAAL,GAAY,MAAZ,EAAoB;AAC9D,cAAQ,OAAO,SAAP,CAAiB,CAAjB,EAAoB,SAApB,IAAiC,IAAjC,GAAwC,OAAO,SAAP,CAAiB,YAAY,OAAO,SAAP,CAAiB,SAAjB,EAA4B,MAA5B,CAAmC,sBAAnC,CAAZ,EAAwE,OAAO,MAAP,CAAjI,CADsD;AAE9D,kBAAY,YAAY,KAAK,MAAL,CAFsC;AAG9D,gBAAU,UAAU,KAAK,MAAL,CAH0C;KAAhE;AAKA,WAAO,EAAC,OAAO,KAAP,EAAc,OAAO,CAAC,SAAD,EAAY,OAAZ,CAAP,EAAtB,CAT2D;GAA7D;AAWA,UAAQ,OAAO,SAAP,CAAiB,CAAjB,EAAoB,SAApB,IAAiC,IAAjC,GAAwC,OAAO,SAAP,CAAiB,SAAjB,EAA4B,OAAO,MAAP,CAApE,CAjB2C;AAkBnD,SAAO,EAAC,OAAO,KAAP,EAAc,OAAO,CAAC,QAAQ,KAAK,MAAL,EAAa,MAAM,KAAK,MAAL,CAAnC,EAAtB,CAlBmD;CAA9C;;;;;;;;;AA4BA,SAAS,WAAT,CAAsB,MAAtB,EAA8B,OAA9B,EAAuC,IAAvC,EAA6C;AAClD,MAAM,QAAQ,0BAAY,MAAZ,EAAoB,QAAQ,CAAR,CAApB,CAAR,CAD4C;AAElD,MAAM,MAAM,wBAAU,MAAV,EAAkB,QAAQ,CAAR,CAAlB,CAAN,CAF4C;AAGlD,MAAM,QAAQ,yBAAW,OAAO,SAAP,CAAiB,KAAjB,EAAwB,GAAxB,CAAX,CAAR,CAH4C;AAIlD,MAAI,WAAW,EAAX,CAJ8C;AAKlD,MAAI,iBAAJ,CALkD;AAMlD,QAAM,OAAN,CAAc,UAAC,IAAD,EAAO,CAAP,EAAa;AACzB,QAAI,OAAO,IAAC,KAAS,IAAT,GAAiB,MAAM,GAAN,GAAY,CAAC,GAAI,CAAJ,GAAS,GAAV,GAAgB,GAAhB,CADhB;AAEzB,QAAI,mBAAJ,CAFyB;AAGzB,QAAI,2BAAa,IAAb,EAAmB,YAAnB,EAAiC,CAAjC,MAAwC,CAAxC,EAA2C;AAC7C,UAAI,gBAAgB,KAAK,SAAL,CAAe,CAAf,EAAkB,IAAI,KAAK,SAAL,CAAe,CAAf,EAAkB,MAAlB,CAAyB,6BAAzB,CAAJ,CAAlC,CADyC;AAE7C,gBAAU,KAAK,SAAL,CAAe,KAAK,MAAL,CAAY,6BAAZ,CAAf,EAA2D,KAAK,MAAL,CAArE,CAF6C;AAG7C,UAAI,cAAc,IAAd,OAAyB,KAAK,IAAL,EAAzB,EAAsC;AACxC,kBAAU,OAAO,KAAK,SAAL,CAAe,KAAK,MAAL,CAAY,6BAAZ,CAAf,EAA2D,KAAK,MAAL,CAAlE,CAD8B;OAA1C;AAGA,aAAO,SAAS,IAAT,CAAc,OAAd,CAAP,CAN6C;KAA/C;AAQA,cAAU,OAAO,KAAK,SAAL,CAAe,CAAf,EAAkB,KAAK,MAAL,CAAzB,CAXe;AAYzB,WAAO,SAAS,IAAT,CAAc,OAAd,CAAP,CAZyB;GAAb,CAAd,CANkD;AAoBlD,MAAI,SAAS,SAAS,IAAT,CAAc,MAAd,CAAT,CApB8C;AAqBlD,UAAQ,OAAO,SAAP,CAAiB,CAAjB,EAAoB,KAApB,IAA6B,SAAS,IAAT,CAAc,MAAd,CAA7B,GAAqD,OAAO,SAAP,CAAiB,GAAjB,EAAsB,OAAO,MAAP,CAA3E,CArB0C;AAsBlD,SAAO,EAAC,OAAO,KAAP,EAAc,OAAO,CAAC,KAAD,EAAQ,QAAQ,OAAO,OAAP,CAAe,MAAf,EAAuB,EAAvB,EAA2B,MAA3B,CAAvB,EAAtB,CAtBkD;CAA7C;;;;;;;;;AAgCA,SAAS,aAAT,CAAwB,MAAxB,EAAgC,OAAhC,EAAyC,IAAzC,EAA+C;AACpD,MAAM,QAAQ,0BAAY,MAAZ,EAAoB,QAAQ,CAAR,CAApB,CAAR,CAD8C;AAEpD,MAAM,MAAM,wBAAU,MAAV,EAAkB,QAAQ,CAAR,CAAlB,CAAN,CAF8C;AAGpD,MAAM,QAAQ,yBAAW,OAAO,SAAP,CAAiB,KAAjB,EAAwB,GAAxB,CAAX,CAAR,CAH8C;AAIpD,MAAI,WAAW,EAAX,CAJgD;AAKpD,MAAI,iBAAJ,CALoD;AAMpD,QAAM,OAAN,CAAc,UAAC,IAAD,EAAU;AACtB,QAAI,OAAO,MAAP,CADkB;AAEtB,QAAI,mBAAJ,CAFsB;AAGtB,QAAI,SAAS,KAAT,EAAgB;AAClB,gBAAU,IAAC,CAAK,OAAL,CAAa,IAAb,EAAmB,CAAnB,MAA0B,CAA1B,GAA+B,KAAK,SAAL,CAAe,KAAK,MAAL,EAAa,KAAK,MAAL,CAA5D,GAA2E,KAAK,SAAL,CAAe,KAAK,MAAL,CAAY,mCAAZ,CAAf,EAAiE,KAAK,MAAL,CAA5I,CADQ;AAElB,aAAO,SAAS,IAAT,CAAc,OAAd,CAAP,CAFkB;KAApB;AAIA,cAAU,OAAO,KAAK,SAAL,CAAe,CAAf,EAAkB,KAAK,MAAL,CAAzB,CAPY;AAQtB,WAAO,SAAS,IAAT,CAAc,OAAd,CAAP,CARsB;GAAV,CAAd,CANoD;AAgBpD,MAAI,SAAS,SAAS,IAAT,CAAc,MAAd,CAAT,CAhBgD;AAiBpD,UAAQ,OAAO,SAAP,CAAiB,CAAjB,EAAoB,KAApB,IAA6B,SAAS,IAAT,CAAc,MAAd,CAA7B,GAAqD,OAAO,SAAP,CAAiB,GAAjB,EAAsB,OAAO,MAAP,CAA3E,CAjB4C;AAkBpD,SAAO,EAAC,OAAO,KAAP,EAAc,OAAO,CAAC,KAAD,EAAQ,QAAQ,OAAO,OAAP,CAAe,MAAf,EAAuB,EAAvB,EAA2B,MAA3B,CAAvB,EAAtB,CAlBoD;CAA/C;;;;;;;;;AA4BA,SAAS,aAAT,CAAwB,MAAxB,EAAgC,OAAhC,EAAyC,IAAzC,EAA+C;AACpD,MAAM,QAAQ,QAAQ,CAAR,CAAR,CAD8C;AAEpD,MAAM,MAAM,QAAQ,CAAR,CAAN,CAF8C;AAGpD,MAAI,iBAAJ,CAHoD;AAIpD,UAAQ,OAAO,SAAP,CAAiB,CAAjB,EAAoB,KAApB,IAA6B,IAA7B,GAAoC,OAAO,SAAP,CAAiB,GAAjB,EAAsB,OAAO,MAAP,CAA1D,CAJ4C;;AAMpD,SAAO,EAAC,OAAO,KAAP,EAAc,OAAO,CAAC,KAAD,EAAQ,QAAQ,KAAK,MAAL,CAAvB,EAAtB,CANoD;CAA/C;;;AC3IP;;;;;;kBAee,YAA8B;MAApB,4DAAM,4BAAc;;AAC3C,MAAI,aAAa,SAAS,oBAAT,CAA8B,GAA9B,CAAb,CADuC;AAE3C,MAAI,QAAQ,EAAR,CAFuC;AAG3C,SAAO,MAAM,SAAN,CAAgB,OAAhB,CAAwB,IAAxB,CAA6B,UAA7B,EAAyC,UAAC,SAAD,EAAY,CAAZ,EAAkB;AAChE,QAAI,UAAU,CAAV;;;;;AAD4D,QAM5D,UAAU,QAAV,CAAmB,MAAnB,EAA2B;AAC7B,UAAI,UAAU,YAAV,CAAuB,IAAvB,CAAJ,EAAkC,MAAM,IAAN,CAAW,SAAS,UAAU,YAAV,CAAuB,IAAvB,EAA6B,KAA7B,CAAmC,GAAnC,EAAwC,CAAxC,CAAT,CAAX,EAAlC;AACA,aAF6B;KAA/B;;;;;;;AANgE,QAgB5D,UAAU,OAAO,MAAP,kBAAV,CAhB4D;AAiBhE,YAAQ,IAAR,CAAa,KAAb,EAAoB,SAApB,EAjBgE;;AAmBhE,QAAI,MAAM,MAAN,EAAc;AAChB,YAAM,IAAN,GADgB;AAEhB,gBAAU,MAAM,MAAM,MAAN,GAAe,CAAf,CAAN,GAA0B,CAA1B,CAFM;KAAlB;;AAKA,QAAI,KAAK,gBAAgB,OAAhB,CAxBuD;AAyBhE,cAAU,EAAV,GAAe,EAAf,CAzBgE;AA0BhE,YAAQ,QAAR,CAAiB,eAAjB,EAAkC,EAAlC,EA1BgE;;AA4BhE,QAAI,UAAU,OAAO,MAAP,kBAAV,CA5B4D;AA6BhE,YAAQ,IAAR,CAAa,KAAb,EAAoB,SAApB,EA7BgE;AA8BhE,YAAQ,QAAR,CAAiB,eAAjB,EAAkC,EAAlC,EA9BgE;;AAgChE,QAAI,cAAc,OAAO,MAAP,kBAAd,CAhC4D;AAiChE,gBAAY,IAAZ,CAAiB,UAAjB,EAA6B,qBAA7B,EAjCgE;AAkChE,gBAAY,QAAZ,CAAqB,cAArB,EAAqC,EAArC,EAlCgE;;AAoChE,QAAI,QAAQ,OAAO,MAAP,cAAR,CApC4D;AAqChE,UAAM,IAAN,CAAW,YAAY,OAAZ,EAAqB,SAAhC,EArCgE;;AAuChE,gBAAY,MAAZ,CAAmB,QAAnB,EAA6B,KAA7B,EAvCgE;;AAyChE,QAAI,cAAc,OAAO,MAAP,kBAAd,CAzC4D;AA0ChE,gBAAY,IAAZ,CAAiB,OAAjB,EAA0B,qBAA1B,EA1CgE;AA2ChE,gBAAY,MAAZ,CAAmB,MAAnB,EAA2B,QAA3B,EA3CgE;AA4ChE,gBAAY,QAAZ,CAAqB,cAArB,EAAqC,EAArC;;;;;;AA5CgE,aAkDvD,UAAT,CAAqB,CAArB,EAAwB;AACtB,QAAE,cAAF,GADsB;AAEtB,kBAAY,OAAZ,CAAoB,KAApB,GAFsB;KAAxB;;AAKA,QAAI,gBAAgB,OAAO,MAAP,wBAAhB,CAvD4D;AAwDhE,kBAAc,IAAd,CAAmB,gBAAnB,EAAqC,EAArC,EAxDgE;AAyDhE,kBAAc,OAAd,CAAsB,KAAtB,CAA4B,UAA5B,GAAyC,QAAzC,CAzDgE;AA0DhE,kBAAc,OAAd,CAAsB,OAAtB,CAA8B,UAAC,MAAD,EAAY;AACxC,aAAO,MAAP,CAAc,OAAd,EAAuB,UAAC,CAAD,EAAO;AAC5B,UAAE,cAAF,GAD4B;AAE5B,YAAI,QAAQ,SAAS,EAAE,MAAF,CAAS,KAAT,CAAjB,CAFwB;AAG5B,oBAAY,OAAZ,CAAoB,KAApB,GAH4B;AAI5B,sBAAc,WAAd,CAA0B,SAA1B,EAJ4B;AAK5B,sBAAc,OAAd,CAAsB,KAAtB,CAA4B,UAA5B,GAAyC,QAAzC,CAL4B;AAM5B,oBAAY,OAAZ,CAAoB,MAApB,CAA2B,OAA3B,CAAmC,KAAnC,EAA0C,CAAC,YAAY,OAAZ,CAAoB,cAApB,EAAoC,YAAY,OAAZ,CAAoB,YAApB,CAA/E,EAN4B;OAAP,CAAvB,CADwC;KAAZ,CAA9B,CA1DgE;;AAqEhE,QAAI,aAAa,OAAO,MAAP,qBAAb,CArE4D;AAsEhE,eAAW,IAAX,CAAgB,aAAhB,EAA+B,EAA/B,EAtEgE;AAuEhE,eAAW,OAAX,CAAmB,KAAnB,CAAyB,UAAzB,GAAsC,QAAtC,CAvEgE;AAwEhE,eAAW,QAAX,CAAoB,MAApB,CAA2B,QAA3B,EAAqC,UAArC,EAxEgE;AAyEhE,eAAW,YAAX,CAAwB,MAAxB,CAA+B,OAA/B,EAAwC,UAAC,CAAD,EAAO;AAC7C,QAAE,cAAF,CAD6C;AAE7C,kBAAY,OAAZ,CAAoB,KAApB,GAF6C;AAG7C,UAAI,MAAM,WAAW,YAAX,CAAwB,OAAxB,CAAgC,KAAhC,GAAwC,WAAW,YAAX,CAAwB,OAAxB,CAAgC,KAAhC,GAAwC,gBAAhF,CAHmC;AAI7C,UAAI,UAAU,WAAW,gBAAX,CAA4B,OAA5B,CAAoC,KAApC,GAA4C,WAAW,gBAAX,CAA4B,OAA5B,CAAoC,KAApC,GAA4C,GAAxF,CAJ+B;AAK7C,iBAAW,YAAX,CAAwB,OAAxB,CAAgC,KAAhC,GAAwC,EAAxC,CAL6C;AAM7C,iBAAW,gBAAX,CAA4B,OAA5B,CAAoC,KAApC,GAA4C,EAA5C,CAN6C;AAO7C,iBAAW,OAAX,CAAmB,KAAnB,CAAyB,UAAzB,GAAsC,QAAtC,CAP6C;AAQ7C,iBAAW,WAAX,CAAuB,SAAvB,EAR6C;AAS7C,kBAAY,OAAZ,CAAoB,MAApB,CAA2B,IAA3B,CAAgC,CAAC,YAAY,OAAZ,CAAoB,cAApB,EAAoC,YAAY,OAAZ,CAAoB,YAApB,CAArE,EAAwG,GAAxG,EAA6G,OAA7G,EAT6C;KAAP,CAAxC,CAzEgE;;AAqFhE,QAAI,cAAc,OAAO,MAAP,sBAAd,CArF4D;AAsFhE,gBAAY,IAAZ,CAAiB,cAAjB,EAAiC,EAAjC,EAtFgE;AAuFhE,gBAAY,OAAZ,CAAoB,KAApB,CAA0B,UAA1B,GAAuC,QAAvC,CAvFgE;AAwFhE,gBAAY,SAAZ,CAAsB,MAAtB,CAA6B,QAA7B,EAAuC,UAAvC,EAxFgE;AAyFhE,gBAAY,YAAZ,CAAyB,MAAzB,CAAgC,OAAhC,EAAyC,UAAC,CAAD,EAAO;AAC9C,QAAE,cAAF,CAD8C;AAE9C,kBAAY,OAAZ,CAAoB,KAApB,GAF8C;AAG9C,UAAI,SAAS,YAAY,gBAAZ,CAA6B,OAA7B,CAAqC,KAArC,GAA6C,YAAY,gBAAZ,CAA6B,OAA7B,CAAqC,KAArC,GAA6C,kCAA1F,CAHiC;AAI9C,UAAI,MAAM,YAAY,aAAZ,CAA0B,OAA1B,CAAkC,KAAlC,GAA0C,YAAY,aAAZ,CAA0B,OAA1B,CAAkC,KAAlC,GAA0C,MAApF,CAJoC;AAK9C,kBAAY,gBAAZ,CAA6B,OAA7B,CAAqC,KAArC,GAA6C,EAA7C,CAL8C;AAM9C,kBAAY,aAAZ,CAA0B,OAA1B,CAAkC,KAAlC,GAA0C,EAA1C,CAN8C;AAO9C,kBAAY,OAAZ,CAAoB,KAApB,CAA0B,UAA1B,GAAuC,QAAvC,CAP8C;AAQ9C,kBAAY,WAAZ,CAAwB,SAAxB,EAR8C;AAS9C,kBAAY,OAAZ,CAAoB,MAApB,CAA2B,KAA3B,CAAiC,CAAC,YAAY,OAAZ,CAAoB,cAApB,EAAoC,YAAY,OAAZ,CAAoB,YAApB,CAAtE,EAAyG,MAAzG,EAAiH,GAAjH,EAT8C;KAAP,CAAzC;;;;;;AAzFgE,aAyGvD,eAAT,CAA0B,CAA1B,EAA6B;AAC3B,QAAE,cAAF,GAD2B;AAE3B,QAAE,aAAF,CAAgB,SAAhB,CAA0B,GAA1B,CAA8B,QAA9B,EAF2B;AAG3B,kBAAY,OAAZ,CAAoB,KAApB,GAH2B;KAA7B;;AAMA,aAAS,aAAT,CAAwB,CAAxB,EAA2B;AACzB,QAAE,aAAF,CAAgB,SAAhB,CAA0B,MAA1B,CAAiC,QAAjC,EADyB;KAA3B;;AAIA,QAAI,gBAAgB,OAAO,MAAP,gBAAhB,CAnH4D;AAoHhE,kBAAc,IAAd,CAAmB,SAAnB,EAA8B,EAA9B,EAAkC,IAAlC,EAAwC,WAAxC,EApHgE;AAqHhE,kBAAc,MAAd,GAAuB,cAAc,OAAd,CArHyC;AAsHhE,kBAAc,MAAd,CAAqB,OAArB,EAA8B,UAAC,CAAD,EAAO;AACnC,QAAE,cAAF,GADmC;AAEnC,QAAE,aAAF,CAAgB,IAAhB,GAFmC;AAGnC,oBAAc,MAAd,CAAqB,SAArB,CAA+B,MAA/B,CAAsC,SAAtC,EAHmC;AAInC,kBAAY,OAAZ,CAAoB,KAApB,CAA0B,UAA1B,GAAuC,QAAvC,CAJmC;AAKnC,kBAAY,WAAZ,CAAwB,SAAxB,EALmC;AAMnC,iBAAW,OAAX,CAAmB,KAAnB,CAAyB,UAAzB,GAAsC,QAAtC,CANmC;AAOnC,iBAAW,WAAX,CAAuB,SAAvB,EAPmC;AAQnC,UAAI,cAAc,MAAd,CAAqB,KAArB,CAA2B,UAA3B,KAA0C,QAA1C,EAAoD;AACtD,sBAAc,MAAd,CAAqB,KAArB,CAA2B,UAA3B,GAAwC,SAAxC,CADsD;AAEtD,eAFsD;OAAxD;AAIA,oBAAc,MAAd,CAAqB,KAArB,CAA2B,UAA3B,GAAwC,QAAxC,CAZmC;KAAP,CAA9B,CAtHgE;;AAqIhE,QAAI,aAAa,OAAO,MAAP,gBAAb,CArI4D;AAsIhE,eAAW,IAAX,CAAgB,MAAhB,EAAwB,EAAxB,EAA4B,IAA5B,EAAkC,SAAlC,EAtIgE;AAuIhE,eAAW,MAAX,CAAkB,WAAlB,EAA+B,eAA/B,EAvIgE;AAwIhE,eAAW,MAAX,CAAkB,SAAlB,EAA6B,aAA7B,EAxIgE;AAyIhE,eAAW,MAAX,CAAkB,OAAlB,EAA2B,UAAC,CAAD,EAAO;AAChC,QAAE,cAAF,GADgC;AAEhC,kBAAY,OAAZ,CAAoB,KAApB,GAFgC;AAGhC,kBAAY,OAAZ,CAAoB,MAApB,CAA2B,IAA3B,CAAgC,CAAC,YAAY,OAAZ,CAAoB,cAApB,EAAoC,YAAY,OAAZ,CAAoB,YAApB,CAArE,EAHgC;KAAP,CAA3B,CAzIgE;;AA+IhE,QAAI,eAAe,OAAO,MAAP,gBAAf,CA/I4D;AAgJhE,iBAAa,IAAb,CAAkB,QAAlB,EAA4B,EAA5B,EAAgC,IAAhC,EAAsC,WAAtC,EAhJgE;AAiJhE,iBAAa,MAAb,CAAoB,WAApB,EAAiC,eAAjC,EAjJgE;AAkJhE,iBAAa,MAAb,CAAoB,SAApB,EAA+B,aAA/B,EAlJgE;AAmJhE,iBAAa,MAAb,CAAoB,OAApB,EAA6B,UAAC,CAAD,EAAO;AAClC,QAAE,cAAF,GADkC;AAElC,kBAAY,OAAZ,CAAoB,KAApB,GAFkC;AAGlC,kBAAY,OAAZ,CAAoB,MAApB,CAA2B,MAA3B,CAAkC,CAAC,YAAY,OAAZ,CAAoB,cAApB,EAAoC,YAAY,OAAZ,CAAoB,YAApB,CAAvE,EAHkC;KAAP,CAA7B,CAnJgE;;AAyJhE,QAAI,sBAAsB,OAAO,MAAP,gBAAtB,CAzJ4D;AA0JhE,wBAAoB,IAApB,CAAyB,eAAzB,EAA0C,EAA1C,EAA8C,IAA9C,EAAoD,kBAApD,EA1JgE;AA2JhE,wBAAoB,MAApB,CAA2B,WAA3B,EAAwC,eAAxC,EA3JgE;AA4JhE,wBAAoB,MAApB,CAA2B,SAA3B,EAAsC,aAAtC,EA5JgE;AA6JhE,wBAAoB,MAApB,CAA2B,OAA3B,EAAoC,UAAC,CAAD,EAAO;AACzC,QAAE,cAAF,GADyC;AAEzC,kBAAY,OAAZ,CAAoB,KAApB,GAFyC;AAGzC,kBAAY,OAAZ,CAAoB,MAApB,CAA2B,aAA3B,CAAyC,CAAC,YAAY,OAAZ,CAAoB,cAApB,EAAoC,YAAY,OAAZ,CAAoB,YAApB,CAA9E,EAHyC;KAAP,CAApC,CA7JgE;;AAmKhE,QAAI,aAAa,OAAO,MAAP,gBAAb,CAnK4D;AAoKhE,eAAW,IAAX,CAAgB,MAAhB,EAAwB,EAAxB,EAA4B,IAA5B,EAAkC,SAAlC,EApKgE;AAqKhE,eAAW,MAAX,CAAkB,WAAlB,EAA+B,eAA/B,EArKgE;AAsKhE,eAAW,MAAX,CAAkB,SAAlB,EAA6B,aAA7B,EAtKgE;AAuKhE,eAAW,MAAX,CAAkB,OAAlB,EAA2B,UAAC,CAAD,EAAO;AAChC,QAAE,cAAF,GADgC;AAEhC,kBAAY,OAAZ,CAAoB,KAApB,GAFgC;AAGhC,kBAAY,OAAZ,CAAoB,MAApB,CAA2B,IAA3B,CAAgC,CAAC,YAAY,OAAZ,CAAoB,cAApB,EAAoC,YAAY,OAAZ,CAAoB,YAApB,CAArE,EAHgC;KAAP,CAA3B,CAvKgE;;AA6KhE,QAAI,mBAAmB,OAAO,MAAP,gBAAnB,CA7K4D;AA8KhE,qBAAiB,IAAjB,CAAsB,YAAtB,EAAoC,EAApC,EAAwC,IAAxC,EAA8C,gBAA9C,EA9KgE;AA+KhE,qBAAiB,MAAjB,CAAwB,WAAxB,EAAqC,eAArC,EA/KgE;AAgLhE,qBAAiB,MAAjB,CAAwB,SAAxB,EAAmC,aAAnC,EAhLgE;AAiLhE,qBAAiB,MAAjB,CAAwB,OAAxB,EAAiC,UAAC,CAAD,EAAO;AACtC,QAAE,cAAF,GADsC;AAEtC,kBAAY,OAAZ,CAAoB,KAApB,GAFsC;AAGtC,kBAAY,OAAZ,CAAoB,MAApB,CAA2B,UAA3B,CAAsC,CAAC,YAAY,OAAZ,CAAoB,cAApB,EAAoC,YAAY,OAAZ,CAAoB,YAApB,CAA3E,EAHsC;KAAP,CAAjC,CAjLgE;;AAuLhE,QAAI,aAAa,OAAO,MAAP,gBAAb,CAvL4D;AAwLhE,eAAW,IAAX,CAAgB,MAAhB,EAAwB,EAAxB,EAA4B,IAA5B,EAAkC,SAAlC,EAxLgE;AAyLhE,eAAW,MAAX,GAAoB,WAAW,OAAX,CAzL4C;AA0LhE,eAAW,MAAX,CAAkB,WAAlB,EAA+B,eAA/B,EA1LgE;AA2LhE,eAAW,MAAX,CAAkB,SAAlB,EAA6B,aAA7B,EA3LgE;AA4LhE,eAAW,MAAX,CAAkB,OAAlB,EAA2B,UAAC,CAAD,EAAO;AAChC,QAAE,cAAF,GADgC;AAEhC,kBAAY,OAAZ,CAAoB,KAApB,GAFgC;AAGhC,iBAAW,MAAX,CAAkB,SAAlB,CAA4B,MAA5B,CAAmC,SAAnC,EAHgC;AAIhC,kBAAY,OAAZ,CAAoB,KAApB,CAA0B,UAA1B,GAAuC,QAAvC,CAJgC;AAKhC,kBAAY,WAAZ,CAAwB,SAAxB,EALgC;AAMhC,oBAAc,OAAd,CAAsB,KAAtB,CAA4B,UAA5B,GAAyC,QAAzC,CANgC;AAOhC,oBAAc,WAAd,CAA0B,SAA1B,EAPgC;AAQhC,UAAI,WAAW,MAAX,CAAkB,KAAlB,CAAwB,UAAxB,KAAuC,QAAvC,EAAiD;AACnD,mBAAW,MAAX,CAAkB,QAAlB,CAA2B,CAA3B,EAA8B,QAA9B,CAAuC,CAAvC,EAA0C,KAA1C,GAAkD,YAAY,OAAZ,CAAoB,KAApB,CAA0B,SAA1B,CAAoC,YAAY,OAAZ,CAAoB,cAApB,EAAoC,YAAY,OAAZ,CAAoB,YAApB,CAA1H,CADmD;AAEnD,mBAAW,MAAX,CAAkB,KAAlB,CAAwB,UAAxB,GAAqC,SAArC,CAFmD;AAGnD,eAHmD;OAArD;AAKA,iBAAW,MAAX,CAAkB,KAAlB,CAAwB,UAAxB,GAAqC,QAArC,CAbgC;KAAP,CAA3B,CA5LgE;;AA4MhE,QAAI,cAAc,OAAO,MAAP,gBAAd,CA5M4D;AA6MhE,gBAAY,IAAZ,CAAiB,OAAjB,EAA0B,EAA1B,EAA8B,IAA9B,EAAoC,iBAApC,EA7MgE;AA8MhE,gBAAY,MAAZ,GAAqB,YAAY,OAAZ,CA9M2C;AA+MhE,gBAAY,MAAZ,CAAmB,WAAnB,EAAgC,eAAhC,EA/MgE;AAgNhE,gBAAY,MAAZ,CAAmB,SAAnB,EAA8B,aAA9B,EAhNgE;AAiNhE,gBAAY,MAAZ,CAAmB,OAAnB,EAA4B,UAAC,CAAD,EAAO;AACjC,QAAE,cAAF,GADiC;AAEjC,kBAAY,OAAZ,CAAoB,KAApB,GAFiC;AAGjC,kBAAY,MAAZ,CAAmB,SAAnB,CAA6B,MAA7B,CAAoC,SAApC,EAHiC;AAIjC,iBAAW,OAAX,CAAmB,KAAnB,CAAyB,UAAzB,GAAsC,QAAtC,CAJiC;AAKjC,iBAAW,WAAX,CAAuB,SAAvB,EALiC;AAMjC,oBAAc,OAAd,CAAsB,KAAtB,CAA4B,UAA5B,GAAyC,QAAzC,CANiC;AAOjC,oBAAc,WAAd,CAA0B,SAA1B,EAPiC;AAQjC,UAAI,YAAY,MAAZ,CAAmB,KAAnB,CAAyB,UAAzB,KAAwC,QAAxC,EAAkD;AACpD,oBAAY,MAAZ,CAAmB,QAAnB,CAA4B,CAA5B,EAA+B,QAA/B,CAAwC,CAAxC,EAA2C,KAA3C,GAAmD,YAAY,OAAZ,CAAoB,KAApB,CAA0B,SAA1B,CAAoC,YAAY,OAAZ,CAAoB,cAApB,EAAoC,YAAY,OAAZ,CAAoB,YAApB,CAA3H,CADoD;AAEpD,oBAAY,MAAZ,CAAmB,KAAnB,CAAyB,UAAzB,GAAsC,SAAtC,CAFoD;AAGpD,eAHoD;OAAtD;AAKA,kBAAY,MAAZ,CAAmB,KAAnB,CAAyB,UAAzB,GAAsC,QAAtC,CAbiC;KAAP,CAA5B,CAjNgE;;AAiOhE,QAAI,sBAAsB,OAAO,MAAP,gBAAtB,CAjO4D;AAkOhE,wBAAoB,IAApB,CAAyB,gBAAzB,EAA2C,EAA3C,EAA+C,IAA/C,EAAqD,YAArD,EAlOgE;AAmOhE,wBAAoB,MAApB,CAA2B,WAA3B,EAAwC,eAAxC,EAnOgE;AAoOhE,wBAAoB,MAApB,CAA2B,SAA3B,EAAsC,aAAtC,EApOgE;AAqOhE,wBAAoB,MAApB,CAA2B,OAA3B,EAAoC,UAAC,CAAD,EAAO;AACzC,QAAE,cAAF,GADyC;AAEzC,kBAAY,OAAZ,CAAoB,KAApB,GAFyC;AAGzC,kBAAY,OAAZ,CAAoB,MAApB,CAA2B,aAA3B,CAAyC,CAAC,YAAY,OAAZ,CAAoB,cAApB,EAAoC,YAAY,OAAZ,CAAoB,YAApB,CAA9E,EAHyC;KAAP,CAApC,CArOgE;;AA2OhE,QAAI,oBAAoB,OAAO,MAAP,gBAApB,CA3O4D;AA4OhE,sBAAkB,IAAlB,CAAuB,cAAvB,EAAuC,EAAvC,EAA2C,IAA3C,EAAiD,YAAjD,EA5OgE;AA6OhE,sBAAkB,MAAlB,CAAyB,WAAzB,EAAsC,eAAtC,EA7OgE;AA8OhE,sBAAkB,MAAlB,CAAyB,SAAzB,EAAoC,aAApC,EA9OgE;AA+OhE,sBAAkB,MAAlB,CAAyB,OAAzB,EAAkC,UAAC,CAAD,EAAO;AACvC,QAAE,cAAF,GADuC;AAEvC,kBAAY,OAAZ,CAAoB,KAApB,GAFuC;AAGvC,kBAAY,OAAZ,CAAoB,MAApB,CAA2B,WAA3B,CAAuC,CAAC,YAAY,OAAZ,CAAoB,cAApB,EAAoC,YAAY,OAAZ,CAAoB,YAApB,CAA5E,EAHuC;KAAP,CAAlC,CA/OgE;;AAqPhE,QAAI,gBAAgB,OAAO,MAAP,gBAAhB,CArP4D;AAsPhE,kBAAc,IAAd,CAAmB,SAAnB,EAA8B,EAA9B,EAAkC,IAAlC,EAAwC,YAAxC,EAtPgE;AAuPhE,kBAAc,MAAd,CAAqB,WAArB,EAAkC,eAAlC,EAvPgE;AAwPhE,kBAAc,MAAd,CAAqB,SAArB,EAAgC,aAAhC,EAxPgE;AAyPhE,kBAAc,MAAd,CAAqB,OAArB,EAA8B,UAAC,CAAD,EAAO;AACnC,QAAE,cAAF,GADmC;AAEnC,kBAAY,OAAZ,CAAoB,KAApB,GAFmC;AAGnC,kBAAY,OAAZ,CAAoB,MAApB,CAA2B,OAA3B,CAAmC,CAAC,YAAY,OAAZ,CAAoB,cAApB,EAAoC,YAAY,OAAZ,CAAoB,YAApB,CAAxE,EAHmC;KAAP,CAA9B,CAzPgE;;AA+PhE,QAAI,eAAe,OAAO,MAAP,gBAAf,CA/P4D;AAgQhE,iBAAa,IAAb,CAAkB,QAAlB,EAA4B,EAA5B,EAAgC,IAAhC,EAAsC,WAAtC,EAhQgE;AAiQhE,iBAAa,MAAb,CAAoB,WAApB,EAAiC,eAAjC,EAjQgE;AAkQhE,iBAAa,MAAb,CAAoB,SAApB,EAA+B,aAA/B,EAlQgE;AAmQhE,iBAAa,MAAb,CAAoB,OAApB,EAA6B,UAAC,CAAD,EAAO;AAClC,QAAE,cAAF,GADkC;AAElC,kBAAY,OAAZ,CAAoB,KAApB,GAFkC;AAGlC,kBAAY,OAAZ,CAAoB,MAApB,CAA2B,MAA3B,CAAkC,CAAC,YAAY,OAAZ,CAAoB,cAApB,EAAoC,YAAY,OAAZ,CAAoB,YAApB,CAAvE,EAHkC;KAAP,CAA7B,CAnQgE;;AAyQhE,QAAI,aAAa,OAAO,MAAP,gBAAb,CAzQ4D;AA0QhE,eAAW,IAAX,CAAgB,MAAhB,EAAwB,EAAxB,EAA4B,IAA5B,EAAkC,aAAlC,EA1QgE;AA2QhE,eAAW,MAAX,CAAkB,WAAlB,EAA+B,eAA/B,EA3QgE;AA4QhE,eAAW,MAAX,CAAkB,SAAlB,EAA6B,aAA7B,EA5QgE;AA6QhE,eAAW,MAAX,CAAkB,OAAlB,EAA2B,UAAC,CAAD,EAAO;AAChC,QAAE,cAAF,GADgC;AAEhC,UAAI,WAAW,OAAX,CAAmB,SAAnB,CAA6B,QAA7B,CAAsC,UAAtC,CAAJ,EAAuD,OAAvD;AACA,kBAAY,OAAZ,CAAoB,KAApB,GAHgC;AAIhC,kBAAY,OAAZ,CAAoB,MAApB,CAA2B,IAA3B,CAAgC,CAAhC,EAAmC,YAAY,OAAZ,CAAoB,MAApB,CAA2B,KAA3B,EAAkC,YAAY,OAAZ,CAAoB,MAApB,CAA2B,KAA3B,CAArE,CAJgC;KAAP,CAA3B,CA7QgE;;AAoRhE,QAAI,aAAa,OAAO,MAAP,gBAAb,CApR4D;AAqRhE,eAAW,IAAX,CAAgB,MAAhB,EAAwB,EAAxB,EAA4B,IAA5B,EAAkC,YAAlC,EArRgE;AAsRhE,eAAW,MAAX,CAAkB,WAAlB,EAA+B,eAA/B,EAtRgE;AAuRhE,eAAW,MAAX,CAAkB,SAAlB,EAA6B,aAA7B,EAvRgE;AAwRhE,eAAW,MAAX,CAAkB,OAAlB,EAA2B,UAAC,CAAD,EAAO;AAChC,QAAE,cAAF,GADgC;AAEhC,UAAI,WAAW,OAAX,CAAmB,SAAnB,CAA6B,QAA7B,CAAsC,UAAtC,CAAJ,EAAuD,OAAvD;AACA,kBAAY,OAAZ,CAAoB,KAApB,GAHgC;AAIhC,kBAAY,OAAZ,CAAoB,MAApB,CAA2B,IAA3B,CAAgC,CAAhC,EAAmC,YAAY,OAAZ,CAAoB,MAApB,CAA2B,KAA3B,EAAkC,YAAY,OAAZ,CAAoB,MAApB,CAA2B,KAA3B,CAArE,CAJgC;KAAP,CAA3B,CAxRgE;;AA+RhE,QAAI,mBAAmB,OAAO,MAAP,gBAAnB,CA/R4D;AAgShE,qBAAiB,IAAjB,CAAsB,YAAtB,EAAoC,EAApC,EAAwC,IAAxC,EAA8C,WAA9C,EAhSgE;AAiShE,qBAAiB,MAAjB,CAAwB,OAAxB,EAAiC,UAAC,CAAD,EAAO;AACtC,QAAE,cAAF,GADsC;AAEtC,QAAE,aAAF,CAAgB,IAAhB,GAFsC;AAGtC,QAAE,aAAF,CAAgB,SAAhB,CAA0B,MAA1B,CAAiC,oBAAjC,EAHsC;AAItC,gBAAU,SAAV,CAAoB,MAApB,CAA2B,oBAA3B,EAJsC;AAKtC,kBAAY,OAAZ,CAAoB,SAApB,CAA8B,MAA9B,CAAqC,oBAArC,EALsC;AAMtC,uBAAiB,IAAjB,CAAsB,OAAtB,CAA8B,SAA9B,CAAwC,MAAxC,CAA+C,WAA/C,EANsC;AAOtC,uBAAiB,IAAjB,CAAsB,OAAtB,CAA8B,SAA9B,CAAwC,MAAxC,CAA+C,aAA/C,EAPsC;KAAP,CAAjC;;;;;;AAjSgE,QA+S5D,aAAa,OAAO,MAAP,sBAAb,CA/S4D;AAgThE,eAAW,IAAX,GAhTgE;;AAkThE,QAAI,aAAa,OAAO,MAAP,sBAAb,CAlT4D;AAmThE,eAAW,IAAX,GAnTgE;;AAqThE,QAAI,aAAa,OAAO,MAAP,sBAAb,CArT4D;AAsThE,eAAW,IAAX,GAtTgE;;AAwThE,QAAI,aAAa,OAAO,MAAP,sBAAb,CAxT4D;AAyThE,eAAW,IAAX,GAzTgE;;AA2ThE,QAAI,aAAa,OAAO,MAAP,sBAAb,CA3T4D;AA4ThE,eAAW,IAAX;;;;;;AA5TgE,WAkUhE,CAAQ,QAAR,CAAiB,SAAjB,EAlUgE;AAmUhE,gBAAY,QAAZ,CAAqB,SAArB,EAnUgE;AAoUhE,gBAAY,QAAZ,CAAqB,SAArB,EApUgE;AAqUhE,kBAAc,QAAd,CAAuB,QAAQ,OAAR,CAAvB,CArUgE;AAsUhE,eAAW,QAAX,CAAoB,QAAQ,OAAR,CAApB,CAtUgE;AAuUhE,eAAW,QAAX,CAAoB,QAAQ,OAAR,CAApB,CAvUgE;AAwUhE,iBAAa,QAAb,CAAsB,QAAQ,OAAR,CAAtB,CAxUgE;AAyUhE,wBAAoB,QAApB,CAA6B,QAAQ,OAAR,CAA7B,CAzUgE;AA0UhE,eAAW,QAAX,CAAoB,QAAQ,OAAR,CAApB,CA1UgE;AA2UhE,qBAAiB,QAAjB,CAA0B,QAAQ,OAAR,CAA1B,CA3UgE;AA4UhE,eAAW,QAAX,CAAoB,QAAQ,OAAR,CAApB,CA5UgE;AA6UhE,eAAW,QAAX,CAAoB,QAAQ,OAAR,CAApB,CA7UgE;AA8UhE,gBAAY,QAAZ,CAAqB,QAAQ,OAAR,CAArB,CA9UgE;AA+UhE,eAAW,QAAX,CAAoB,QAAQ,OAAR,CAApB,CA/UgE;AAgVhE,wBAAoB,QAApB,CAA6B,QAAQ,OAAR,CAA7B,CAhVgE;AAiVhE,sBAAkB,QAAlB,CAA2B,QAAQ,OAAR,CAA3B,CAjVgE;AAkVhE,kBAAc,QAAd,CAAuB,QAAQ,OAAR,CAAvB,CAlVgE;AAmVhE,iBAAa,QAAb,CAAsB,QAAQ,OAAR,CAAtB,CAnVgE;AAoVhE,eAAW,QAAX,CAAoB,QAAQ,OAAR,CAApB,CApVgE;AAqVhE,eAAW,QAAX,CAAoB,QAAQ,OAAR,CAApB,CArVgE;AAsVhE,eAAW,QAAX,CAAoB,QAAQ,OAAR,CAApB,CAtVgE;AAuVhE,eAAW,QAAX,CAAoB,QAAQ,OAAR,CAApB,CAvVgE;AAwVhE,qBAAiB,QAAjB,CAA0B,QAAQ,OAAR,CAA1B,CAxVgE;AAyVhE,YAAQ,QAAR,CAAiB,QAAQ,OAAR,CAAjB,CAzVgE;AA0VhE,eAAW,QAAX,CAAoB,QAAQ,OAAR,CAApB,CA1VgE;AA2VhE,gBAAY,QAAZ,CAAqB,QAAQ,OAAR,CAArB,CA3VgE;AA4VhE,kBAAc,QAAd,CAAuB,QAAQ,OAAR,CAAvB;;;;;;AA5VgE,eAkWhE,CAAY,MAAZ,CAAmB,aAAnB,EAAkC,UAAC,CAAD,EAAO;AACvC,QAAE,aAAF,CAAgB,MAAhB,CAAuB,MAAvB,CAA8B,EAAE,aAAF,CAAgB,KAAhB,EAAuB,CAAC,EAAE,aAAF,CAAgB,cAAhB,EAAgC,EAAE,aAAF,CAAgB,YAAhB,CAAtF,EAAqH,EAAE,aAAF,CAAgB,MAAhB,CAAuB,KAAvB,EAA8B,EAAE,aAAF,CAAgB,MAAhB,CAAuB,KAAvB,CAAnJ,CADuC;KAAP,EAE/B,KAFH,EAlWgE;;AAsWhE,gBAAY,MAAZ,CAAmB,aAAnB,EAAkC,UAAC,CAAD,EAAO;AACvC,UAAI,OAAO,EAAE,aAAF,CAAgB,MAAhB,CAAuB,KAAvB,CAA6B,EAAE,aAAF,CAAgB,MAAhB,CAAuB,KAAvB,CAA7B,CAA2D,IAA3D,CAD4B;AAEvC,UAAI,EAAE,aAAF,CAAgB,MAAhB,CAAuB,KAAvB,KAAiC,CAAjC,EAAoC;AACtC,mBAAW,QAAX,CAAoB,UAApB,EADsC;OAAxC,MAEO;AACL,mBAAW,WAAX,CAAuB,UAAvB,EADK;OAFP;AAKA,UAAI,EAAE,aAAF,CAAgB,MAAhB,CAAuB,KAAvB,KAAiC,EAAE,aAAF,CAAgB,MAAhB,CAAuB,KAAvB,CAA6B,MAA7B,GAAsC,CAAtC,EAAyC;AAC5E,mBAAW,QAAX,CAAoB,UAApB,EAD4E;OAA9E,MAEO;AACL,mBAAW,WAAX,CAAuB,UAAvB,EADK;OAFP;AAKA,QAAE,aAAF,CAAgB,WAAhB,CAA4B,KAA5B,GAAoC,IAApC,CAZuC;KAAP,EAa/B,KAbH;;;;;AAtWgE,eAwXhE,CAAY,MAAZ,CAAmB,OAAnB,EAA4B,UAAC,CAAD,EAAO;AACjC,aAAO,YAAP,CAAoB,SAApB,EADiC;AAEjC,kBAAY,OAAO,UAAP,CAAkB,YAAM;AAClC,UAAE,aAAF,CAAgB,aAAhB,4BADkC;OAAN,EAE3B,IAFS,CAAZ,CAFiC;KAAP,EAKzB,KALH;;;;;AAxXgE,eAkYhE,CAAY,MAAZ,CAAmB,QAAnB,EAA6B,UAAC,CAAD,EAAO;AAClC,QAAE,aAAF,CAAgB,aAAhB,4BADkC;KAAP,EAE1B,KAFH;;;;;AAlYgE,eAyYhE,CAAY,MAAZ,CAAmB,OAAnB,EAA4B,UAAC,CAAD,EAAO;AACjC,iBAAW,YAAM;AACf,UAAE,aAAF,CAAgB,aAAhB,4BADe;OAAN,EAER,CAFH,EADiC;KAAP,EAIzB,KAJH;;;;;AAzYgE,eAkZhE,CAAY,MAAZ,CAAmB,KAAnB,EAA0B,UAAC,CAAD,EAAO;AAC/B,iBAAW,YAAM;AACf,UAAE,aAAF,CAAgB,aAAhB,4BADe;OAAN,EAER,CAFH,EAD+B;KAAP,EAIvB,KAJH,EAlZgE;;AAwZhE,QAAI,kBAAkB,CAAlB;;;;;;;AAxZ4D,eA+ZhE,CAAY,MAAZ,CAAmB,SAAnB,EAA8B,UAAC,CAAD,EAAO;AACnC,UAAI,EAAE,KAAF,KAAY,CAAZ,EAAe,kBAAkB,EAAE,aAAF,CAAgB,YAAhB,GAA+B,EAAE,aAAF,CAAgB,cAAhB,CAApE;KAD4B,CAA9B,CA/ZgE;;AAmahE,QAAI,SAAS,EAAT;AAna4D,QAoa5D,eAAe,CACjB,EADiB;AAEjB,MAFiB;AAGjB,MAHiB;AAIjB,MAJiB;AAKjB,MALiB;AAMjB,MANiB;AAOjB,MAPiB;AAQjB,MARiB;AASjB,MATiB;AAUjB,OAViB;AAWjB;AAXiB,KAAf;;;;;;;AApa4D,eAubhE,CAAY,MAAZ,CAAmB,UAAnB,EAA+B,UAAC,CAAD,EAAO;AACpC,aAAO,IAAP,CAAY,EAAE,KAAF,CAAZ,CADoC;AAEpC,UAAI,OAAO,MAAP,GAAgB,CAAhB,EAAmB,OAAO,KAAP,GAAvB;AACA,mBAAa,OAAb,CAAqB,UAAC,WAAD,EAAiB;AACpC,YAAI,EAAE,KAAF,KAAY,EAAZ,IAAkB,OAAO,CAAP,MAAc,WAAd,EAA2B;AAC/C,iBAAO,OAAO,YAAP,CAAoB,SAApB,CAAP,CAD+C;SAAjD;AAGA,YAAI,EAAE,KAAF,KAAY,WAAZ,EAAyB;AAC3B,iBAAO,YAAP,CAAoB,SAApB,EAD2B;AAE3B,iBAAO,EAAE,aAAF,CAAgB,aAAhB,2BAAP,CAF2B;SAA7B;OAJmB,CAArB,CAHoC;KAAP,CAA/B;;;;;;;AAvbgE,eA0chE,CAAY,MAAZ,CAAmB,OAAnB,EAA4B,UAAC,CAAD,EAAO;AACjC,UAAI,EAAE,KAAF,KAAY,CAAZ,IAAiB,kBAAkB,CAAlB,EAAqB;AACxC,eAAO,YAAP,CAAoB,SAApB,EADwC;AAExC,0BAAkB,CAAlB,CAFwC;AAGxC,UAAE,aAAF,CAAgB,aAAhB,4BAHwC;OAA1C;KAD0B,CAA5B,CA1cgE;;AAkdhE,gBAAY,MAAZ,CAAmB,QAAnB,EAA6B,UAAC,CAAD,EAAO;AAClC,QAAE,aAAF,CAAgB,aAAhB,4BADkC;KAAP,CAA7B,CAldgE;;AAsdhE,gBAAY,MAAZ,CAAmB,MAAnB,EAA2B,UAAC,CAAD,EAAO;AAChC,QAAE,aAAF,CAAgB,aAAhB,0BADgC;KAAP,CAA3B,CAtdgE;;AA0dhE,gBAAY,MAAZ,CAAmB,OAAnB,EAA4B,UAAC,CAAD,EAAO;AACjC,QAAE,aAAF,CAAgB,aAAhB,2BADiC;KAAP,CAA5B,CA1dgE;;AA8dhE,gBAAY,MAAZ,CAAmB,OAAnB,EAA4B,YAAM;AAChC,kBAAY,OAAZ,CAAoB,KAApB,CAA0B,UAA1B,GAAuC,QAAvC,CADgC;AAEhC,kBAAY,WAAZ,CAAwB,SAAxB,EAFgC;AAGhC,iBAAW,OAAX,CAAmB,KAAnB,CAAyB,UAAzB,GAAsC,QAAtC,CAHgC;AAIhC,iBAAW,WAAX,CAAuB,SAAvB,EAJgC;AAKhC,oBAAc,OAAd,CAAsB,KAAtB,CAA4B,UAA5B,GAAyC,QAAzC,CALgC;AAMhC,oBAAc,WAAd,CAA0B,SAA1B,EANgC;KAAN,CAA5B,CA9dgE;GAAlB,CAAhD,CAH2C;CAA9B;;;;;;;;;;;;;;AANf,IAAI,qBAAJ;;;;;;;;ACTA;;;;;;;;;;;;QAQgB;QAYA;QAiBA;QAWA;QAUA;QAUA;QASA;AArET,SAAS,YAAT,CAAuB,MAAvB,EAA+B,KAA/B,EAAsC,KAAtC,EAA6C;AAClD,MAAI,MAAM,KAAC,KAAU,IAAV,GAAkB,OAAO,SAAP,CAAiB,KAAjB,CAAnB,GAA6C,MAA7C,CADwC;AAElD,MAAI,UAAU,IAAI,KAAJ,CAAU,KAAV,CAAV,CAF8C;AAGlD,SAAO,UAAU,IAAI,OAAJ,CAAY,QAAQ,CAAR,CAAZ,IAA0B,KAA1B,GAAkC,CAAC,CAAD,CAHD;CAA7C;;;;;;;;AAYA,SAAS,gBAAT,CAA2B,MAA3B,EAAmC,KAAnC,EAA0C,KAA1C,EAAiD;AACtD,MAAI,MAAM,KAAC,KAAU,IAAV,GAAkB,OAAO,SAAP,CAAiB,KAAjB,CAAnB,GAA6C,MAA7C,CAD4C;AAEtD,MAAI,UAAU,IAAI,KAAJ,CAAU,KAAV,CAAV,CAFkD;AAGtD,MAAI,UAAU,EAAV,CAHkD;AAItD,UAAQ,OAAR,CAAgB,UAAU,KAAV,EAAiB,CAAjB,EAAoB;AAClC,QAAI,YAAY,UAAU,QAAQ,IAAI,CAAJ,CAAlB,GAA2B,IAA3B,CADkB;AAElC,YAAQ,IAAR,CAAa,IAAI,OAAJ,CAAY,KAAZ,EAAmB,YAAY,CAAZ,CAAnB,GAAoC,KAApC,CAAb,CAFkC;GAApB,CAAhB,CAJsD;AAQtD,SAAO,WAAW,CAAC,CAAD,CARoC;CAAjD;;;;;;;;AAiBA,SAAS,gBAAT,CAA2B,MAA3B,EAAmC,KAAnC,EAA0C,KAA1C,EAAiD;AACtD,MAAI,MAAM,KAAC,KAAU,IAAV,GAAkB,OAAO,SAAP,CAAiB,CAAjB,EAAoB,KAApB,CAAnB,GAAgD,MAAhD,CAD4C;AAEtD,MAAI,UAAU,IAAI,KAAJ,CAAU,KAAV,CAAV,CAFkD;AAGtD,SAAO,UAAU,IAAI,WAAJ,CAAgB,QAAQ,QAAQ,MAAR,GAAiB,CAAjB,CAAxB,CAAV,GAAyD,CAAC,CAAD,CAHV;CAAjD;;;;;;;AAWA,SAAS,kBAAT,CAA6B,MAA7B,EAAqC,KAArC,EAA4C;AACjD,MAAI,MAAM,QAAQ,OAAO,SAAP,CAAiB,CAAjB,EAAoB,KAApB,CAAR,GAAqC,MAArC,CADuC;AAEjD,SAAO,IAAI,KAAJ,CAAU,YAAV,CAAP,CAFiD;CAA5C;;;;;;;AAUA,SAAS,UAAT,CAAqB,MAArB,EAA6B,KAA7B,EAAoC;AACzC,MAAI,MAAM,QAAQ,OAAO,SAAP,CAAiB,KAAjB,CAAR,GAAkC,MAAlC,CAD+B;AAEzC,SAAO,IAAI,KAAJ,CAAU,YAAV,CAAP,CAFyC;CAApC;;;;;;;AAUA,SAAS,WAAT,CAAsB,MAAtB,EAAyC;MAAX,8DAAQ,iBAAG;;AAC9C,SAAO,iBAAiB,MAAjB,EAAyB,OAAzB,EAAkC,KAAlC,CAAP,CAD8C;CAAzC;;;;;;;AASA,SAAS,SAAT,CAAoB,MAApB,EAAuC;MAAX,8DAAQ,iBAAG;;AAC5C,SAAO,aAAa,MAAb,EAAqB,aAArB,EAAoC,KAApC,CAAP,CAD4C;CAAvC;;;AC7EP;;;;;;;;;;;;;;kBASe,UAAU,KAAV,EAAiB,UAAjB,EAA6B,EAA7B,EAAiC;AAC9C,UAAQ,MAAM,KAAN,CAAY,CAAZ,EAAe,aAAa,CAAb,CAAvB,CAD8C;AAE9C,MAAI,aAAa,IAAb,CAF0C;AAG9C,QAAM,IAAN,CAAW,UAAX,EAH8C;AAI9C,eAJ8C;AAK9C,MAAI,aAAa,GAAb,EAAkB;AACpB,UAAM,KAAN,GADoB;AAEpB,iBAFoB;GAAtB;AAIA,SAAO,EAAC,OAAO,KAAP,EAAc,OAAO,UAAP,EAAtB,CAT8C;CAAjC","file":"marky.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict'\n\n/**\n * Marky Mark\n * Author: Patrick Fricano\n * https://www.github.com/patrickfatrick/marky-marked\n */\n\nimport marky from './src/marky'\n\nmodule.exports = marky\n","/**\n * marked - a markdown parser\n * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/chjj/marked\n */\n\n;(function() {\n\n/**\n * Block-Level Grammar\n */\n\nvar block = {\n  newline: /^\\n+/,\n  code: /^( {4}[^\\n]+\\n*)+/,\n  fences: noop,\n  hr: /^( *[-*_]){3,} *(?:\\n+|$)/,\n  heading: /^ *(#{1,6}) *([^\\n]+?) *#* *(?:\\n+|$)/,\n  nptable: noop,\n  lheading: /^([^\\n]+)\\n *(=|-){2,} *(?:\\n+|$)/,\n  blockquote: /^( *>[^\\n]+(\\n(?!def)[^\\n]+)*\\n*)+/,\n  list: /^( *)(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n  html: /^ *(?:comment *(?:\\n|\\s*$)|closed *(?:\\n{2,}|\\s*$)|closing *(?:\\n{2,}|\\s*$))/,\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +[\"(]([^\\n]+)[\")])? *(?:\\n+|$)/,\n  table: noop,\n  paragraph: /^((?:[^\\n]+\\n?(?!hr|heading|lheading|blockquote|tag|def))+)\\n*/,\n  text: /^[^\\n]+/\n};\n\nblock.bullet = /(?:[*+-]|\\d+\\.)/;\nblock.item = /^( *)(bull) [^\\n]*(?:\\n(?!\\1bull )[^\\n]*)*/;\nblock.item = replace(block.item, 'gm')\n  (/bull/g, block.bullet)\n  ();\n\nblock.list = replace(block.list)\n  (/bull/g, block.bullet)\n  ('hr', '\\\\n+(?=\\\\1?(?:[-*_] *){3,}(?:\\\\n+|$))')\n  ('def', '\\\\n+(?=' + block.def.source + ')')\n  ();\n\nblock.blockquote = replace(block.blockquote)\n  ('def', block.def)\n  ();\n\nblock._tag = '(?!(?:'\n  + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code'\n  + '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo'\n  + '|span|br|wbr|ins|del|img)\\\\b)\\\\w+(?!:/|[^\\\\w\\\\s@]*@)\\\\b';\n\nblock.html = replace(block.html)\n  ('comment', /<!--[\\s\\S]*?-->/)\n  ('closed', /<(tag)[\\s\\S]+?<\\/\\1>/)\n  ('closing', /<tag(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/)\n  (/tag/g, block._tag)\n  ();\n\nblock.paragraph = replace(block.paragraph)\n  ('hr', block.hr)\n  ('heading', block.heading)\n  ('lheading', block.lheading)\n  ('blockquote', block.blockquote)\n  ('tag', '<' + block._tag)\n  ('def', block.def)\n  ();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = merge({}, block);\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = merge({}, block.normal, {\n  fences: /^ *(`{3,}|~{3,})[ \\.]*(\\S+)? *\\n([\\s\\S]*?)\\s*\\1 *(?:\\n+|$)/,\n  paragraph: /^/,\n  heading: /^ *(#{1,6}) +([^\\n]+?) *#* *(?:\\n+|$)/\n});\n\nblock.gfm.paragraph = replace(block.paragraph)\n  ('(?!', '(?!'\n    + block.gfm.fences.source.replace('\\\\1', '\\\\2') + '|'\n    + block.list.source.replace('\\\\1', '\\\\3') + '|')\n  ();\n\n/**\n * GFM + Tables Block Grammar\n */\n\nblock.tables = merge({}, block.gfm, {\n  nptable: /^ *(\\S.*\\|.*)\\n *([-:]+ *\\|[-| :]*)\\n((?:.*\\|.*(?:\\n|$))*)\\n*/,\n  table: /^ *\\|(.+)\\n *\\|( *[-:]+[-| :]*)\\n((?: *\\|.*(?:\\n|$))*)\\n*/\n});\n\n/**\n * Block Lexer\n */\n\nfunction Lexer(options) {\n  this.tokens = [];\n  this.tokens.links = {};\n  this.options = options || marked.defaults;\n  this.rules = block.normal;\n\n  if (this.options.gfm) {\n    if (this.options.tables) {\n      this.rules = block.tables;\n    } else {\n      this.rules = block.gfm;\n    }\n  }\n}\n\n/**\n * Expose Block Rules\n */\n\nLexer.rules = block;\n\n/**\n * Static Lex Method\n */\n\nLexer.lex = function(src, options) {\n  var lexer = new Lexer(options);\n  return lexer.lex(src);\n};\n\n/**\n * Preprocessing\n */\n\nLexer.prototype.lex = function(src) {\n  src = src\n    .replace(/\\r\\n|\\r/g, '\\n')\n    .replace(/\\t/g, '    ')\n    .replace(/\\u00a0/g, ' ')\n    .replace(/\\u2424/g, '\\n');\n\n  return this.token(src, true);\n};\n\n/**\n * Lexing\n */\n\nLexer.prototype.token = function(src, top, bq) {\n  var src = src.replace(/^ +$/gm, '')\n    , next\n    , loose\n    , cap\n    , bull\n    , b\n    , item\n    , space\n    , i\n    , l;\n\n  while (src) {\n    // newline\n    if (cap = this.rules.newline.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[0].length > 1) {\n        this.tokens.push({\n          type: 'space'\n        });\n      }\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      cap = cap[0].replace(/^ {4}/gm, '');\n      this.tokens.push({\n        type: 'code',\n        text: !this.options.pedantic\n          ? cap.replace(/\\n+$/, '')\n          : cap\n      });\n      continue;\n    }\n\n    // fences (gfm)\n    if (cap = this.rules.fences.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'code',\n        lang: cap[2],\n        text: cap[3] || ''\n      });\n      continue;\n    }\n\n    // heading\n    if (cap = this.rules.heading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[1].length,\n        text: cap[2]\n      });\n      continue;\n    }\n\n    // table no leading pipe (gfm)\n    if (top && (cap = this.rules.nptable.exec(src))) {\n      src = src.substring(cap[0].length);\n\n      item = {\n        type: 'table',\n        header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3].replace(/\\n$/, '').split('\\n')\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = 'right';\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = 'center';\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = 'left';\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = item.cells[i].split(/ *\\| */);\n      }\n\n      this.tokens.push(item);\n\n      continue;\n    }\n\n    // lheading\n    if (cap = this.rules.lheading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[2] === '=' ? 1 : 2,\n        text: cap[1]\n      });\n      continue;\n    }\n\n    // hr\n    if (cap = this.rules.hr.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'hr'\n      });\n      continue;\n    }\n\n    // blockquote\n    if (cap = this.rules.blockquote.exec(src)) {\n      src = src.substring(cap[0].length);\n\n      this.tokens.push({\n        type: 'blockquote_start'\n      });\n\n      cap = cap[0].replace(/^ *> ?/gm, '');\n\n      // Pass `top` to keep the current\n      // \"toplevel\" state. This is exactly\n      // how markdown.pl works.\n      this.token(cap, top, true);\n\n      this.tokens.push({\n        type: 'blockquote_end'\n      });\n\n      continue;\n    }\n\n    // list\n    if (cap = this.rules.list.exec(src)) {\n      src = src.substring(cap[0].length);\n      bull = cap[2];\n\n      this.tokens.push({\n        type: 'list_start',\n        ordered: bull.length > 1\n      });\n\n      // Get each top-level item.\n      cap = cap[0].match(this.rules.item);\n\n      next = false;\n      l = cap.length;\n      i = 0;\n\n      for (; i < l; i++) {\n        item = cap[i];\n\n        // Remove the list item's bullet\n        // so it is seen as the next token.\n        space = item.length;\n        item = item.replace(/^ *([*+-]|\\d+\\.) +/, '');\n\n        // Outdent whatever the\n        // list item contains. Hacky.\n        if (~item.indexOf('\\n ')) {\n          space -= item.length;\n          item = !this.options.pedantic\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n            : item.replace(/^ {1,4}/gm, '');\n        }\n\n        // Determine whether the next list item belongs here.\n        // Backpedal if it does not belong in this list.\n        if (this.options.smartLists && i !== l - 1) {\n          b = block.bullet.exec(cap[i + 1])[0];\n          if (bull !== b && !(bull.length > 1 && b.length > 1)) {\n            src = cap.slice(i + 1).join('\\n') + src;\n            i = l - 1;\n          }\n        }\n\n        // Determine whether item is loose or not.\n        // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n        // for discount behavior.\n        loose = next || /\\n\\n(?!\\s*$)/.test(item);\n        if (i !== l - 1) {\n          next = item.charAt(item.length - 1) === '\\n';\n          if (!loose) loose = next;\n        }\n\n        this.tokens.push({\n          type: loose\n            ? 'loose_item_start'\n            : 'list_item_start'\n        });\n\n        // Recurse.\n        this.token(item, false, bq);\n\n        this.tokens.push({\n          type: 'list_item_end'\n        });\n      }\n\n      this.tokens.push({\n        type: 'list_end'\n      });\n\n      continue;\n    }\n\n    // html\n    if (cap = this.rules.html.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: this.options.sanitize\n          ? 'paragraph'\n          : 'html',\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: cap[0]\n      });\n      continue;\n    }\n\n    // def\n    if ((!bq && top) && (cap = this.rules.def.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.links[cap[1].toLowerCase()] = {\n        href: cap[2],\n        title: cap[3]\n      };\n      continue;\n    }\n\n    // table (gfm)\n    if (top && (cap = this.rules.table.exec(src))) {\n      src = src.substring(cap[0].length);\n\n      item = {\n        type: 'table',\n        header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3].replace(/(?: *\\| *)?\\n$/, '').split('\\n')\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = 'right';\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = 'center';\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = 'left';\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = item.cells[i]\n          .replace(/^ *\\| *| *\\| *$/g, '')\n          .split(/ *\\| */);\n      }\n\n      this.tokens.push(item);\n\n      continue;\n    }\n\n    // top-level paragraph\n    if (top && (cap = this.rules.paragraph.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'paragraph',\n        text: cap[1].charAt(cap[1].length - 1) === '\\n'\n          ? cap[1].slice(0, -1)\n          : cap[1]\n      });\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      // Top-level should never reach here.\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'text',\n        text: cap[0]\n      });\n      continue;\n    }\n\n    if (src) {\n      throw new\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return this.tokens;\n};\n\n/**\n * Inline-Level Grammar\n */\n\nvar inline = {\n  escape: /^\\\\([\\\\`*{}\\[\\]()#+\\-.!_>])/,\n  autolink: /^<([^ >]+(@|:\\/)[^ >]+)>/,\n  url: noop,\n  tag: /^<!--[\\s\\S]*?-->|^<\\/?\\w+(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/,\n  link: /^!?\\[(inside)\\]\\(href\\)/,\n  reflink: /^!?\\[(inside)\\]\\s*\\[([^\\]]*)\\]/,\n  nolink: /^!?\\[((?:\\[[^\\]]*\\]|[^\\[\\]])*)\\]/,\n  strong: /^__([\\s\\S]+?)__(?!_)|^\\*\\*([\\s\\S]+?)\\*\\*(?!\\*)/,\n  em: /^\\b_((?:[^_]|__)+?)_\\b|^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/,\n  code: /^(`+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/,\n  br: /^ {2,}\\n(?!\\s*$)/,\n  del: noop,\n  text: /^[\\s\\S]+?(?=[\\\\<!\\[_*`]| {2,}\\n|$)/\n};\n\ninline._inside = /(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*/;\ninline._href = /\\s*<?([\\s\\S]*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*/;\n\ninline.link = replace(inline.link)\n  ('inside', inline._inside)\n  ('href', inline._href)\n  ();\n\ninline.reflink = replace(inline.reflink)\n  ('inside', inline._inside)\n  ();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = merge({}, inline);\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = merge({}, inline.normal, {\n  strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n  em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/\n});\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = merge({}, inline.normal, {\n  escape: replace(inline.escape)('])', '~|])')(),\n  url: /^(https?:\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])/,\n  del: /^~~(?=\\S)([\\s\\S]*?\\S)~~/,\n  text: replace(inline.text)\n    (']|', '~]|')\n    ('|', '|https?://|')\n    ()\n});\n\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = merge({}, inline.gfm, {\n  br: replace(inline.br)('{2,}', '*')(),\n  text: replace(inline.gfm.text)('{2,}', '*')()\n});\n\n/**\n * Inline Lexer & Compiler\n */\n\nfunction InlineLexer(links, options) {\n  this.options = options || marked.defaults;\n  this.links = links;\n  this.rules = inline.normal;\n  this.renderer = this.options.renderer || new Renderer;\n  this.renderer.options = this.options;\n\n  if (!this.links) {\n    throw new\n      Error('Tokens array requires a `links` property.');\n  }\n\n  if (this.options.gfm) {\n    if (this.options.breaks) {\n      this.rules = inline.breaks;\n    } else {\n      this.rules = inline.gfm;\n    }\n  } else if (this.options.pedantic) {\n    this.rules = inline.pedantic;\n  }\n}\n\n/**\n * Expose Inline Rules\n */\n\nInlineLexer.rules = inline;\n\n/**\n * Static Lexing/Compiling Method\n */\n\nInlineLexer.output = function(src, links, options) {\n  var inline = new InlineLexer(links, options);\n  return inline.output(src);\n};\n\n/**\n * Lexing/Compiling\n */\n\nInlineLexer.prototype.output = function(src) {\n  var out = ''\n    , link\n    , text\n    , href\n    , cap;\n\n  while (src) {\n    // escape\n    if (cap = this.rules.escape.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += cap[1];\n      continue;\n    }\n\n    // autolink\n    if (cap = this.rules.autolink.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[2] === '@') {\n        text = cap[1].charAt(6) === ':'\n          ? this.mangle(cap[1].substring(7))\n          : this.mangle(cap[1]);\n        href = this.mangle('mailto:') + text;\n      } else {\n        text = escape(cap[1]);\n        href = text;\n      }\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // url (gfm)\n    if (!this.inLink && (cap = this.rules.url.exec(src))) {\n      src = src.substring(cap[0].length);\n      text = escape(cap[1]);\n      href = text;\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // tag\n    if (cap = this.rules.tag.exec(src)) {\n      if (!this.inLink && /^<a /i.test(cap[0])) {\n        this.inLink = true;\n      } else if (this.inLink && /^<\\/a>/i.test(cap[0])) {\n        this.inLink = false;\n      }\n      src = src.substring(cap[0].length);\n      out += this.options.sanitize\n        ? this.options.sanitizer\n          ? this.options.sanitizer(cap[0])\n          : escape(cap[0])\n        : cap[0]\n      continue;\n    }\n\n    // link\n    if (cap = this.rules.link.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.inLink = true;\n      out += this.outputLink(cap, {\n        href: cap[2],\n        title: cap[3]\n      });\n      this.inLink = false;\n      continue;\n    }\n\n    // reflink, nolink\n    if ((cap = this.rules.reflink.exec(src))\n        || (cap = this.rules.nolink.exec(src))) {\n      src = src.substring(cap[0].length);\n      link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = this.links[link.toLowerCase()];\n      if (!link || !link.href) {\n        out += cap[0].charAt(0);\n        src = cap[0].substring(1) + src;\n        continue;\n      }\n      this.inLink = true;\n      out += this.outputLink(cap, link);\n      this.inLink = false;\n      continue;\n    }\n\n    // strong\n    if (cap = this.rules.strong.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.strong(this.output(cap[2] || cap[1]));\n      continue;\n    }\n\n    // em\n    if (cap = this.rules.em.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.em(this.output(cap[2] || cap[1]));\n      continue;\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.codespan(escape(cap[2], true));\n      continue;\n    }\n\n    // br\n    if (cap = this.rules.br.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.br();\n      continue;\n    }\n\n    // del (gfm)\n    if (cap = this.rules.del.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.del(this.output(cap[1]));\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.text(escape(this.smartypants(cap[0])));\n      continue;\n    }\n\n    if (src) {\n      throw new\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return out;\n};\n\n/**\n * Compile Link\n */\n\nInlineLexer.prototype.outputLink = function(cap, link) {\n  var href = escape(link.href)\n    , title = link.title ? escape(link.title) : null;\n\n  return cap[0].charAt(0) !== '!'\n    ? this.renderer.link(href, title, this.output(cap[1]))\n    : this.renderer.image(href, title, escape(cap[1]));\n};\n\n/**\n * Smartypants Transformations\n */\n\nInlineLexer.prototype.smartypants = function(text) {\n  if (!this.options.smartypants) return text;\n  return text\n    // em-dashes\n    .replace(/---/g, '\\u2014')\n    // en-dashes\n    .replace(/--/g, '\\u2013')\n    // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n    // closing singles & apostrophes\n    .replace(/'/g, '\\u2019')\n    // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n    // closing doubles\n    .replace(/\"/g, '\\u201d')\n    // ellipses\n    .replace(/\\.{3}/g, '\\u2026');\n};\n\n/**\n * Mangle Links\n */\n\nInlineLexer.prototype.mangle = function(text) {\n  if (!this.options.mangle) return text;\n  var out = ''\n    , l = text.length\n    , i = 0\n    , ch;\n\n  for (; i < l; i++) {\n    ch = text.charCodeAt(i);\n    if (Math.random() > 0.5) {\n      ch = 'x' + ch.toString(16);\n    }\n    out += '&#' + ch + ';';\n  }\n\n  return out;\n};\n\n/**\n * Renderer\n */\n\nfunction Renderer(options) {\n  this.options = options || {};\n}\n\nRenderer.prototype.code = function(code, lang, escaped) {\n  if (this.options.highlight) {\n    var out = this.options.highlight(code, lang);\n    if (out != null && out !== code) {\n      escaped = true;\n      code = out;\n    }\n  }\n\n  if (!lang) {\n    return '<pre><code>'\n      + (escaped ? code : escape(code, true))\n      + '\\n</code></pre>';\n  }\n\n  return '<pre><code class=\"'\n    + this.options.langPrefix\n    + escape(lang, true)\n    + '\">'\n    + (escaped ? code : escape(code, true))\n    + '\\n</code></pre>\\n';\n};\n\nRenderer.prototype.blockquote = function(quote) {\n  return '<blockquote>\\n' + quote + '</blockquote>\\n';\n};\n\nRenderer.prototype.html = function(html) {\n  return html;\n};\n\nRenderer.prototype.heading = function(text, level, raw) {\n  return '<h'\n    + level\n    + ' id=\"'\n    + this.options.headerPrefix\n    + raw.toLowerCase().replace(/[^\\w]+/g, '-')\n    + '\">'\n    + text\n    + '</h'\n    + level\n    + '>\\n';\n};\n\nRenderer.prototype.hr = function() {\n  return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n};\n\nRenderer.prototype.list = function(body, ordered) {\n  var type = ordered ? 'ol' : 'ul';\n  return '<' + type + '>\\n' + body + '</' + type + '>\\n';\n};\n\nRenderer.prototype.listitem = function(text) {\n  return '<li>' + text + '</li>\\n';\n};\n\nRenderer.prototype.paragraph = function(text) {\n  return '<p>' + text + '</p>\\n';\n};\n\nRenderer.prototype.table = function(header, body) {\n  return '<table>\\n'\n    + '<thead>\\n'\n    + header\n    + '</thead>\\n'\n    + '<tbody>\\n'\n    + body\n    + '</tbody>\\n'\n    + '</table>\\n';\n};\n\nRenderer.prototype.tablerow = function(content) {\n  return '<tr>\\n' + content + '</tr>\\n';\n};\n\nRenderer.prototype.tablecell = function(content, flags) {\n  var type = flags.header ? 'th' : 'td';\n  var tag = flags.align\n    ? '<' + type + ' style=\"text-align:' + flags.align + '\">'\n    : '<' + type + '>';\n  return tag + content + '</' + type + '>\\n';\n};\n\n// span level renderer\nRenderer.prototype.strong = function(text) {\n  return '<strong>' + text + '</strong>';\n};\n\nRenderer.prototype.em = function(text) {\n  return '<em>' + text + '</em>';\n};\n\nRenderer.prototype.codespan = function(text) {\n  return '<code>' + text + '</code>';\n};\n\nRenderer.prototype.br = function() {\n  return this.options.xhtml ? '<br/>' : '<br>';\n};\n\nRenderer.prototype.del = function(text) {\n  return '<del>' + text + '</del>';\n};\n\nRenderer.prototype.link = function(href, title, text) {\n  if (this.options.sanitize) {\n    try {\n      var prot = decodeURIComponent(unescape(href))\n        .replace(/[^\\w:]/g, '')\n        .toLowerCase();\n    } catch (e) {\n      return '';\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0) {\n      return '';\n    }\n  }\n  var out = '<a href=\"' + href + '\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += '>' + text + '</a>';\n  return out;\n};\n\nRenderer.prototype.image = function(href, title, text) {\n  var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += this.options.xhtml ? '/>' : '>';\n  return out;\n};\n\nRenderer.prototype.text = function(text) {\n  return text;\n};\n\n/**\n * Parsing & Compiling\n */\n\nfunction Parser(options) {\n  this.tokens = [];\n  this.token = null;\n  this.options = options || marked.defaults;\n  this.options.renderer = this.options.renderer || new Renderer;\n  this.renderer = this.options.renderer;\n  this.renderer.options = this.options;\n}\n\n/**\n * Static Parse Method\n */\n\nParser.parse = function(src, options, renderer) {\n  var parser = new Parser(options, renderer);\n  return parser.parse(src);\n};\n\n/**\n * Parse Loop\n */\n\nParser.prototype.parse = function(src) {\n  this.inline = new InlineLexer(src.links, this.options, this.renderer);\n  this.tokens = src.reverse();\n\n  var out = '';\n  while (this.next()) {\n    out += this.tok();\n  }\n\n  return out;\n};\n\n/**\n * Next Token\n */\n\nParser.prototype.next = function() {\n  return this.token = this.tokens.pop();\n};\n\n/**\n * Preview Next Token\n */\n\nParser.prototype.peek = function() {\n  return this.tokens[this.tokens.length - 1] || 0;\n};\n\n/**\n * Parse Text Tokens\n */\n\nParser.prototype.parseText = function() {\n  var body = this.token.text;\n\n  while (this.peek().type === 'text') {\n    body += '\\n' + this.next().text;\n  }\n\n  return this.inline.output(body);\n};\n\n/**\n * Parse Current Token\n */\n\nParser.prototype.tok = function() {\n  switch (this.token.type) {\n    case 'space': {\n      return '';\n    }\n    case 'hr': {\n      return this.renderer.hr();\n    }\n    case 'heading': {\n      return this.renderer.heading(\n        this.inline.output(this.token.text),\n        this.token.depth,\n        this.token.text);\n    }\n    case 'code': {\n      return this.renderer.code(this.token.text,\n        this.token.lang,\n        this.token.escaped);\n    }\n    case 'table': {\n      var header = ''\n        , body = ''\n        , i\n        , row\n        , cell\n        , flags\n        , j;\n\n      // header\n      cell = '';\n      for (i = 0; i < this.token.header.length; i++) {\n        flags = { header: true, align: this.token.align[i] };\n        cell += this.renderer.tablecell(\n          this.inline.output(this.token.header[i]),\n          { header: true, align: this.token.align[i] }\n        );\n      }\n      header += this.renderer.tablerow(cell);\n\n      for (i = 0; i < this.token.cells.length; i++) {\n        row = this.token.cells[i];\n\n        cell = '';\n        for (j = 0; j < row.length; j++) {\n          cell += this.renderer.tablecell(\n            this.inline.output(row[j]),\n            { header: false, align: this.token.align[j] }\n          );\n        }\n\n        body += this.renderer.tablerow(cell);\n      }\n      return this.renderer.table(header, body);\n    }\n    case 'blockquote_start': {\n      var body = '';\n\n      while (this.next().type !== 'blockquote_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.blockquote(body);\n    }\n    case 'list_start': {\n      var body = ''\n        , ordered = this.token.ordered;\n\n      while (this.next().type !== 'list_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.list(body, ordered);\n    }\n    case 'list_item_start': {\n      var body = '';\n\n      while (this.next().type !== 'list_item_end') {\n        body += this.token.type === 'text'\n          ? this.parseText()\n          : this.tok();\n      }\n\n      return this.renderer.listitem(body);\n    }\n    case 'loose_item_start': {\n      var body = '';\n\n      while (this.next().type !== 'list_item_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.listitem(body);\n    }\n    case 'html': {\n      var html = !this.token.pre && !this.options.pedantic\n        ? this.inline.output(this.token.text)\n        : this.token.text;\n      return this.renderer.html(html);\n    }\n    case 'paragraph': {\n      return this.renderer.paragraph(this.inline.output(this.token.text));\n    }\n    case 'text': {\n      return this.renderer.paragraph(this.parseText());\n    }\n  }\n};\n\n/**\n * Helpers\n */\n\nfunction escape(html, encode) {\n  return html\n    .replace(!encode ? /&(?!#?\\w+;)/g : /&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#39;');\n}\n\nfunction unescape(html) {\n  return html.replace(/&([#\\w]+);/g, function(_, n) {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nfunction replace(regex, opt) {\n  regex = regex.source;\n  opt = opt || '';\n  return function self(name, val) {\n    if (!name) return new RegExp(regex, opt);\n    val = val.source || val;\n    val = val.replace(/(^|[^\\[])\\^/g, '$1');\n    regex = regex.replace(name, val);\n    return self;\n  };\n}\n\nfunction noop() {}\nnoop.exec = noop;\n\nfunction merge(obj) {\n  var i = 1\n    , target\n    , key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\n\n/**\n * Marked\n */\n\nfunction marked(src, opt, callback) {\n  if (callback || typeof opt === 'function') {\n    if (!callback) {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n\n    var highlight = opt.highlight\n      , tokens\n      , pending\n      , i = 0;\n\n    try {\n      tokens = Lexer.lex(src, opt)\n    } catch (e) {\n      return callback(e);\n    }\n\n    pending = tokens.length;\n\n    var done = function(err) {\n      if (err) {\n        opt.highlight = highlight;\n        return callback(err);\n      }\n\n      var out;\n\n      try {\n        out = Parser.parse(tokens, opt);\n      } catch (e) {\n        err = e;\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!pending) return done();\n\n    for (; i < tokens.length; i++) {\n      (function(token) {\n        if (token.type !== 'code') {\n          return --pending || done();\n        }\n        return highlight(token.text, token.lang, function(err, code) {\n          if (err) return done(err);\n          if (code == null || code === token.text) {\n            return --pending || done();\n          }\n          token.text = code;\n          token.escaped = true;\n          --pending || done();\n        });\n      })(tokens[i]);\n    }\n\n    return;\n  }\n  try {\n    if (opt) opt = merge({}, marked.defaults, opt);\n    return Parser.parse(Lexer.lex(src, opt), opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/chjj/marked.';\n    if ((opt || marked.defaults).silent) {\n      return '<p>An error occured:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  return marked;\n};\n\nmarked.defaults = {\n  gfm: true,\n  tables: true,\n  breaks: false,\n  pedantic: false,\n  sanitize: false,\n  sanitizer: null,\n  mangle: true,\n  smartLists: false,\n  silent: false,\n  highlight: null,\n  langPrefix: 'lang-',\n  smartypants: false,\n  headerPrefix: '',\n  renderer: new Renderer,\n  xhtml: false\n};\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\n\nmarked.Renderer = Renderer;\n\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\n\nmarked.InlineLexer = InlineLexer;\nmarked.inlineLexer = InlineLexer.output;\n\nmarked.parse = marked;\n\nif (typeof module !== 'undefined' && typeof exports === 'object') {\n  module.exports = marked;\n} else if (typeof define === 'function' && define.amd) {\n  define(function() { return marked; });\n} else {\n  this.marked = marked;\n}\n\n}).call(function() {\n  return this || (typeof window !== 'undefined' ? window : global);\n}());\n","'use strict'\n\nimport {Marky} from './modules/Marky'\n\nlet marky = Object.create(Marky)\nmarky.init()\n\nexport default marky\n","'use strict'\n\nimport {Element} from './Element'\nimport {Icon} from './Icon'\n\n/**\n * Creates HTML button elements\n * @type {Element}\n * @requires Icon\n * @param {String}      title   title for the element\n * @param {String}      id      editor ID to associate with the element\n * @param {Array}      iconClasses      classes to use for <i> elements\n */\nexport var Button = Object.create(Element)\nButton.init = function (title, id, ...iconClasses) {\n  Element.init.call(this, 'button', title, id)\n  this.addClass(this.title, this.id)\n  this.assign('value', this.title)\n  this.icon = Object.create(Icon)\n  this.icon.init(iconClasses)\n  this.icon.appendTo(this.element)\n}\n","'use strict'\n\nimport {Element} from './Element'\nimport {HeadingItem} from './ListItems'\n\n/**\n * Creates dialog (modal) elements\n * @type {Element}\n * @requires  HeadingItem\n * @param {String}      title   title for the element\n * @param {String}      id      editor ID to associate with the element\n */\nexport var LinkDialog = Object.create(Element)\nLinkDialog.init = function (title, id) {\n  Element.init.call(this, 'div', title, id)\n  this.addClass(this.title, id, 'dialog')\n\n  LinkDialog.linkForm = Object.create(Element)\n  this.linkForm.init('form', 'Link Form')\n  this.linkForm.assign('id', this.id + '-link-form')\n\n  this.linkUrlInput = Object.create(Element)\n  this.linkUrlInput.init('input', 'Link Url')\n  this.linkUrlInput.addClass('link-url-input')\n  this.linkUrlInput.assign('type', 'text')\n  this.linkUrlInput.assign('name', this.id + '-link-url-input')\n  this.linkUrlInput.assign('placeholder', 'http://url.com')\n\n  this.linkDisplayInput = Object.create(Element)\n  this.linkDisplayInput.init('input', 'Link Display')\n  this.linkDisplayInput.addClass('link-display-input')\n  this.linkDisplayInput.assign('type', 'text')\n  this.linkDisplayInput.assign('name', this.id + '-link-display-input')\n  this.linkDisplayInput.assign('placeholder', 'Display text')\n\n  this.insertButton = Object.create(Element)\n  this.insertButton.init('button', 'Insert Link')\n  this.insertButton.addClass('insert-link')\n  this.insertButton.assign('textContent', 'Insert')\n\n  this.linkUrlInput.appendTo(this.linkForm.element)\n  this.linkDisplayInput.appendTo(this.linkForm.element)\n  this.insertButton.appendTo(this.linkForm.element)\n  this.linkForm.appendTo(this.element)\n}\n\nexport var ImageDialog = Object.create(Element)\nImageDialog.init = function (title, id) {\n  Element.init.call(this, 'div', title, id)\n  this.addClass(this.title, id, 'dialog')\n\n  ImageDialog.imageForm = Object.create(Element)\n  this.imageForm.init('form', 'Image Form')\n  this.imageForm.assign('id', this.id + '-image-form')\n\n  this.imageSourceInput = Object.create(Element)\n  this.imageSourceInput.init('input', 'Image Source')\n  this.imageSourceInput.addClass('image-source-input')\n  this.imageSourceInput.assign('type', 'text')\n  this.imageSourceInput.assign('name', this.id + '-image-source-input')\n  this.imageSourceInput.assign('placeholder', 'http://url.com/image.jpg')\n\n  this.imageAltInput = Object.create(Element)\n  this.imageAltInput.init('input', 'Image Alt')\n  this.imageAltInput.addClass('image-alt-input')\n  this.imageAltInput.assign('type', 'text')\n  this.imageAltInput.assign('name', this.id + '-image-alt-input')\n  this.imageAltInput.assign('placeholder', 'Alt text')\n\n  this.insertButton = Object.create(Element)\n  this.insertButton.init('button', 'Insert Image')\n  this.insertButton.addClass('insert-image')\n  this.insertButton.assign('textContent', 'Insert')\n\n  this.imageSourceInput.appendTo(this.imageForm.element)\n  this.imageAltInput.appendTo(this.imageForm.element)\n  this.insertButton.appendTo(this.imageForm.element)\n  this.imageForm.appendTo(this.element)\n}\n\nexport var HeadingDialog = Object.create(Element)\nHeadingDialog.init = function (title, id) {\n  Element.init.call(this, 'div', title, id)\n  this.addClass(this.title, id, 'dialog')\n\n  this.headingList = Object.create(Element)\n  this.headingList.init('ul', 'Heading List')\n  this.headingList.assign('id', id + '-heading-list')\n\n  this.options = []\n\n  for (let i = 0; i < 6; i++) {\n    let option = Object.create(HeadingItem)\n    option.init('Heading ' + (i + 1), i + 1)\n    this.options.push(option)\n  }\n\n  let remove = Object.create(HeadingItem)\n  remove.init('Remove Heading', '0', 'fa', 'fa-remove')\n  this.options.push(remove)\n\n  this.options.forEach((option) => {\n    option.appendTo(this.headingList.element)\n  })\n\n  this.headingList.appendTo(this.element)\n}\n","'use strict'\n\n/**\n * Creates an HTML element with some built-in shortcut methods\n * @param {String}      type    tag name for the element\n * @param {String}      title   title for the element\n * @param {String}      id      editor ID to associate with the element\n */\nexport var Element = {\n  init (type, title = null, id = null) {\n    this.type = type\n    this.title = title\n    this.id = id\n    this.element = this.register()\n    if (this.title) this.element.title = this.title\n  },\n  register () {\n    return document.createElement(this.type)\n  },\n  assign (prop, value) {\n    this.element[prop] = value\n  },\n  appendTo (container) {\n    container.appendChild(this.element)\n  },\n  addClass (...classNames) {\n    classNames.forEach((className) => {\n      this.element.classList.add(className.replace(/[ ]/g, '-').toLowerCase())\n    })\n  },\n  removeClass (...classNames) {\n    classNames.forEach((className) => {\n      this.element.classList.remove(className.replace(/[ ]/g, '-').toLowerCase())\n    })\n  },\n  listen (evt, cb) {\n    this.element.addEventListener(evt, cb)\n  }\n}\n","import {Element} from './Element'\n\n/**\n * Creates HTML i elements\n * @type {Element}\n * @param {Array} classNames classes to use with element\n */\nexport var Icon = Object.create(Element)\nIcon.init = function (classNames) {\n  Element.init.call(this, 'i')\n  this.addClass(...classNames)\n}\n","'use strict'\n\nimport {Element} from './Element'\nimport {Icon} from './Icon'\n\n/**\n * Creates HTML option elements\n * @type {Element}\n * @requires  Icon\n * @param {String}  title   title for the element\n * @param {String}  value   a value to assign the element\n * @param {Array}  iconClasses    classes to use for <i> elements\n */\nexport var HeadingItem = Object.create(Element)\nHeadingItem.init = function (title, value, ...iconClasses) {\n  Element.init.call(this, 'li', title)\n  this.addClass(this.title.replace(' ', '-'))\n  this.assign('value', value)\n\n  this.button = Object.create(Element)\n  this.button.init('button', title)\n  this.button.assign('value', value)\n  this.button.addClass('heading-button')\n  this.button.appendTo(this.element)\n\n  if (iconClasses.length) {\n    this.icon = Object.create(Icon)\n    this.icon.init(iconClasses)\n    this.icon.appendTo(this.button.element)\n  } else {\n    this.button.assign('textContent', value)\n  }\n}\n","'use strict'\n\nimport mark from './mark'\nimport * as dispatcher from './dispatcher'\nimport {markyupdate, markychange} from './custom-events'\nimport {inlineHandler, blockHandler, insertHandler, listHandler, indentHandler} from './handlers'\n\nexport var Marky = {\n  init (editor, container) {\n    this.mark = mark\n    this.state = [{markdown: '', html: '', selection: [0, 0]}]\n    this.index = 0\n    this.editor = editor\n    this.container = container\n  },\n\n  /**\n   * Removes the container and all descendants from the DOM\n   * @param  {container} container the container used to invoke `mark()`\n   */\n  destroy (container = this.container) {\n    if (container.parentNode) {\n      container.parentNode.removeChild(container)\n    }\n  },\n\n  /**\n   * Handles updating the state on forward-progress changes\n   * @requires dispatcher/update\n   * @param {String} markdown the new markdown blob\n   * @param {Array}  state    the state timeline\n   * @param {Number} index    current state index\n   */\n  update (markdown, selection = [0, 0], state = this.state, index = this.index, editor = this.editor) {\n    const action = dispatcher.update(markdown, selection, state, index)\n    this.state = action.state\n    this.index = action.index\n    editor.dispatchEvent(markychange)\n    return this.index\n  },\n\n  /**\n   * Handles moving backward in state\n   * @requires dispatcher/undo\n   * @param   {Number}      num    number of states to move back\n   * @param   {Array}       state  the state timeline\n   * @param   {Number}      index  current state index\n   * @param   {HTMLElement} editor the marky marked editor\n   * @returns {Number}      the new index\n   */\n  undo (num = 1, state = this.state, index = this.index, editor = this.editor) {\n    if (index === 0) return index\n\n    const action = dispatcher.undo(num, state, index)\n    this.index = action.index\n    editor.value = action.state.markdown\n    editor.setSelectionRange(action.state.selection[0], action.state.selection[1])\n    editor.nextSibling.value = action.state.html\n    editor.dispatchEvent(markychange)\n    return this.index\n  },\n\n  /**\n   * Handles moving forward in state\n   * @requires dispatcher/redo\n   * @param   {Number}      num    number of states to move back\n   * @param   {Array}       state  the state timeline\n   * @param   {Number}      index  current state index\n   * @param   {HTMLElement} editor the marky marked editor\n   * @returns {Number}      the new index\n   */\n  redo (num = 1, state = this.state, index = this.index, editor = this.editor) {\n    if (index === state.length - 1) return index\n\n    const action = dispatcher.redo(num, state, index)\n    this.index = action.index\n    editor.value = action.state.markdown\n    editor.setSelectionRange(action.state.selection[0], action.state.selection[1])\n    editor.nextSibling.value = action.state.html\n    editor.dispatchEvent(markychange)\n    return this.index\n  },\n\n  /**\n   * Setsa the selection indices in the editor\n   * @param   {Array}       arr    starting and ending indices\n   * @param   {HTMLElement} editor the marky marked editor\n   * @returns {Array}       the array that was passed in\n   */\n  setSelection (arr = [0, 0], editor = this.editor) {\n    editor.setSelectionRange(arr[0], arr[1])\n    return arr\n  },\n\n  /**\n   * expands the selection to the right\n   * @param   {Number}      num    number of characters to expand by\n   * @param   {HTMLElement} editor the marky marked editor\n   * @returns {Array}       the new selection indices\n   */\n  expandSelectionForward (num = 0, editor = this.editor) {\n    const start = editor.selectionStart\n    const end = editor.selectionEnd + num\n\n    editor.setSelectionRange(start, end)\n    return [start, end]\n  },\n\n  /**\n   * expands the selection to the left\n   * @param   {Number}      num    number of characters to expand by\n   * @param   {HTMLElement} editor the marky marked editor\n   * @returns {Array}       the new selection indices\n   */\n  expandSelectionBackward (num = 0, editor = this.editor) {\n    const start = editor.selectionStart - num\n    const end = editor.selectionEnd\n\n    editor.setSelectionRange(start, end)\n    return [start, end]\n  },\n\n  /**\n   * expands the cursor to the right\n   * @param   {Number}      num    number of characters to move by\n   * @param   {HTMLElement} editor the marky marked editor\n   * @returns {Array}       the new cursor position\n   */\n  moveCursorBackward (num = 0, editor = this.editor) {\n    const start = editor.selectionStart - num\n\n    editor.setSelectionRange(start, start)\n    return start\n  },\n\n  /**\n   * expands the cursor to the left\n   * @param   {Number}      num    number of characters to move by\n   * @param   {HTMLElement} editor the marky marked editor\n   * @returns {Array}       the new cursor position\n   */\n  moveCursorForward (num = 0, editor = this.editor) {\n    const start = editor.selectionStart + num\n\n    editor.setSelectionRange(start, start)\n    return start\n  },\n\n  /**\n   * implements a bold on a selection\n   * @requires handlers/inlineHandler\n   * @param   {Array}       indices starting and ending positions for the selection\n   * @param   {HTMLElement} editor  the marky marked editor\n   * @returns {Array}       the new selection after the bold\n   */\n  bold (indices, editor = this.editor) {\n    indices = indices || [editor.selectionStart, editor.selectionEnd]\n    let boldify = inlineHandler(editor.value, indices, '**')\n    editor.value = boldify.value\n    editor.setSelectionRange(boldify.range[0], boldify.range[1])\n    let html = editor._marky.state[editor._marky.index].html\n    editor.nextSibling.value = html\n    editor.dispatchEvent(markyupdate)\n    return [boldify.range[0], boldify.range[1]]\n  },\n\n  /**\n   * implements an italic on a selection\n   * @requires handlers/inlineHandler\n   * @param   {Array}       indices starting and ending positions for the selection\n   * @param   {HTMLElement} editor  the marky marked editor\n   * @returns {Array}       the new selection after the italic\n   */\n  italic (indices, editor = this.editor) {\n    indices = indices || [editor.selectionStart, editor.selectionEnd]\n    let italicize = inlineHandler(editor.value, indices, '_')\n    editor.value = italicize.value\n    editor.setSelectionRange(italicize.range[0], italicize.range[1])\n    let html = editor._marky.state[editor._marky.index].html\n    editor.nextSibling.value = html\n    editor.dispatchEvent(markyupdate)\n    return [italicize.range[0], italicize.range[1]]\n  },\n\n  /**\n   * implements a strikethrough on a selection\n   * @requires handlers/inlineHandler\n   * @param   {Array}       indices starting and ending positions for the selection\n   * @param   {HTMLElement} editor  the marky marked editor\n   * @returns {Array}       the new selection after the strikethrough\n   */\n  strikethrough (indices, editor = this.editor) {\n    indices = indices || [editor.selectionStart, editor.selectionEnd]\n    let strikitize = inlineHandler(editor.value, indices, '~~')\n    editor.value = strikitize.value\n    editor.setSelectionRange(strikitize.range[0], strikitize.range[1])\n    let html = editor._marky.state[editor._marky.index].html\n    editor.nextSibling.value = html\n    editor.dispatchEvent(markyupdate)\n    return [strikitize.range[0], strikitize.range[1]]\n  },\n\n  /**\n   * implements a code on a selection\n   * @requires handlers/inlineHandler\n   * @param   {Array}       indices starting and ending positions for the selection\n   * @param   {HTMLElement} editor  the marky marked editor\n   * @returns {Array}       the new selection after the code\n   */\n  code (indices, editor = this.editor) {\n    indices = indices || [editor.selectionStart, editor.selectionEnd]\n    let codify = inlineHandler(editor.value, indices, '`')\n    editor.value = codify.value\n    editor.setSelectionRange(codify.range[0], codify.range[1])\n    let html = editor._marky.state[editor._marky.index].html\n    editor.nextSibling.value = html\n    editor.dispatchEvent(markyupdate)\n    return [codify.range[0], codify.range[1]]\n  },\n\n  /**\n   * implements a blockquote on a selection\n   * @requires handlers/blockHandler\n   * @param   {Array}       indices starting and ending positions for the selection\n   * @param   {HTMLElement} editor  the marky marked editor\n   * @returns {Array}       the new selection after the bold\n   */\n  blockquote (indices, editor = this.editor) {\n    indices = indices || [editor.selectionStart, editor.selectionEnd]\n    let quotify = blockHandler(editor.value, indices, '> ')\n    editor.value = quotify.value\n    editor.setSelectionRange(quotify.range[0], quotify.range[1])\n    let html = editor._marky.state[editor._marky.index].html\n    editor.nextSibling.value = html\n    editor.dispatchEvent(markyupdate)\n    return [quotify.range[0], quotify.range[1]]\n  },\n\n  /**\n   * implements a heading on a selection\n   * @requires handlers/blockHandler\n   * @param   {Array}       indices starting and ending positions for the selection\n   * @param   {HTMLElement} editor  the marky marked editor\n   * @returns {Array}       the new selection after the heading\n   */\n  heading (value = 0, indices, editor = this.editor) {\n    indices = indices || [editor.selectionStart, editor.selectionEnd]\n    let markArr = []\n    let mark\n    for (let i = 1; i <= value; i++) {\n      markArr.push('#')\n    }\n    mark = markArr.join('')\n    let space = mark ? ' ' : ''\n    let headingify = blockHandler(editor.value, indices, mark + space)\n    editor.value = headingify.value\n    editor.setSelectionRange(headingify.range[0], headingify.range[1])\n    let html = editor._marky.state[editor._marky.index].html\n    editor.nextSibling.value = html\n    editor.dispatchEvent(markyupdate)\n    return [headingify.range[0], headingify.range[1]]\n  },\n\n  /**\n   * inserts a link snippet at the end of a selection\n   * @requires handlers/insertHandler\n   * @param   {Array}       indices starting and ending positions for the selection\n   * @param   {HTMLElement} editor  the marky marked editor\n   * @returns {Array}       the new selection after the snippet is inserted\n   */\n  link (indices, url = 'http://url.com', display = 'http://url.com', editor = this.editor) {\n    indices = indices || [editor.selectionStart, editor.selectionEnd]\n    const mark = '[' + display + '](' + url + ')'\n    let linkify = insertHandler(editor.value, indices, mark)\n    editor.value = linkify.value\n    editor.setSelectionRange(linkify.range[0], linkify.range[1])\n    let html = editor._marky.state[editor._marky.index].html\n    editor.nextSibling.value = html\n    editor.dispatchEvent(markyupdate)\n    return [linkify.range[0], linkify.range[1]]\n  },\n\n  /**\n   * inserts an image snippet at the end of a selection\n   * @requires handlers/insertHandler\n   * @param   {Array}       indices starting and ending positions for the selection\n   * @param   {HTMLElement} editor  the marky marked editor\n   * @returns {Array}       the new selection after the snippet is inserted\n   */\n  image (indices, source = 'http://imagesource.com/image.jpg', alt = 'http://imagesource.com/image.jpg', editor = this.editor) {\n    indices = indices || [editor.selectionStart, editor.selectionEnd]\n    const mark = '![' + alt + '](' + source + ')'\n    let imageify = insertHandler(editor.value, indices, mark)\n    editor.value = imageify.value\n    editor.setSelectionRange(imageify.range[0], imageify.range[1])\n    let html = editor._marky.state[editor._marky.index].html\n    editor.nextSibling.value = html\n    editor.dispatchEvent(markyupdate)\n    return [imageify.range[0], imageify.range[1]]\n  },\n\n  /**\n   * implements an unordered list on a selection\n   * @requires handlers/listHandler\n   * @param   {Array}       indices starting and ending positions for the selection\n   * @param   {HTMLElement} editor  the marky marked editor\n   * @returns {Array}       the new selection after the list is implemented\n   */\n  unorderedList (indices, editor = this.editor) {\n    indices = indices || [editor.selectionStart, editor.selectionEnd]\n    let listify = listHandler(editor.value, indices, 'ul')\n    editor.value = listify.value\n    editor.setSelectionRange(listify.range[0], listify.range[1])\n    let html = editor._marky.state[editor._marky.index].html\n    editor.nextSibling.value = html\n    editor.dispatchEvent(markyupdate)\n    return [listify.range[0], listify.range[1]]\n  },\n\n  /**\n   * implements an ordered list on a selection\n   * @requires handlers/listHandler\n   * @param   {Array}       indices starting and ending positions for the selection\n   * @param   {HTMLElement} editor  the marky marked editor\n   * @returns {Array}       the new selection after the list is implemented\n   */\n  orderedList (indices, editor = this.editor) {\n    indices = indices || [editor.selectionStart, editor.selectionEnd]\n    let listify = listHandler(editor.value, indices, 'ol')\n    editor.value = listify.value\n    editor.setSelectionRange(listify.range[0], listify.range[1])\n    let html = editor._marky.state[editor._marky.index].html\n    editor.nextSibling.value = html\n    editor.dispatchEvent(markyupdate)\n    return [listify.range[0], listify.range[1]]\n  },\n\n  /**\n   * implements an indent on a selection\n   * @requires handlers/indentHandler\n   * @param   {Array}       indices starting and ending positions for the selection\n   * @param   {HTMLElement} editor  the marky marked editor\n   * @returns {Array}       the new selection after the indent is implemented\n   */\n  indent (indices, editor = this.editor) {\n    indices = indices || [editor.selectionStart, editor.selectionEnd]\n    let indentify = indentHandler(editor.value, indices, 'in')\n    editor.value = indentify.value\n    editor.setSelectionRange(indentify.range[0], indentify.range[1])\n    let html = editor._marky.state[editor._marky.index].html\n    editor.nextSibling.value = html\n    editor.dispatchEvent(markyupdate)\n    return [indentify.range[0], indentify.range[1]]\n  },\n\n  /**\n   * implements an outdent on a selection\n   * @requires handlers/indentHandler\n   * @param   {Array}       indices starting and ending positions for the selection\n   * @param   {HTMLElement} editor  the marky marked editor\n   * @returns {Array}       the new selection after the outdent is implemented\n   */\n  outdent (indices, editor = this.editor) {\n    indices = indices || [editor.selectionStart, editor.selectionEnd]\n    let indentify = indentHandler(editor.value, indices, 'out')\n    editor.value = indentify.value\n    editor.setSelectionRange(indentify.range[0], indentify.range[1])\n    let html = editor._marky.state[editor._marky.index].html\n    editor.nextSibling.value = html\n    editor.dispatchEvent(markyupdate)\n    return [indentify.range[0], indentify.range[1]]\n  }\n}\n","import {Element} from './Element'\n\n/**\n * Create separator spans for the toolbar\n * @type {Element}\n */\nexport var Separator = Object.create(Element)\nSeparator.init = function () {\n  Element.init.call(this, 'span')\n  this.addClass('separator')\n}\n","/* global CustomEvent */\n'use strict'\n\n// Custom Event Polyfill for IE9+\n;(function () {\n  function CustomEvent (event, params) {\n    params = params || {\n      bubbles: false,\n      cancelable: false,\n      detail: undefined\n    }\n    var evt = document.createEvent('CustomEvent')\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail)\n    return evt\n  }\n\n  CustomEvent.prototype = window.Event.prototype\n\n  window.CustomEvent = CustomEvent\n})()\n\nexport var markyblur = new CustomEvent('markyblur')\nexport var markyfocus = new CustomEvent('markyfocus')\nexport var markyselect = new CustomEvent('markyselect')\nexport var markyupdate = new CustomEvent('markyupdate')\nexport var markychange = new CustomEvent('markychange')\n","'use strict'\n\nimport marked from 'marked'\nimport pushState from './push-state'\n\n/**\n * updates the state\n * @external marked\n * @requires pushState\n * @param   {String} markdown   markdown blob\n * @param   {Array}  state      the state timeline\n * @param   {Number} stateIndex the current state index\n * @returns {Object} the newly active state\n */\nexport function update (markdown, selection, state, stateIndex) {\n  let markedOptions = {\n    sanitize: true\n  }\n  let html = marked(markdown, markedOptions).toString() || ''\n  let newState = pushState(state, stateIndex, () => {\n    return {markdown: markdown, html: html, selection: selection}\n  })\n  return newState\n}\n\n/**\n * moves backward in state\n * @param   {Number} num        the number of states to move back by\n * @param   {Array}  state      the state timeline\n * @param   {Number} stateIndex the current state index\n * @returns {Object} the newly active state\n */\nexport function undo (num, state, stateIndex) {\n  stateIndex = (stateIndex > (num - 1)) ? stateIndex - num : 0\n  return {state: state[stateIndex], index: stateIndex}\n}\n\n/**\n * moves forwardin state\n * @param   {Number} num        the number of states to move back by\n * @param   {Array}  state      the state timeline\n * @param   {Number} stateIndex the current state index\n * @returns {Object} the newly active state\n */\nexport function redo (num, state, stateIndex) {\n  stateIndex = (stateIndex < state.length - (num + 1)) ? stateIndex + num : state.length - 1\n  return {state: state[stateIndex], index: stateIndex}\n}\n","'use strict'\n\nimport {indexOfMatch, splitLines, startOfLine, endOfLine} from './parsers'\n\n/**\n * Handles wrapping format strings around a selection\n * @param   {String} string  the entire string to use\n * @param   {Array}  indices the starting and ending positions to wrap\n * @param   {String} mark    the format string to use\n * @returns {Object} the new string, the updated indices\n */\nexport function inlineHandler (string, indices, mark) {\n  let value\n  let useMark = [mark, mark]\n  if (string.indexOf(mark) !== -1) {\n    indices.forEach(function (n, i) {\n      if (string.lastIndexOf(mark, n) === n - mark.length) {\n        string = string.substring(0, n - mark.length) + string.substring(n, string.length)\n        if (i === 0) {\n          indices[0] = indices[0] - mark.length\n          indices[1] = indices[1] - mark.length\n        } else {\n          indices[1] = indices[1] - mark.length\n        }\n        if (i === 1 && useMark[0]) indices[1] = indices[1] + mark.length\n        useMark[i] = ''\n      }\n      if (string.indexOf(mark, n) === n) {\n        string = string.substring(0, n) + string.substring(n + mark.length, string.length)\n        if (i === 0 && (indices[0] !== indices[1])) {\n          indices[1] = indices[1] - mark.length\n        }\n        if (i === 0 && (indices[0] === indices[1])) {\n          indices[0] = indices[0] - mark.length\n        }\n        if (i === 1 && useMark[0]) indices[1] = indices[1] + mark.length\n        useMark[i] = ''\n      }\n    })\n  }\n  value = string.substring(0, indices[0]) + useMark[0] + string.substring(indices[0], indices[1]) + useMark[1] + string.substring(indices[1], string.length)\n  return {value: value, range: [indices[0] + useMark[0].length, indices[1] + useMark[1].length]}\n}\n\n/**\n * Handles adding/removing a format string to a line\n * @param   {String} string  the entire string to use\n * @param   {Array}  indices the starting and ending positions to wrap\n * @param   {String} mark    the format string to use\n * @returns {Object} the new string, the updated indices\n */\nexport function blockHandler (string, indices, mark) {\n  const start = indices[0]\n  const end = indices[1]\n  let value\n  let lineStart = startOfLine(string, start)\n  let lineEnd = endOfLine(string, end)\n  if (indexOfMatch(string, /^[#>]/m, lineStart) === lineStart) {\n    let currentFormat = string.substring(lineStart, lineStart + string.substring(lineStart).search(/[0-9~*`_-]|\\b|\\n|$/gm))\n    value = string.substring(0, lineStart) + string.substring(lineStart + string.substring(lineStart).search(/[0-9~*`_-]|\\b|\\n|$/gm), string.length)\n    lineEnd = lineEnd - currentFormat.length\n    if (currentFormat.trim() !== mark.trim() && mark.trim().length) {\n      value = string.substring(0, lineStart) + mark + string.substring(lineStart + string.substring(lineStart).search(/[0-9~*`_-]|\\b|\\n|$/gm), string.length)\n      lineStart = lineStart + mark.length\n      lineEnd = lineEnd + mark.length\n    }\n    return {value: value, range: [lineStart, lineEnd]}\n  }\n  value = string.substring(0, lineStart) + mark + string.substring(lineStart, string.length)\n  return {value: value, range: [start + mark.length, end + mark.length]}\n}\n\n/**\n * Handles adding/removing format strings to groups of lines\n * @param   {String} string  the entire string to use\n * @param   {Array}  indices the starting and ending positions to wrap\n * @param   {String} type    ul or ol\n * @returns {Object} the new string, the updated indices\n */\nexport function listHandler (string, indices, type) {\n  const start = startOfLine(string, indices[0])\n  const end = endOfLine(string, indices[1])\n  const lines = splitLines(string.substring(start, end))\n  let newLines = []\n  let value\n  lines.forEach((line, i) => {\n    let mark = (type === 'ul') ? '-' + ' ' : (i + 1) + '.' + ' '\n    let newLine\n    if (indexOfMatch(line, /^[0-9#>-]/m, 0) === 0) {\n      let currentFormat = line.substring(0, 0 + line.substring(0).search(/[~*`_[!]|[a-zA-Z]|\\r|\\n|$/gm))\n      newLine = line.substring(line.search(/[~*`_[!]|[a-zA-Z]|\\r|\\n|$/gm), line.length)\n      if (currentFormat.trim() !== mark.trim()) {\n        newLine = mark + line.substring(line.search(/[~*`_[!]|[a-zA-Z]|\\r|\\n|$/gm), line.length)\n      }\n      return newLines.push(newLine)\n    }\n    newLine = mark + line.substring(0, line.length)\n    return newLines.push(newLine)\n  })\n  let joined = newLines.join('\\r\\n')\n  value = string.substring(0, start) + newLines.join('\\r\\n') + string.substring(end, string.length)\n  return {value: value, range: [start, start + joined.replace(/\\n/gm, '').length]}\n}\n\n/**\n * Handles adding/removing indentation to groups of lines\n * @param   {String} string  the entire string to use\n * @param   {Array}  indices the starting and ending positions to wrap\n * @param   {String} type    in or out\n * @returns {Object} the new string, the updated indices\n */\nexport function indentHandler (string, indices, type) {\n  const start = startOfLine(string, indices[0])\n  const end = endOfLine(string, indices[1])\n  const lines = splitLines(string.substring(start, end))\n  let newLines = []\n  let value\n  lines.forEach((line) => {\n    let mark = '    '\n    let newLine\n    if (type === 'out') {\n      newLine = (line.indexOf(mark, 0) === 0) ? line.substring(mark.length, line.length) : line.substring(line.search(/[~*`_[!#>-]|[a-zA-Z0-9]|\\r|\\n|$/gm), line.length)\n      return newLines.push(newLine)\n    }\n    newLine = mark + line.substring(0, line.length)\n    return newLines.push(newLine)\n  })\n  let joined = newLines.join('\\r\\n')\n  value = string.substring(0, start) + newLines.join('\\r\\n') + string.substring(end, string.length)\n  return {value: value, range: [start, start + joined.replace(/\\n/gm, '').length]}\n}\n\n/**\n * Handles inserting a snippet at the end of a selection\n * @param   {String} string  the entire string to use\n * @param   {Array}  indices the starting and ending positions to wrap\n * @param   {String} mark    the snippet to insert\n * @returns {Object} the new string, the updated indices\n */\nexport function insertHandler (string, indices, mark) {\n  const start = indices[0]\n  const end = indices[1]\n  let value\n  value = string.substring(0, start) + mark + string.substring(end, string.length)\n\n  return {value: value, range: [start, start + mark.length]}\n}\n","'use strict'\n\nimport {Marky} from './Marky'\nimport {Element} from './Element'\nimport {Button} from './Button'\nimport {LinkDialog, ImageDialog, HeadingDialog} from './Dialogs'\nimport {Separator} from './Separator'\nimport {markyblur, markyfocus, markyselect, markyupdate} from './custom-events'\n\nlet timeoutID // Used later for input events\n\n/**\n * Register and append the DOM elements needed and set the event listeners\n * @param   {String}  tag name to be used for initialization\n */\nexport default function (tag = 'marky-mark') {\n  let containers = document.getElementsByTagName(tag)\n  let idArr = []\n  return Array.prototype.forEach.call(containers, (container, i) => {\n    let idIndex = i\n\n    /**\n     * Ignore container if it's not empty\n     */\n    if (container.children.length) {\n      if (container.getAttribute('id')) idArr.push(parseInt(container.getAttribute('id').split('-')[2]))\n      return\n    }\n\n    /**\n     * Create and register main elements:\n     * toolbar, editor, dialog container, hidden input\n     */\n\n    let toolbar = Object.create(Element)\n    toolbar.init('div', 'Toolbar')\n\n    if (idArr.length) {\n      idArr.sort()\n      idIndex = idArr[idArr.length - 1] + 1\n    }\n\n    let id = 'marky-mark-' + idIndex\n    container.id = id\n    toolbar.addClass('marky-toolbar', id)\n\n    let dialogs = Object.create(Element)\n    dialogs.init('div', 'Dialogs')\n    dialogs.addClass('marky-dialogs', id)\n\n    let markyEditor = Object.create(Element)\n    markyEditor.init('textarea', 'Marky Marked Editor')\n    markyEditor.addClass('marky-editor', id)\n\n    let marky = Object.create(Marky)\n    marky.init(markyEditor.element, container)\n\n    markyEditor.assign('_marky', marky)\n\n    let markyOutput = Object.create(Element)\n    markyOutput.init('input', 'Marky Marked Output')\n    markyOutput.assign('type', 'hidden')\n    markyOutput.addClass('marky-output', id)\n\n    /**\n     * Create and register dialogs and set listeners\n     */\n\n    function formSubmit (e) {\n      e.preventDefault()\n      markyEditor.element.focus()\n    }\n\n    let headingDialog = Object.create(HeadingDialog)\n    headingDialog.init('Heading Dialog', id)\n    headingDialog.element.style.visibility = 'hidden'\n    headingDialog.options.forEach((option) => {\n      option.listen('click', (e) => {\n        e.preventDefault()\n        let value = parseInt(e.target.value)\n        markyEditor.element.focus()\n        headingDialog.removeClass('toggled')\n        headingDialog.element.style.visibility = 'hidden'\n        markyEditor.element._marky.heading(value, [markyEditor.element.selectionStart, markyEditor.element.selectionEnd])\n      })\n    })\n\n    let linkDialog = Object.create(LinkDialog)\n    linkDialog.init('Link Dialog', id)\n    linkDialog.element.style.visibility = 'hidden'\n    linkDialog.linkForm.listen('submit', formSubmit)\n    linkDialog.insertButton.listen('click', (e) => {\n      e.preventDefault\n      markyEditor.element.focus()\n      let url = linkDialog.linkUrlInput.element.value ? linkDialog.linkUrlInput.element.value : 'http://url.com'\n      let display = linkDialog.linkDisplayInput.element.value ? linkDialog.linkDisplayInput.element.value : url\n      linkDialog.linkUrlInput.element.value = ''\n      linkDialog.linkDisplayInput.element.value = ''\n      linkDialog.element.style.visibility = 'hidden'\n      linkDialog.removeClass('toggled')\n      markyEditor.element._marky.link([markyEditor.element.selectionStart, markyEditor.element.selectionEnd], url, display)\n    })\n\n    let imageDialog = Object.create(ImageDialog)\n    imageDialog.init('Image Dialog', id)\n    imageDialog.element.style.visibility = 'hidden'\n    imageDialog.imageForm.listen('submit', formSubmit)\n    imageDialog.insertButton.listen('click', (e) => {\n      e.preventDefault\n      markyEditor.element.focus()\n      let source = imageDialog.imageSourceInput.element.value ? imageDialog.imageSourceInput.element.value : 'http://imagesource.com/image.jpg'\n      let alt = imageDialog.imageAltInput.element.value ? imageDialog.imageAltInput.element.value : source\n      imageDialog.imageSourceInput.element.value = ''\n      imageDialog.imageAltInput.element.value = ''\n      imageDialog.element.style.visibility = 'hidden'\n      imageDialog.removeClass('toggled')\n      markyEditor.element._marky.image([markyEditor.element.selectionStart, markyEditor.element.selectionEnd], source, alt)\n    })\n\n    /**\n     * Create and register toolbar buttons and set listeners\n     */\n\n    function buttonMousedown (e) {\n      e.preventDefault()\n      e.currentTarget.classList.add('active')\n      markyEditor.element.focus()\n    }\n\n    function buttonMouseup (e) {\n      e.currentTarget.classList.remove('active')\n    }\n\n    let headingButton = Object.create(Button)\n    headingButton.init('Heading', id, 'fa', 'fa-header')\n    headingButton.dialog = headingDialog.element\n    headingButton.listen('click', (e) => {\n      e.preventDefault()\n      e.currentTarget.blur()\n      headingButton.dialog.classList.toggle('toggled')\n      imageDialog.element.style.visibility = 'hidden'\n      imageDialog.removeClass('toggled')\n      linkDialog.element.style.visibility = 'hidden'\n      linkDialog.removeClass('toggled')\n      if (headingButton.dialog.style.visibility === 'hidden') {\n        headingButton.dialog.style.visibility = 'visible'\n        return\n      }\n      headingButton.dialog.style.visibility = 'hidden'\n    })\n\n    let boldButton = Object.create(Button)\n    boldButton.init('Bold', id, 'fa', 'fa-bold')\n    boldButton.listen('mousedown', buttonMousedown)\n    boldButton.listen('mouseup', buttonMouseup)\n    boldButton.listen('click', (e) => {\n      e.preventDefault()\n      markyEditor.element.focus()\n      markyEditor.element._marky.bold([markyEditor.element.selectionStart, markyEditor.element.selectionEnd])\n    })\n\n    let italicButton = Object.create(Button)\n    italicButton.init('Italic', id, 'fa', 'fa-italic')\n    italicButton.listen('mousedown', buttonMousedown)\n    italicButton.listen('mouseup', buttonMouseup)\n    italicButton.listen('click', (e) => {\n      e.preventDefault()\n      markyEditor.element.focus()\n      markyEditor.element._marky.italic([markyEditor.element.selectionStart, markyEditor.element.selectionEnd])\n    })\n\n    let strikethroughButton = Object.create(Button)\n    strikethroughButton.init('Strikethrough', id, 'fa', 'fa-strikethrough')\n    strikethroughButton.listen('mousedown', buttonMousedown)\n    strikethroughButton.listen('mouseup', buttonMouseup)\n    strikethroughButton.listen('click', (e) => {\n      e.preventDefault()\n      markyEditor.element.focus()\n      markyEditor.element._marky.strikethrough([markyEditor.element.selectionStart, markyEditor.element.selectionEnd])\n    })\n\n    let codeButton = Object.create(Button)\n    codeButton.init('Code', id, 'fa', 'fa-code')\n    codeButton.listen('mousedown', buttonMousedown)\n    codeButton.listen('mouseup', buttonMouseup)\n    codeButton.listen('click', (e) => {\n      e.preventDefault()\n      markyEditor.element.focus()\n      markyEditor.element._marky.code([markyEditor.element.selectionStart, markyEditor.element.selectionEnd])\n    })\n\n    let blockquoteButton = Object.create(Button)\n    blockquoteButton.init('Blockquote', id, 'fa', 'fa-quote-right')\n    blockquoteButton.listen('mousedown', buttonMousedown)\n    blockquoteButton.listen('mouseup', buttonMouseup)\n    blockquoteButton.listen('click', (e) => {\n      e.preventDefault()\n      markyEditor.element.focus()\n      markyEditor.element._marky.blockquote([markyEditor.element.selectionStart, markyEditor.element.selectionEnd])\n    })\n\n    let linkButton = Object.create(Button)\n    linkButton.init('Link', id, 'fa', 'fa-link')\n    linkButton.dialog = linkDialog.element\n    linkButton.listen('mousedown', buttonMousedown)\n    linkButton.listen('mouseup', buttonMouseup)\n    linkButton.listen('click', (e) => {\n      e.preventDefault()\n      markyEditor.element.focus()\n      linkButton.dialog.classList.toggle('toggled')\n      imageDialog.element.style.visibility = 'hidden'\n      imageDialog.removeClass('toggled')\n      headingDialog.element.style.visibility = 'hidden'\n      headingDialog.removeClass('toggled')\n      if (linkButton.dialog.style.visibility === 'hidden') {\n        linkButton.dialog.children[0].children[1].value = markyEditor.element.value.substring(markyEditor.element.selectionStart, markyEditor.element.selectionEnd)\n        linkButton.dialog.style.visibility = 'visible'\n        return\n      }\n      linkButton.dialog.style.visibility = 'hidden'\n    })\n\n    let imageButton = Object.create(Button)\n    imageButton.init('Image', id, 'fa', 'fa-file-image-o')\n    imageButton.dialog = imageDialog.element\n    imageButton.listen('mousedown', buttonMousedown)\n    imageButton.listen('mouseup', buttonMouseup)\n    imageButton.listen('click', (e) => {\n      e.preventDefault()\n      markyEditor.element.focus()\n      imageButton.dialog.classList.toggle('toggled')\n      linkDialog.element.style.visibility = 'hidden'\n      linkDialog.removeClass('toggled')\n      headingDialog.element.style.visibility = 'hidden'\n      headingDialog.removeClass('toggled')\n      if (imageButton.dialog.style.visibility === 'hidden') {\n        imageButton.dialog.children[0].children[1].value = markyEditor.element.value.substring(markyEditor.element.selectionStart, markyEditor.element.selectionEnd)\n        imageButton.dialog.style.visibility = 'visible'\n        return\n      }\n      imageButton.dialog.style.visibility = 'hidden'\n    })\n\n    let unorderedListButton = Object.create(Button)\n    unorderedListButton.init('Unordered List', id, 'fa', 'fa-list-ul')\n    unorderedListButton.listen('mousedown', buttonMousedown)\n    unorderedListButton.listen('mouseup', buttonMouseup)\n    unorderedListButton.listen('click', (e) => {\n      e.preventDefault()\n      markyEditor.element.focus()\n      markyEditor.element._marky.unorderedList([markyEditor.element.selectionStart, markyEditor.element.selectionEnd])\n    })\n\n    let orderedListButton = Object.create(Button)\n    orderedListButton.init('Ordered List', id, 'fa', 'fa-list-ol')\n    orderedListButton.listen('mousedown', buttonMousedown)\n    orderedListButton.listen('mouseup', buttonMouseup)\n    orderedListButton.listen('click', (e) => {\n      e.preventDefault()\n      markyEditor.element.focus()\n      markyEditor.element._marky.orderedList([markyEditor.element.selectionStart, markyEditor.element.selectionEnd])\n    })\n\n    let outdentButton = Object.create(Button)\n    outdentButton.init('Outdent', id, 'fa', 'fa-outdent')\n    outdentButton.listen('mousedown', buttonMousedown)\n    outdentButton.listen('mouseup', buttonMouseup)\n    outdentButton.listen('click', (e) => {\n      e.preventDefault()\n      markyEditor.element.focus()\n      markyEditor.element._marky.outdent([markyEditor.element.selectionStart, markyEditor.element.selectionEnd])\n    })\n\n    let indentButton = Object.create(Button)\n    indentButton.init('Indent', id, 'fa', 'fa-indent')\n    indentButton.listen('mousedown', buttonMousedown)\n    indentButton.listen('mouseup', buttonMouseup)\n    indentButton.listen('click', (e) => {\n      e.preventDefault()\n      markyEditor.element.focus()\n      markyEditor.element._marky.indent([markyEditor.element.selectionStart, markyEditor.element.selectionEnd])\n    })\n\n    let undoButton = Object.create(Button)\n    undoButton.init('Undo', id, 'fa', 'fa-backward')\n    undoButton.listen('mousedown', buttonMousedown)\n    undoButton.listen('mouseup', buttonMouseup)\n    undoButton.listen('click', (e) => {\n      e.preventDefault()\n      if (undoButton.element.classList.contains('disabled')) return\n      markyEditor.element.focus()\n      markyEditor.element._marky.undo(1, markyEditor.element._marky.state, markyEditor.element._marky.index)\n    })\n\n    let redoButton = Object.create(Button)\n    redoButton.init('Redo', id, 'fa', 'fa-forward')\n    redoButton.listen('mousedown', buttonMousedown)\n    redoButton.listen('mouseup', buttonMouseup)\n    redoButton.listen('click', (e) => {\n      e.preventDefault()\n      if (redoButton.element.classList.contains('disabled')) return\n      markyEditor.element.focus()\n      markyEditor.element._marky.redo(1, markyEditor.element._marky.state, markyEditor.element._marky.index)\n    })\n\n    let fullscreenButton = Object.create(Button)\n    fullscreenButton.init('Fullscreen', id, 'fa', 'fa-expand')\n    fullscreenButton.listen('click', (e) => {\n      e.preventDefault()\n      e.currentTarget.blur()\n      e.currentTarget.classList.toggle('fullscreen-toggled')\n      container.classList.toggle('fullscreen-toggled')\n      markyEditor.element.classList.toggle('fullscreen-toggled')\n      fullscreenButton.icon.element.classList.toggle('fa-expand')\n      fullscreenButton.icon.element.classList.toggle('fa-compress')\n    })\n\n    /**\n     * Create and register separators\n     */\n\n    let separatorA = Object.create(Separator)\n    separatorA.init()\n\n    let separatorB = Object.create(Separator)\n    separatorB.init()\n\n    let separatorC = Object.create(Separator)\n    separatorC.init()\n\n    let separatorD = Object.create(Separator)\n    separatorD.init()\n\n    let separatorE = Object.create(Separator)\n    separatorE.init()\n\n    /**\n     * Insert elements into the DOM\n     */\n\n    toolbar.appendTo(container)\n    markyEditor.appendTo(container)\n    markyOutput.appendTo(container)\n    headingButton.appendTo(toolbar.element)\n    separatorA.appendTo(toolbar.element)\n    boldButton.appendTo(toolbar.element)\n    italicButton.appendTo(toolbar.element)\n    strikethroughButton.appendTo(toolbar.element)\n    codeButton.appendTo(toolbar.element)\n    blockquoteButton.appendTo(toolbar.element)\n    separatorB.appendTo(toolbar.element)\n    linkButton.appendTo(toolbar.element)\n    imageButton.appendTo(toolbar.element)\n    separatorC.appendTo(toolbar.element)\n    unorderedListButton.appendTo(toolbar.element)\n    orderedListButton.appendTo(toolbar.element)\n    outdentButton.appendTo(toolbar.element)\n    indentButton.appendTo(toolbar.element)\n    separatorD.appendTo(toolbar.element)\n    undoButton.appendTo(toolbar.element)\n    redoButton.appendTo(toolbar.element)\n    separatorE.appendTo(toolbar.element)\n    fullscreenButton.appendTo(toolbar.element)\n    dialogs.appendTo(toolbar.element)\n    linkDialog.appendTo(dialogs.element)\n    imageDialog.appendTo(dialogs.element)\n    headingDialog.appendTo(dialogs.element)\n\n    /**\n     * Listeners for the editor\n     */\n\n    markyEditor.listen('markyupdate', (e) => {\n      e.currentTarget._marky.update(e.currentTarget.value, [e.currentTarget.selectionStart, e.currentTarget.selectionEnd], e.currentTarget._marky.state, e.currentTarget._marky.index)\n    }, false)\n\n    markyEditor.listen('markychange', (e) => {\n      let html = e.currentTarget._marky.state[e.currentTarget._marky.index].html\n      if (e.currentTarget._marky.index === 0) {\n        undoButton.addClass('disabled')\n      } else {\n        undoButton.removeClass('disabled')\n      }\n      if (e.currentTarget._marky.index === e.currentTarget._marky.state.length - 1) {\n        redoButton.addClass('disabled')\n      } else {\n        redoButton.removeClass('disabled')\n      }\n      e.currentTarget.nextSibling.value = html\n    }, false)\n\n    /**\n     * Listen for input events, set timeout to update state, clear timeout from previous input\n     */\n    markyEditor.listen('input', (e) => {\n      window.clearTimeout(timeoutID)\n      timeoutID = window.setTimeout(() => {\n        e.currentTarget.dispatchEvent(markyupdate)\n      }, 1000)\n    }, false)\n\n    /**\n     * Listen for change events (requires loss of focus) and update state\n     */\n    markyEditor.listen('change', (e) => {\n      e.currentTarget.dispatchEvent(markyupdate)\n    }, false)\n\n    /**\n     * Listen for pasting into the editor and update state\n     */\n    markyEditor.listen('paste', (e) => {\n      setTimeout(() => {\n        e.currentTarget.dispatchEvent(markyupdate)\n      }, 0)\n    }, false)\n\n    /**\n     * Listen for cutting from the editor and update state\n     */\n    markyEditor.listen('cut', (e) => {\n      setTimeout(() => {\n        e.currentTarget.dispatchEvent(markyupdate)\n      }, 0)\n    }, false)\n\n    let deleteSelection = 0\n\n    /**\n     * Listen for keydown events,\n     * if key is delete key,\n     * set deleteSelection to length of selection\n     */\n    markyEditor.listen('keydown', (e) => {\n      if (e.which === 8) deleteSelection = e.currentTarget.selectionEnd - e.currentTarget.selectionStart\n    })\n\n    let keyMap = [] // Used for determining whether or not to update state on space keyup\n    let punctuations = [\n      46, // period\n      44, // comma\n      63, // question mark\n      33, // exclamation point\n      58, // colon\n      59, // semi-colon\n      47, // back slash\n      92, // forward slash\n      38, // ampersand\n      124, // vertical pipe\n      32 // space\n    ]\n\n    /**\n     * Listen for keyup events,\n     * if key is space or punctuation (but not a space following punctuation or another space),\n     * update state and clear input timeout.\n     */\n    markyEditor.listen('keypress', (e) => {\n      keyMap.push(e.which)\n      if (keyMap.length > 2) keyMap.shift()\n      punctuations.forEach((punctuation) => {\n        if (e.which === 32 && keyMap[0] === punctuation) {\n          return window.clearTimeout(timeoutID)\n        }\n        if (e.which === punctuation) {\n          window.clearTimeout(timeoutID)\n          return e.currentTarget.dispatchEvent(markyupdate)\n        }\n      })\n    })\n\n    /**\n     * Listen for keyup events,\n     * if key is delete and it's a bulk selection,\n     * update state and clear input timeout.\n     */\n    markyEditor.listen('keyup', (e) => {\n      if (e.which === 8 && deleteSelection > 0) {\n        window.clearTimeout(timeoutID)\n        deleteSelection = 0\n        e.currentTarget.dispatchEvent(markyupdate)\n      }\n    })\n\n    markyEditor.listen('select', (e) => {\n      e.currentTarget.dispatchEvent(markyselect)\n    })\n\n    markyEditor.listen('blur', (e) => {\n      e.currentTarget.dispatchEvent(markyblur)\n    })\n\n    markyEditor.listen('focus', (e) => {\n      e.currentTarget.dispatchEvent(markyfocus)\n    })\n\n    markyEditor.listen('click', () => {\n      imageDialog.element.style.visibility = 'hidden'\n      imageDialog.removeClass('toggled')\n      linkDialog.element.style.visibility = 'hidden'\n      linkDialog.removeClass('toggled')\n      headingDialog.element.style.visibility = 'hidden'\n      headingDialog.removeClass('toggled')\n    })\n  })\n}\n","'use strict'\n\n/**\n * Finds the first index based on a regex match\n * @param   {RegExp} regex a regex object\n * @param   {Number} index optional starting index\n * @returns {Number} the index of the match\n */\nexport function indexOfMatch (string, regex, index) {\n  var str = (index !== null) ? string.substring(index) : string\n  var matches = str.match(regex)\n  return matches ? str.indexOf(matches[0]) + index : -1\n}\n\n/**\n * Finds the first index based on a regex match\n * @param   {RegExp} regex a regex object\n * @param   {Number} index optional starting index\n * @returns {Number} the index of the match\n */\nexport function indicesOfMatches (string, regex, index) {\n  var str = (index !== null) ? string.substring(index) : string\n  var matches = str.match(regex)\n  var indices = []\n  matches.forEach(function (match, i) {\n    let prevIndex = indices ? indices[i - 1] : null\n    indices.push(str.indexOf(match, prevIndex + 1) + index)\n  })\n  return indices || -1\n}\n\n/**\n * Finds the last index based on a regex match\n * @param   {RegExp} regex a regex object\n * @param   {Number} index optional ending index\n * @returns {Number} the index of the match\n */\nexport function lastIndexOfMatch (string, regex, index) {\n  var str = (index !== null) ? string.substring(0, index) : string\n  var matches = str.match(regex)\n  return matches ? str.lastIndexOf(matches[matches.length - 1]) : -1\n}\n\n/**\n * Creates an array of lines separated by line breaks\n * @param   {Number} index optional ending index\n * @returns {Array}  an array of strings\n */\nexport function splitLinesBackward (string, index) {\n  var str = index ? string.substring(0, index) : string\n  return str.split(/\\r\\n|\\r|\\n/)\n}\n\n/**\n * Creates an array of lines split by line breaks\n * @param   {Number} index optional starting index\n * @returns {Array}  an array of strings\n */\nexport function splitLines (string, index) {\n  var str = index ? string.substring(index) : string\n  return str.split(/\\r\\n|\\r|\\n/)\n}\n\n/**\n * Finds the start of a line\n * @param   {Number} index  optional position\n * @returns {Number} the index of the line start\n */\nexport function startOfLine (string, index = 0) {\n  return lastIndexOfMatch(string, /^.*/gm, index)\n}\n\n/**\n * Finds the end of a line\n * @param   {Number} index  optional position\n * @returns {Number} the index of the line end\n */\nexport function endOfLine (string, index = 0) {\n  return indexOfMatch(string, /(\\r|\\n|$)/gm, index)\n}\n","'use strict'\n\n/**\n * Handles adding and removing state\n * @param   {Array}    state      the state timeline\n * @param   {Number}   stateIndex the current state index\n * @param   {Function} fn         a function to call\n * @returns {Object}   the new timeline\n */\nexport default function (state, stateIndex, fn) {\n  state = state.slice(0, stateIndex + 1)\n  let newVersion = fn()\n  state.push(newVersion)\n  stateIndex++\n  if (stateIndex > 999) {\n    state.shift()\n    stateIndex--\n  }\n  return {state: state, index: stateIndex}\n}\n"]}