!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.marky=e()}}(function(){var e;return function t(e,n,i){function r(l,a){if(!n[l]){if(!e[l]){var o="function"==typeof require&&require;if(!a&&o)return o(l,!0);if(s)return s(l,!0);var u=new Error("Cannot find module '"+l+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[l]={exports:{}};e[l][0].call(c.exports,function(t){var n=e[l][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[l].exports}for(var s="function"==typeof require&&require,l=0;l<i.length;l++)r(i[l]);return r}({1:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=e("./src/marky"),s=i(r);t.exports=s["default"]},{"./src/marky":3}],2:[function(t,n,i){(function(t){(function(){function t(e){this.tokens=[],this.tokens.links={},this.options=e||h.defaults,this.rules=p.normal,this.options.gfm&&(this.options.tables?this.rules=p.tables:this.rules=p.gfm)}function r(e,t){if(this.options=t||h.defaults,this.links=e,this.rules=g.normal,this.renderer=this.options.renderer||new s,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=g.breaks:this.rules=g.gfm:this.options.pedantic&&(this.rules=g.pedantic)}function s(e){this.options=e||{}}function l(e){this.tokens=[],this.token=null,this.options=e||h.defaults,this.options.renderer=this.options.renderer||new s,this.renderer=this.options.renderer,this.renderer.options=this.options}function a(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function u(e,t){return e=e.source,t=t||"",function n(i,r){return i?(r=r.source||r,r=r.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(i,r),n):new RegExp(e,t)}}function c(){}function d(e){for(var t,n,i=1;i<arguments.length;i++){t=arguments[i];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}function h(e,n,i){if(i||"function"==typeof n){i||(i=n,n=null),n=d({},h.defaults,n||{});var r,s,o=n.highlight,u=0;try{r=t.lex(e,n)}catch(c){return i(c)}s=r.length;var p=function(e){if(e)return n.highlight=o,i(e);var t;try{t=l.parse(r,n)}catch(s){e=s}return n.highlight=o,e?i(e):i(null,t)};if(!o||o.length<3)return p();if(delete n.highlight,!s)return p();for(;u<r.length;u++)!function(e){return"code"!==e.type?--s||p():o(e.text,e.lang,function(t,n){return t?p(t):null==n||n===e.text?--s||p():(e.text=n,e.escaped=!0,void(--s||p()))})}(r[u])}else try{return n&&(n=d({},h.defaults,n)),l.parse(t.lex(e,n),n)}catch(c){if(c.message+="\nPlease report this to https://github.com/chjj/marked.",(n||h.defaults).silent)return"<p>An error occured:</p><pre>"+a(c.message+"",!0)+"</pre>";throw c}}var p={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:c,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:c,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:c,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};p.bullet=/(?:[*+-]|\d+\.)/,p.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,p.item=u(p.item,"gm")(/bull/g,p.bullet)(),p.list=u(p.list)(/bull/g,p.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+p.def.source+")")(),p.blockquote=u(p.blockquote)("def",p.def)(),p._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",p.html=u(p.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,p._tag)(),p.paragraph=u(p.paragraph)("hr",p.hr)("heading",p.heading)("lheading",p.lheading)("blockquote",p.blockquote)("tag","<"+p._tag)("def",p.def)(),p.normal=d({},p),p.gfm=d({},p.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),p.gfm.paragraph=u(p.paragraph)("(?!","(?!"+p.gfm.fences.source.replace("\\1","\\2")+"|"+p.list.source.replace("\\1","\\3")+"|")(),p.tables=d({},p.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=p,t.lex=function(e,n){var i=new t(n);return i.lex(e)},t.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},t.prototype.token=function(e,t,n){for(var i,r,s,l,a,o,u,c,d,e=e.replace(/^ +$/gm,"");e;)if((s=this.rules.newline.exec(e))&&(e=e.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(e))e=e.substring(s[0].length),s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?s:s.replace(/\n+$/,"")});else if(s=this.rules.fences.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"code",lang:s[2],text:s[3]||""});else if(s=this.rules.heading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if(t&&(s=this.rules.nptable.exec(e))){for(e=e.substring(s[0].length),o={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/\n$/,"").split("\n")},c=0;c<o.align.length;c++)/^ *-+: *$/.test(o.align[c])?o.align[c]="right":/^ *:-+: *$/.test(o.align[c])?o.align[c]="center":/^ *:-+ *$/.test(o.align[c])?o.align[c]="left":o.align[c]=null;for(c=0;c<o.cells.length;c++)o.cells[c]=o.cells[c].split(/ *\| */);this.tokens.push(o)}else if(s=this.rules.lheading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2]?1:2,text:s[1]});else if(s=this.rules.hr.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,t,!0),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(e)){for(e=e.substring(s[0].length),l=s[2],this.tokens.push({type:"list_start",ordered:l.length>1}),s=s[0].match(this.rules.item),i=!1,d=s.length,c=0;d>c;c++)o=s[c],u=o.length,o=o.replace(/^ *([*+-]|\d+\.) +/,""),~o.indexOf("\n ")&&(u-=o.length,o=this.options.pedantic?o.replace(/^ {1,4}/gm,""):o.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&c!==d-1&&(a=p.bullet.exec(s[c+1])[0],l===a||l.length>1&&a.length>1||(e=s.slice(c+1).join("\n")+e,c=d-1)),r=i||/\n\n(?!\s*$)/.test(o),c!==d-1&&(i="\n"===o.charAt(o.length-1),r||(r=i)),this.tokens.push({type:r?"loose_item_start":"list_item_start"}),this.token(o,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(e))e=e.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:s[0]});else if(!n&&t&&(s=this.rules.def.exec(e)))e=e.substring(s[0].length),this.tokens.links[s[1].toLowerCase()]={href:s[2],title:s[3]};else if(t&&(s=this.rules.table.exec(e))){for(e=e.substring(s[0].length),o={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/(?: *\| *)?\n$/,"").split("\n")},c=0;c<o.align.length;c++)/^ *-+: *$/.test(o.align[c])?o.align[c]="right":/^ *:-+: *$/.test(o.align[c])?o.align[c]="center":/^ *:-+ *$/.test(o.align[c])?o.align[c]="left":o.align[c]=null;for(c=0;c<o.cells.length;c++)o.cells[c]=o.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(o)}else if(t&&(s=this.rules.paragraph.exec(e)))e=e.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var g={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:c,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:c,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};g._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,g._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,g.link=u(g.link)("inside",g._inside)("href",g._href)(),g.reflink=u(g.reflink)("inside",g._inside)(),g.normal=d({},g),g.pedantic=d({},g.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),g.gfm=d({},g.normal,{escape:u(g.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:u(g.text)("]|","~]|")("|","|https?://|")()}),g.breaks=d({},g.gfm,{br:u(g.br)("{2,}","*")(),text:u(g.gfm.text)("{2,}","*")()}),r.rules=g,r.output=function(e,t,n){var i=new r(t,n);return i.output(e)},r.prototype.output=function(e){for(var t,n,i,r,s="";e;)if(r=this.rules.escape.exec(e))e=e.substring(r[0].length),s+=r[1];else if(r=this.rules.autolink.exec(e))e=e.substring(r[0].length),"@"===r[2]?(n=":"===r[1].charAt(6)?this.mangle(r[1].substring(7)):this.mangle(r[1]),i=this.mangle("mailto:")+n):(n=a(r[1]),i=n),s+=this.renderer.link(i,null,n);else if(this.inLink||!(r=this.rules.url.exec(e))){if(r=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(r[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(r[0])&&(this.inLink=!1),e=e.substring(r[0].length),s+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):a(r[0]):r[0];else if(r=this.rules.link.exec(e))e=e.substring(r[0].length),this.inLink=!0,s+=this.outputLink(r,{href:r[2],title:r[3]}),this.inLink=!1;else if((r=this.rules.reflink.exec(e))||(r=this.rules.nolink.exec(e))){if(e=e.substring(r[0].length),t=(r[2]||r[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){s+=r[0].charAt(0),e=r[0].substring(1)+e;continue}this.inLink=!0,s+=this.outputLink(r,t),this.inLink=!1}else if(r=this.rules.strong.exec(e))e=e.substring(r[0].length),s+=this.renderer.strong(this.output(r[2]||r[1]));else if(r=this.rules.em.exec(e))e=e.substring(r[0].length),s+=this.renderer.em(this.output(r[2]||r[1]));else if(r=this.rules.code.exec(e))e=e.substring(r[0].length),s+=this.renderer.codespan(a(r[2],!0));else if(r=this.rules.br.exec(e))e=e.substring(r[0].length),s+=this.renderer.br();else if(r=this.rules.del.exec(e))e=e.substring(r[0].length),s+=this.renderer.del(this.output(r[1]));else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),s+=this.renderer.text(a(this.smartypants(r[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(r[0].length),n=a(r[1]),i=n,s+=this.renderer.link(i,null,n);return s},r.prototype.outputLink=function(e,t){var n=a(t.href),i=t.title?a(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,i,this.output(e[1])):this.renderer.image(n,i,a(e[1]))},r.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},r.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",i=e.length,r=0;i>r;r++)t=e.charCodeAt(r),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},s.prototype.code=function(e,t,n){if(this.options.highlight){var i=this.options.highlight(e,t);null!=i&&i!==e&&(n=!0,e=i)}return t?'<pre><code class="'+this.options.langPrefix+a(t,!0)+'">'+(n?e:a(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:a(e,!0))+"\n</code></pre>"},s.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},s.prototype.html=function(e){return e},s.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},s.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},s.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},s.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},s.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},s.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},s.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},s.prototype.tablecell=function(e,t){var n=t.header?"th":"td",i=t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">";return i+e+"</"+n+">\n"},s.prototype.strong=function(e){return"<strong>"+e+"</strong>"},s.prototype.em=function(e){return"<em>"+e+"</em>"},s.prototype.codespan=function(e){return"<code>"+e+"</code>"},s.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},s.prototype.del=function(e){return"<del>"+e+"</del>"},s.prototype.link=function(e,t,n){if(this.options.sanitize){try{var i=decodeURIComponent(o(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(r){return""}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:"))return""}var s='<a href="'+e+'"';return t&&(s+=' title="'+t+'"'),s+=">"+n+"</a>"},s.prototype.image=function(e,t,n){var i='<img src="'+e+'" alt="'+n+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">"},s.prototype.text=function(e){return e},l.parse=function(e,t,n){var i=new l(t,n);return i.parse(e)},l.prototype.parse=function(e){this.inline=new r(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},l.prototype.next=function(){return this.token=this.tokens.pop()},l.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},l.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},l.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,i,r,s="",l="";for(n="",e=0;e<this.token.header.length;e++)i={header:!0,align:this.token.align[e]},n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(s+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});l+=this.renderer.tablerow(n)}return this.renderer.table(s,l);case"blockquote_start":for(var l="";"blockquote_end"!==this.next().type;)l+=this.tok();return this.renderer.blockquote(l);case"list_start":for(var l="",a=this.token.ordered;"list_end"!==this.next().type;)l+=this.tok();return this.renderer.list(l,a);case"list_item_start":for(var l="";"list_item_end"!==this.next().type;)l+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(l);case"loose_item_start":for(var l="";"list_item_end"!==this.next().type;)l+=this.tok();return this.renderer.listitem(l);case"html":var o=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(o);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},c.exec=c,h.options=h.setOptions=function(e){return d(h.defaults,e),h},h.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new s,xhtml:!1},h.Parser=l,h.parser=l.parse,h.Renderer=s,h.Lexer=t,h.lexer=t.lex,h.InlineLexer=r,h.inlineLexer=r.output,h.parse=h,"undefined"!=typeof n&&"object"==typeof i?n.exports=h:"function"==typeof e&&e.amd?e(function(){return h}):this.marked=h}).call(function(){return this||("undefined"!=typeof window?window:t)}())}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./modules/Marky"),r=Object.create(i.Marky);r.init(),n["default"]=r},{"./modules/Marky":9}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Button=void 0;var i=e("./Element"),r=e("./Icon"),s=n.Button=Object.create(i.Element);s.init=function(e,t){i.Element.init.call(this,"button",e,t),this.addClass(this.title,this.id),this.assign("value",this.title),this.icon=Object.create(r.Icon);for(var n=arguments.length,s=Array(n>2?n-2:0),l=2;n>l;l++)s[l-2]=arguments[l];this.icon.init(s),this.icon.appendTo(this.element)}},{"./Element":6,"./Icon":7}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.HeadingDialog=n.ImageDialog=n.LinkDialog=void 0;var i=e("./Element"),r=e("./ListItems"),s=n.LinkDialog=Object.create(i.Element);s.init=function(e,t){i.Element.init.call(this,"div",e,t),this.addClass(this.title,t,"dialog"),s.linkForm=Object.create(i.Element),this.linkForm.init("form","Link Form"),this.linkForm.assign("id",this.id+"-link-form"),this.linkUrlInput=Object.create(i.Element),this.linkUrlInput.init("input","Link Url"),this.linkUrlInput.addClass("link-url-input"),this.linkUrlInput.assign("type","text"),this.linkUrlInput.assign("name",this.id+"-link-url-input"),this.linkUrlInput.assign("placeholder","http://url.com"),this.linkDisplayInput=Object.create(i.Element),this.linkDisplayInput.init("input","Link Display"),this.linkDisplayInput.addClass("link-display-input"),this.linkDisplayInput.assign("type","text"),this.linkDisplayInput.assign("name",this.id+"-link-display-input"),this.linkDisplayInput.assign("placeholder","Display text"),this.insertButton=Object.create(i.Element),this.insertButton.init("button","Insert Link"),this.insertButton.addClass("insert-link"),this.insertButton.assign("textContent","Insert"),this.linkUrlInput.appendTo(this.linkForm.element),this.linkDisplayInput.appendTo(this.linkForm.element),this.insertButton.appendTo(this.linkForm.element),this.linkForm.appendTo(this.element)};var l=n.ImageDialog=Object.create(i.Element);l.init=function(e,t){i.Element.init.call(this,"div",e,t),this.addClass(this.title,t,"dialog"),l.imageForm=Object.create(i.Element),this.imageForm.init("form","Image Form"),this.imageForm.assign("id",this.id+"-image-form"),this.imageSourceInput=Object.create(i.Element),this.imageSourceInput.init("input","Image Source"),this.imageSourceInput.addClass("image-source-input"),this.imageSourceInput.assign("type","text"),this.imageSourceInput.assign("name",this.id+"-image-source-input"),this.imageSourceInput.assign("placeholder","http://url.com/image.jpg"),this.imageAltInput=Object.create(i.Element),this.imageAltInput.init("input","Image Alt"),this.imageAltInput.addClass("image-alt-input"),this.imageAltInput.assign("type","text"),this.imageAltInput.assign("name",this.id+"-image-alt-input"),this.imageAltInput.assign("placeholder","Alt text"),this.insertButton=Object.create(i.Element),this.insertButton.init("button","Insert Image"),this.insertButton.addClass("insert-image"),this.insertButton.assign("textContent","Insert"),this.imageSourceInput.appendTo(this.imageForm.element),this.imageAltInput.appendTo(this.imageForm.element),this.insertButton.appendTo(this.imageForm.element),this.imageForm.appendTo(this.element)};var a=n.HeadingDialog=Object.create(i.Element);a.init=function(e,t){var n=this;i.Element.init.call(this,"div",e,t),this.addClass(this.title,t,"dialog"),this.headingList=Object.create(i.Element),this.headingList.init("ul","Heading List"),this.headingList.assign("id",t+"-heading-list"),this.options=[];for(var s=0;6>s;s++){var l=Object.create(r.HeadingItem);l.init("Heading "+(s+1),s+1),this.options.push(l)}var a=Object.create(r.HeadingItem);a.init("Remove Heading","0","fa","fa-remove"),this.options.push(a),this.options.forEach(function(e){e.appendTo(n.headingList.element)}),this.headingList.appendTo(this.element)}},{"./Element":6,"./ListItems":8}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.Element={init:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];this.type=e,this.title=t,this.id=n,this.element=this.register(),this.title&&(this.element.title=this.title)},register:function(){return document.createElement(this.type)},assign:function(e,t){this.element[e]=t},appendTo:function(e){e.appendChild(this.element)},addClass:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];n.forEach(function(t){e.element.classList.add(t.replace(/[ ]/g,"-").toLowerCase())})},removeClass:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];n.forEach(function(t){e.element.classList.remove(t.replace(/[ ]/g,"-").toLowerCase())})},listen:function(e,t){this.element.addEventListener(e,t)}}},{}],7:[function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Icon=void 0;var r=e("./Element"),s=n.Icon=Object.create(r.Element);s.init=function(e){r.Element.init.call(this,"i"),this.addClass.apply(this,i(e))}},{"./Element":6}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.HeadingItem=void 0;var i=e("./Element"),r=e("./Icon"),s=n.HeadingItem=Object.create(i.Element);s.init=function(e,t){i.Element.init.call(this,"li",e),this.addClass(this.title.replace(" ","-")),this.assign("value",t),this.button=Object.create(i.Element),this.button.init("button",e),this.button.assign("value",t),this.button.addClass("heading-button"),this.button.appendTo(this.element);for(var n=arguments.length,s=Array(n>2?n-2:0),l=2;n>l;l++)s[l-2]=arguments[l];s.length?(this.icon=Object.create(r.Icon),this.icon.init(s),this.icon.appendTo(this.button.element)):this.button.assign("textContent",t)}},{"./Element":6,"./Icon":7}],9:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.Marky=void 0;var s=e("./mark"),l=r(s),a=e("./dispatcher"),o=i(a),u=e("./custom-events"),c=e("./handlers");n.Marky={init:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];this.mark=l["default"],this.state=[{markdown:"",html:"",selection:[0,0]}],this.index=0,this.editor=t,this.container=e,this.output=n},destroy:function(){var e=arguments.length<=0||void 0===arguments[0]?this.container:arguments[0];e.parentNode&&e.parentNode.removeChild(e)},update:function(e){var t=arguments.length<=1||void 0===arguments[1]?[0,0]:arguments[1],n=arguments.length<=2||void 0===arguments[2]?this.state:arguments[2],i=arguments.length<=3||void 0===arguments[3]?this.index:arguments[3],r=arguments.length<=4||void 0===arguments[4]?this.editor:arguments[4],s=o.update(e,t,n,i);return this.state=s.state,this.index=s.index,r.dispatchEvent(u.markychange),this.index},updateEditor:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?this.editor:arguments[2];n.value=e,n.setSelectionRange(t[0],t[1])},updateOutput:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.output:arguments[1];t.value=e},undo:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.state:arguments[1],n=arguments.length<=2||void 0===arguments[2]?this.index:arguments[2],i=arguments.length<=3||void 0===arguments[3]?this.editor:arguments[3];if(0===n)return n;var r=o.undo(e,t,n);return this.index=r.index,this.updateEditor(r.state.markdown,r.state.selection,i),i.dispatchEvent(u.markychange),this.index},redo:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.state:arguments[1],n=arguments.length<=2||void 0===arguments[2]?this.index:arguments[2],i=arguments.length<=3||void 0===arguments[3]?this.editor:arguments[3];if(n===t.length-1)return n;var r=o.redo(e,t,n);return this.index=r.index,this.updateEditor(r.state.markdown,r.state.selection,i),i.dispatchEvent(u.markychange),this.index},setSelection:function(){var e=arguments.length<=0||void 0===arguments[0]?[0,0]:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.editor:arguments[1];return t.setSelectionRange(e[0],e[1]),e},expandSelectionForward:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.editor:arguments[1],n=t.selectionStart,i=t.selectionEnd+e;return t.setSelectionRange(n,i),[n,i]},expandSelectionBackward:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.editor:arguments[1],n=t.selectionStart-e,i=t.selectionEnd;return t.setSelectionRange(n,i),[n,i]},moveCursorBackward:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.editor:arguments[1],n=t.selectionStart-e;return t.setSelectionRange(n,n),n},moveCursorForward:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.editor:arguments[1],n=t.selectionStart+e;return t.setSelectionRange(n,n),n},bold:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.editor:arguments[1];e=e||[t.selectionStart,t.selectionEnd];var n=(0,c.inlineHandler)(t.value,e,"**");return this.updateEditor(n.value,n.range,t),t.dispatchEvent(u.markyupdate),[n.range[0],n.range[1]]},italic:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.editor:arguments[1];e=e||[t.selectionStart,t.selectionEnd];var n=(0,c.inlineHandler)(t.value,e,"_");return this.updateEditor(n.value,n.range,t),t.dispatchEvent(u.markyupdate),[n.range[0],n.range[1]]},strikethrough:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.editor:arguments[1];e=e||[t.selectionStart,t.selectionEnd];var n=(0,c.inlineHandler)(t.value,e,"~~");return this.updateEditor(n.value,n.range,t),t.dispatchEvent(u.markyupdate),[n.range[0],n.range[1]]},code:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.editor:arguments[1];e=e||[t.selectionStart,t.selectionEnd];var n=(0,c.inlineHandler)(t.value,e,"`");return this.updateEditor(n.value,n.range,t),t.dispatchEvent(u.markyupdate),[n.range[0],n.range[1]]},blockquote:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.editor:arguments[1];e=e||[t.selectionStart,t.selectionEnd];var n=(0,c.blockHandler)(t.value,e,"> ");return this.updateEditor(n.value,n.range,t),t.dispatchEvent(u.markyupdate),[n.range[0],n.range[1]]},heading:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments[1],n=arguments.length<=2||void 0===arguments[2]?this.editor:arguments[2];t=t||[n.selectionStart,n.selectionEnd];for(var i=[],r=void 0,s=1;e>=s;s++)i.push("#");r=i.join("");var l=r?" ":"",a=(0,c.blockHandler)(n.value,t,r+l);return this.updateEditor(a.value,a.range,n),n.dispatchEvent(u.markyupdate),[a.range[0],a.range[1]]},link:function(e){var t=arguments.length<=1||void 0===arguments[1]?"http://url.com":arguments[1],n=arguments.length<=2||void 0===arguments[2]?"http://url.com":arguments[2],i=arguments.length<=3||void 0===arguments[3]?this.editor:arguments[3];e=e||[i.selectionStart,i.selectionEnd];var r="["+n+"]("+t+")",s=(0,c.insertHandler)(i.value,e,r);return this.updateEditor(s.value,s.range,i),i.dispatchEvent(u.markyupdate),[s.range[0],s.range[1]]},image:function(e){var t=arguments.length<=1||void 0===arguments[1]?"http://imagesource.com/image.jpg":arguments[1],n=arguments.length<=2||void 0===arguments[2]?"http://imagesource.com/image.jpg":arguments[2],i=arguments.length<=3||void 0===arguments[3]?this.editor:arguments[3];e=e||[i.selectionStart,i.selectionEnd];var r="!["+n+"]("+t+")",s=(0,c.insertHandler)(i.value,e,r);return this.updateEditor(s.value,s.range,i),i.dispatchEvent(u.markyupdate),[s.range[0],s.range[1]]},unorderedList:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.editor:arguments[1];e=e||[t.selectionStart,t.selectionEnd];var n=(0,c.listHandler)(t.value,e,"ul");return this.updateEditor(n.value,n.range,t),t.dispatchEvent(u.markyupdate),[n.range[0],n.range[1]]},orderedList:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.editor:arguments[1];e=e||[t.selectionStart,t.selectionEnd];var n=(0,c.listHandler)(t.value,e,"ol");return this.updateEditor(n.value,n.range,t),t.dispatchEvent(u.markyupdate),[n.range[0],n.range[1]]},indent:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.editor:arguments[1];e=e||[t.selectionStart,t.selectionEnd];var n=(0,c.indentHandler)(t.value,e,"in");return this.updateEditor(n.value,n.range,t),t.dispatchEvent(u.markyupdate),[n.range[0],n.range[1]]},outdent:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.editor:arguments[1];e=e||[t.selectionStart,t.selectionEnd];var n=(0,c.indentHandler)(t.value,e,"out");return this.updateEditor(n.value,n.range,t),t.dispatchEvent(u.markyupdate),[n.range[0],n.range[1]]}}},{"./custom-events":11,"./dispatcher":12,"./handlers":13,"./mark":14}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Separator=void 0;var i=e("./Element"),r=n.Separator=Object.create(i.Element);r.init=function(){i.Element.init.call(this,"span"),this.addClass("separator")}},{"./Element":6}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}();n.markyblur=new CustomEvent("markyblur"),n.markyfocus=new CustomEvent("markyfocus"),n.markyselect=new CustomEvent("markyselect"),n.markyupdate=new CustomEvent("markyupdate"),n.markychange=new CustomEvent("markychange")},{}],12:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n,i){var r={sanitize:!0},s=(0,o["default"])(e,r).toString()||"",l=(0,c["default"])(n,i,function(){return{markdown:e,html:s,selection:t}});return l}function s(e,t,n){return n=n>e-1?n-e:0,{state:t[n],index:n}}function l(e,t,n){return n=n<t.length-(e+1)?n+e:t.length-1,{state:t[n],index:n}}Object.defineProperty(n,"__esModule",{value:!0}),n.update=r,n.undo=s,n.redo=l;var a=e("marked"),o=i(a),u=e("./push-state"),c=i(u)},{"./push-state":16,marked:2}],13:[function(e,t,n){"use strict";function i(e,t,n){var i=void 0,r=[n,n];return-1!==e.indexOf(n)&&t.forEach(function(i,s){e.lastIndexOf(n,i)===i-n.length&&(e=e.substring(0,i-n.length)+e.substring(i,e.length),
0===s?(t[0]=t[0]-n.length,t[1]=t[1]-n.length):t[1]=t[1]-n.length,1===s&&r[0]&&(t[1]=t[1]+n.length),r[s]=""),e.indexOf(n,i)===i&&(e=e.substring(0,i)+e.substring(i+n.length,e.length),0===s&&t[0]!==t[1]&&(t[1]=t[1]-n.length),0===s&&t[0]===t[1]&&(t[0]=t[0]-n.length),1===s&&r[0]&&(t[1]=t[1]+n.length),r[s]="")}),i=e.substring(0,t[0])+r[0]+e.substring(t[0],t[1])+r[1]+e.substring(t[1],e.length),{value:i,range:[t[0]+r[0].length,t[1]+r[1].length]}}function r(e,t,n){var i=t[0],r=t[1],s=void 0,l=(0,o.startOfLine)(e,i),a=(0,o.endOfLine)(e,r);if((0,o.indexOfMatch)(e,/^[#>]/m,l)===l){var u=e.substring(l,l+e.substring(l).search(/[0-9~*`_-]|\b|\n|$/gm));return s=e.substring(0,l)+e.substring(l+e.substring(l).search(/[0-9~*`_-]|\b|\n|$/gm),e.length),a-=u.length,u.trim()!==n.trim()&&n.trim().length&&(s=e.substring(0,l)+n+e.substring(l+e.substring(l).search(/[0-9~*`_-]|\b|\n|$/gm),e.length),l+=n.length,a+=n.length),{value:s,range:[l,a]}}return s=e.substring(0,l)+n+e.substring(l,e.length),{value:s,range:[i+n.length,r+n.length]}}function s(e,t,n){var i=(0,o.startOfLine)(e,t[0]),r=(0,o.endOfLine)(e,t[1]),s=(0,o.splitLines)(e.substring(i,r)),l=[],a=void 0;s.forEach(function(e,t){var i="ul"===n?"- ":t+1+". ",r=void 0;if(0===(0,o.indexOfMatch)(e,/^[0-9#>-]/m,0)){var s=e.substring(0,0+e.substring(0).search(/[~*`_[!]|[a-zA-Z]|\r|\n|$/gm));return r=e.substring(e.search(/[~*`_[!]|[a-zA-Z]|\r|\n|$/gm),e.length),s.trim()!==i.trim()&&(r=i+e.substring(e.search(/[~*`_[!]|[a-zA-Z]|\r|\n|$/gm),e.length)),l.push(r)}return r=i+e.substring(0,e.length),l.push(r)});var u=l.join("\r\n");return a=e.substring(0,i)+l.join("\r\n")+e.substring(r,e.length),{value:a,range:[i,i+u.replace(/\n/gm,"").length]}}function l(e,t,n){var i=(0,o.startOfLine)(e,t[0]),r=(0,o.endOfLine)(e,t[1]),s=(0,o.splitLines)(e.substring(i,r)),l=[],a=void 0;s.forEach(function(e){var t="    ",i=void 0;return"out"===n?(i=0===e.indexOf(t,0)?e.substring(t.length,e.length):e.substring(e.search(/[~*`_[!#>-]|[a-zA-Z0-9]|\r|\n|$/gm),e.length),l.push(i)):(i=t+e.substring(0,e.length),l.push(i))});var u=l.join("\r\n");return a=e.substring(0,i)+l.join("\r\n")+e.substring(r,e.length),{value:a,range:[i,i+u.replace(/\n/gm,"").length]}}function a(e,t,n){var i=t[0],r=t[1],s=void 0;return s=e.substring(0,i)+n+e.substring(r,e.length),{value:s,range:[i,i+n.length]}}Object.defineProperty(n,"__esModule",{value:!0}),n.inlineHandler=i,n.blockHandler=r,n.listHandler=s,n.indentHandler=l,n.insertHandler=a;var o=e("./parsers")},{"./parsers":15}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){var e=arguments.length<=0||void 0===arguments[0]?"marky-mark":arguments[0],t=document.getElementsByTagName(e),n=[];return Array.prototype.forEach.call(t,function(e,t){function c(e){e.preventDefault(),v.element.focus()}function d(e){e.preventDefault(),e.currentTarget.classList.add("active"),v.element.focus()}function h(e){e.currentTarget.classList.remove("active")}var p=t;if(e.children.length)return void(e.getAttribute("id")&&n.push(parseInt(e.getAttribute("id").split("-")[2])));var g=Object.create(r.Element);g.init("div","Toolbar"),n.length&&(n.sort(),p=n[n.length-1]+1);var m="marky-mark-"+p;e.id=m,g.addClass("marky-toolbar",m);var f=Object.create(r.Element);f.init("div","Dialogs"),f.addClass("marky-dialogs",m);var v=Object.create(r.Element);v.init("textarea","Marky Marked Editor"),v.addClass("marky-editor",m);var b=Object.create(r.Element);b.init("input","Marky Marked Output"),b.assign("type","hidden"),b.addClass("marky-output",m);var k=Object.create(i.Marky);k.init(e,v.element,b.element),v.assign("_marky",k);var y=Object.create(l.HeadingDialog);y.init("Heading Dialog",m),y.element.style.visibility="hidden",y.options.forEach(function(e){e.listen("click",function(e){e.preventDefault();var t=parseInt(e.target.value);v.element.focus(),y.removeClass("toggled"),y.element.style.visibility="hidden",v.element._marky.heading(t,[v.element.selectionStart,v.element.selectionEnd])})});var x=Object.create(l.LinkDialog);x.init("Link Dialog",m),x.element.style.visibility="hidden",x.linkForm.listen("submit",c),x.insertButton.listen("click",function(e){e.preventDefault,v.element.focus();var t=x.linkUrlInput.element.value?x.linkUrlInput.element.value:"http://url.com",n=x.linkDisplayInput.element.value?x.linkDisplayInput.element.value:t;x.linkUrlInput.element.value="",x.linkDisplayInput.element.value="",x.element.style.visibility="hidden",x.removeClass("toggled"),v.element._marky.link([v.element.selectionStart,v.element.selectionEnd],t,n)});var E=Object.create(l.ImageDialog);E.init("Image Dialog",m),E.element.style.visibility="hidden",E.imageForm.listen("submit",c),E.insertButton.listen("click",function(e){e.preventDefault,v.element.focus();var t=E.imageSourceInput.element.value?E.imageSourceInput.element.value:"http://imagesource.com/image.jpg",n=E.imageAltInput.element.value?E.imageAltInput.element.value:t;E.imageSourceInput.element.value="",E.imageAltInput.element.value="",E.element.style.visibility="hidden",E.removeClass("toggled"),v.element._marky.image([v.element.selectionStart,v.element.selectionEnd],t,n)});var _=Object.create(s.Button);_.init("Heading",m,"fa","fa-header"),_.dialog=y.element,_.listen("click",function(e){return e.preventDefault(),e.currentTarget.blur(),_.dialog.classList.toggle("toggled"),E.element.style.visibility="hidden",E.removeClass("toggled"),x.element.style.visibility="hidden",x.removeClass("toggled"),"hidden"===_.dialog.style.visibility?void(_.dialog.style.visibility="visible"):void(_.dialog.style.visibility="hidden")});var w=Object.create(s.Button);w.init("Bold",m,"fa","fa-bold"),w.listen("mousedown",d),w.listen("mouseup",h),w.listen("click",function(e){e.preventDefault(),v.element.focus(),v.element._marky.bold([v.element.selectionStart,v.element.selectionEnd])});var O=Object.create(s.Button);O.init("Italic",m,"fa","fa-italic"),O.listen("mousedown",d),O.listen("mouseup",h),O.listen("click",function(e){e.preventDefault(),v.element.focus(),v.element._marky.italic([v.element.selectionStart,v.element.selectionEnd])});var S=Object.create(s.Button);S.init("Strikethrough",m,"fa","fa-strikethrough"),S.listen("mousedown",d),S.listen("mouseup",h),S.listen("click",function(e){e.preventDefault(),v.element.focus(),v.element._marky.strikethrough([v.element.selectionStart,v.element.selectionEnd])});var T=Object.create(s.Button);T.init("Code",m,"fa","fa-code"),T.listen("mousedown",d),T.listen("mouseup",h),T.listen("click",function(e){e.preventDefault(),v.element.focus(),v.element._marky.code([v.element.selectionStart,v.element.selectionEnd])});var j=Object.create(s.Button);j.init("Blockquote",m,"fa","fa-quote-right"),j.listen("mousedown",d),j.listen("mouseup",h),j.listen("click",function(e){e.preventDefault(),v.element.focus(),v.element._marky.blockquote([v.element.selectionStart,v.element.selectionEnd])});var I=Object.create(s.Button);I.init("Link",m,"fa","fa-link"),I.dialog=x.element,I.listen("mousedown",d),I.listen("mouseup",h),I.listen("click",function(e){return e.preventDefault(),v.element.focus(),I.dialog.classList.toggle("toggled"),E.element.style.visibility="hidden",E.removeClass("toggled"),y.element.style.visibility="hidden",y.removeClass("toggled"),"hidden"===I.dialog.style.visibility?(I.dialog.children[0].children[1].value=v.element.value.substring(v.element.selectionStart,v.element.selectionEnd),void(I.dialog.style.visibility="visible")):void(I.dialog.style.visibility="hidden")});var L=Object.create(s.Button);L.init("Image",m,"fa","fa-file-image-o"),L.dialog=E.element,L.listen("mousedown",d),L.listen("mouseup",h),L.listen("click",function(e){return e.preventDefault(),v.element.focus(),L.dialog.classList.toggle("toggled"),x.element.style.visibility="hidden",x.removeClass("toggled"),y.element.style.visibility="hidden",y.removeClass("toggled"),"hidden"===L.dialog.style.visibility?(L.dialog.children[0].children[1].value=v.element.value.substring(v.element.selectionStart,v.element.selectionEnd),void(L.dialog.style.visibility="visible")):void(L.dialog.style.visibility="hidden")});var C=Object.create(s.Button);C.init("Unordered List",m,"fa","fa-list-ul"),C.listen("mousedown",d),C.listen("mouseup",h),C.listen("click",function(e){e.preventDefault(),v.element.focus(),v.element._marky.unorderedList([v.element.selectionStart,v.element.selectionEnd])});var D=Object.create(s.Button);D.init("Ordered List",m,"fa","fa-list-ol"),D.listen("mousedown",d),D.listen("mouseup",h),D.listen("click",function(e){e.preventDefault(),v.element.focus(),v.element._marky.orderedList([v.element.selectionStart,v.element.selectionEnd])});var $=Object.create(s.Button);$.init("Outdent",m,"fa","fa-outdent"),$.listen("mousedown",d),$.listen("mouseup",h),$.listen("click",function(e){e.preventDefault(),v.element.focus(),v.element._marky.outdent([v.element.selectionStart,v.element.selectionEnd])});var A=Object.create(s.Button);A.init("Indent",m,"fa","fa-indent"),A.listen("mousedown",d),A.listen("mouseup",h),A.listen("click",function(e){e.preventDefault(),v.element.focus(),v.element._marky.indent([v.element.selectionStart,v.element.selectionEnd])});var B=Object.create(s.Button);B.init("Undo",m,"fa","fa-backward"),B.listen("mousedown",d),B.listen("mouseup",h),B.listen("click",function(e){e.preventDefault(),B.element.classList.contains("disabled")||(v.element.focus(),v.element._marky.undo(1,v.element._marky.state,v.element._marky.index))});var M=Object.create(s.Button);M.init("Redo",m,"fa","fa-forward"),M.listen("mousedown",d),M.listen("mouseup",h),M.listen("click",function(e){e.preventDefault(),M.element.classList.contains("disabled")||(v.element.focus(),v.element._marky.redo(1,v.element._marky.state,v.element._marky.index))});var H=Object.create(s.Button);H.init("Fullscreen",m,"fa","fa-expand"),H.listen("click",function(t){t.preventDefault(),t.currentTarget.blur(),t.currentTarget.classList.toggle("fullscreen-toggled"),e.classList.toggle("fullscreen-toggled"),v.element.classList.toggle("fullscreen-toggled"),H.icon.element.classList.toggle("fa-expand"),H.icon.element.classList.toggle("fa-compress")});var q=Object.create(a.Separator);q.init();var F=Object.create(a.Separator);F.init();var P=Object.create(a.Separator);P.init();var U=Object.create(a.Separator);U.init();var z=Object.create(a.Separator);z.init(),g.appendTo(e),v.appendTo(e),b.appendTo(e),_.appendTo(g.element),q.appendTo(g.element),w.appendTo(g.element),O.appendTo(g.element),S.appendTo(g.element),T.appendTo(g.element),j.appendTo(g.element),F.appendTo(g.element),I.appendTo(g.element),L.appendTo(g.element),P.appendTo(g.element),C.appendTo(g.element),D.appendTo(g.element),$.appendTo(g.element),A.appendTo(g.element),U.appendTo(g.element),B.appendTo(g.element),M.appendTo(g.element),z.appendTo(g.element),H.appendTo(g.element),f.appendTo(g.element),x.appendTo(f.element),E.appendTo(f.element),y.appendTo(f.element),v.listen("markyupdate",function(e){e.currentTarget._marky.update(e.currentTarget.value,[e.currentTarget.selectionStart,e.currentTarget.selectionEnd],e.currentTarget._marky.state,e.currentTarget._marky.index)},!1),v.listen("markychange",function(e){var t=e.currentTarget._marky.state[e.currentTarget._marky.index].html;0===e.currentTarget._marky.index?B.addClass("disabled"):B.removeClass("disabled"),e.currentTarget._marky.index===e.currentTarget._marky.state.length-1?M.addClass("disabled"):M.removeClass("disabled"),e.currentTarget._marky.updateOutput(t)},!1),v.listen("input",function(e){window.clearTimeout(u),u=window.setTimeout(function(){e.target.dispatchEvent(o.markyupdate)},1e3)},!1),v.listen("change",function(e){e.currentTarget.dispatchEvent(o.markyupdate)},!1),v.listen("paste",function(e){setTimeout(function(){e.currentTarget.dispatchEvent(o.markyupdate)},0)},!1),v.listen("cut",function(e){setTimeout(function(){e.currentTarget.dispatchEvent(o.markyupdate)},0)},!1);var R=0;v.listen("keydown",function(e){8===e.which&&(R=e.currentTarget.selectionEnd-e.currentTarget.selectionStart)});var N=[],Z=[46,44,63,33,58,59,47,92,38,124,32];v.listen("keypress",function(e){N.push(e.which),N.length>2&&N.shift(),Z.forEach(function(t){return 32===e.which&&N[0]===t?window.clearTimeout(u):e.which===t?(window.clearTimeout(u),e.currentTarget.dispatchEvent(o.markyupdate)):void 0})}),v.listen("keyup",function(e){8===e.which&&R>0&&(window.clearTimeout(u),R=0,e.currentTarget.dispatchEvent(o.markyupdate))}),v.listen("select",function(e){e.currentTarget.dispatchEvent(o.markyselect)}),v.listen("blur",function(e){e.currentTarget.dispatchEvent(o.markyblur)}),v.listen("focus",function(e){e.currentTarget.dispatchEvent(o.markyfocus)}),v.listen("click",function(){E.element.style.visibility="hidden",E.removeClass("toggled"),x.element.style.visibility="hidden",x.removeClass("toggled"),y.element.style.visibility="hidden",y.removeClass("toggled")})})};var i=e("./Marky"),r=e("./Element"),s=e("./Button"),l=e("./Dialogs"),a=e("./Separator"),o=e("./custom-events"),u=void 0},{"./Button":4,"./Dialogs":5,"./Element":6,"./Marky":9,"./Separator":10,"./custom-events":11}],15:[function(e,t,n){"use strict";function i(e,t,n){var i=null!==n?e.substring(n):e,r=i.match(t);return r?i.indexOf(r[0])+n:-1}function r(e,t,n){var i=null!==n?e.substring(n):e,r=i.match(t),s=[];return r.forEach(function(e,t){var r=s?s[t-1]:null;s.push(i.indexOf(e,r+1)+n)}),s||-1}function s(e,t,n){var i=null!==n?e.substring(0,n):e,r=i.match(t);return r?i.lastIndexOf(r[r.length-1]):-1}function l(e,t){var n=t?e.substring(0,t):e;return n.split(/\r\n|\r|\n/)}function a(e,t){var n=t?e.substring(t):e;return n.split(/\r\n|\r|\n/)}function o(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return s(e,/^.*/gm,t)}function u(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return i(e,/(\r|\n|$)/gm,t)}Object.defineProperty(n,"__esModule",{value:!0}),n.indexOfMatch=i,n.indicesOfMatches=r,n.lastIndexOfMatch=s,n.splitLinesBackward=l,n.splitLines=a,n.startOfLine=o,n.endOfLine=u},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e,t,n){e=e.slice(0,t+1);var i=n();return e.push(i),t++,t>999&&(e.shift(),t--),{state:e,index:t}}},{}]},{},[1])(1)});
//# sourceMappingURL=marky.min.js.map
